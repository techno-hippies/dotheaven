name = "session-voice"
main = "src/index.ts"
compatibility_date = "2024-09-23"
compatibility_flags = ["nodejs_compat"]

[[d1_databases]]
binding = "DB"
database_name = "session-voice"
database_id = "ac26bc37-8329-4695-a733-fe54a6bd05e0"

[durable_objects]
bindings = [
  { name = "ROOM_DO", class_name = "RoomDO" },
  { name = "DUET_ROOM_DO", class_name = "DuetRoomDO" }
]

[[migrations]]
tag = "v1"
new_classes = ["RoomDO"]

[[migrations]]
tag = "v2"
new_classes = ["DuetRoomDO"]

[triggers]
crons = ["*/2 * * * *"]

[vars]
ENVIRONMENT = "development"
SESSION_ESCROW_MODE = "live"
RPC_URL = "https://rpc.moderato.tempo.xyz"
ESCROW_ADDRESS = "0xb1E233221FB25c65090A75cc60Df5164A2eA4B98"
REGISTRY_ADDRESS = "0xA111c5cA16752B09fF16B3B8B24BA55a8486aB23"
VERIFICATION_MIRROR_ADDRESS = "0x0000000000000000000000000000000000000000"
CHAIN_ID = "42431"
LLM_BASE_URL = "https://openrouter.ai/api/v1"
ELEVENLABS_VOICE_ID = "rf0RyZGEDtFGS4U6yghI"
X402_FACILITATOR_BASE_URL = "https://facil-x402rs-sepolia.dotheaven.org"
X402_FACILITATOR_MODE = "self"

# Secrets (set via wrangler secret put):
# AGORA_APP_ID
# AGORA_APP_CERTIFICATE
# AGORA_REST_AUTH (key:secret for Agora REST API â€” needed for CAI agent)
# JWT_SECRET
# X402_FACILITATOR_AUTH_TOKEN (for facilitator settle calls)
# LLM_API_KEY (OpenRouter)
# ELEVENLABS_API_KEY
# ORACLE_PRIVATE_KEY
# ORACLE_SERVICE_TOKEN
