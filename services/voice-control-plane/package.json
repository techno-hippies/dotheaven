{
  "name": "voice-control-plane-service",
  "version": "2.0.0",
  "type": "module",
  "scripts": {
    "dev": "wrangler dev",
    "deploy": "wrangler deploy",
    "migrate:local": "wrangler d1 execute ${VOICE_CONTROL_PLANE_D1_DATABASE:-${D1_DATABASE:-voice-control-plane}} --local --file=migrations/0001_credits_rooms.sql && wrangler d1 execute ${VOICE_CONTROL_PLANE_D1_DATABASE:-${D1_DATABASE:-voice-control-plane}} --local --file=migrations/0002_song_registry.sql && wrangler d1 execute ${VOICE_CONTROL_PLANE_D1_DATABASE:-${D1_DATABASE:-voice-control-plane}} --local --file=migrations/0003_duet_discovery.sql",
    "migrate:remote": "wrangler d1 execute ${VOICE_CONTROL_PLANE_D1_DATABASE:-${D1_DATABASE:-voice-control-plane}} --remote --file=migrations/0001_credits_rooms.sql && wrangler d1 execute ${VOICE_CONTROL_PLANE_D1_DATABASE:-${D1_DATABASE:-voice-control-plane}} --remote --file=migrations/0002_song_registry.sql && wrangler d1 execute ${VOICE_CONTROL_PLANE_D1_DATABASE:-${D1_DATABASE:-voice-control-plane}} --remote --file=migrations/0003_duet_discovery.sql",
    "test:unit": "bun test tests/unit/x402-facilitator.test.ts tests/unit/duet-room-do.test.ts tests/unit/duet-routes.test.ts tests/unit/sessions-timing.test.ts",
    "test:smoke": "bun tests/smoke/smoke-test.ts",
    "test:facilitator": "bun test tests/unit/x402-facilitator.test.ts",
    "test:duet:unit": "bun test tests/unit/duet-room-do.test.ts tests/unit/duet-routes.test.ts",
    "test:timing": "bun test tests/unit/sessions-timing.test.ts",
    "test:rooms": "bun tests/smoke/smoke-test-rooms.ts",
    "test:visibility": "bun tests/smoke/smoke-test-visibility.ts",
    "test:concurrent": "bun tests/smoke/smoke-test-concurrent.ts",
    "test:compensate": "bun tests/smoke/smoke-test-compensate.ts",
    "test:integration:rooms": "bun run test:smoke && bun run test:rooms && bun run test:visibility && bun run test:concurrent && bun run test:compensate",
    "test:duet": "bun tests/smoke/smoke-test-duet.ts",
    "test:duet:broadcast": "bun tests/smoke/smoke-test-duet-broadcast.ts",
    "test:duet:broadcast:video": "bun tests/smoke/smoke-test-duet-broadcast-video.ts",
    "test:duet:self": "bun tests/smoke/smoke-test-duet-self.ts",
    "test:duet:self:remote": "bun tests/smoke/smoke-test-duet-self-remote.ts",
    "test:e2e:local": "bun tests/e2e/e2e-local.ts",
    "test:e2e:local:full": "bun tests/e2e/e2e-local.ts --full",
    "test:e2e:local:duet:onchain": "bun tests/e2e/e2e-local.ts --duet-onchain",
    "dev:duet:onchain": "bun tests/e2e/e2e-local.ts --duet-onchain --serve",
    "seed:song": "bun src/seed-song-registry.ts"
  },
  "dependencies": {
    "agora-token": "^2.0.3",
    "hono": "^4.4.0",
    "viem": "^2.21.0"
  },
  "devDependencies": {
    "@cloudflare/workers-types": "^4.20240925.0",
    "@x402/evm": "2.3.1",
    "@x402/fetch": "2.3.0",
    "playwright": "^1.55.0",
    "wrangler": "^3.80.0"
  }
}
