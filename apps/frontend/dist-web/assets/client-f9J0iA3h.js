var qe=s=>{throw TypeError(s)};var Te=(s,k,F)=>k.has(s)||qe("Cannot "+F);var c=(s,k,F)=>(Te(s,k,"read from private field"),F?F.call(s):k.get(s)),W=(s,k,F)=>k.has(s)?qe("Cannot add the same private member more than once"):k instanceof WeakSet?k.add(s):k.set(s,F),P=(s,k,F,N)=>(Te(s,k,"write to private field"),N?N.call(s,F):k.set(s,F),F);(function(){"use strict";var ne,b,q,S,K,z,J,v,re,se,ie;let s,k=null;function F(){return(k===null||k.byteLength===0)&&(k=new Uint8Array(s.memory.buffer)),k}let N=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});N.decode();const Be=2146435072;let ge=0;function Oe(r,e){return ge+=e,ge>=Be&&(N=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}),N.decode(),ge=e),N.decode(F().subarray(r,r+e))}function p(r,e){return r=r>>>0,Oe(r,e)}let l=0;const Y=new TextEncoder;"encodeInto"in Y||(Y.encodeInto=function(r,e){const t=Y.encode(r);return e.set(t),{read:r.length,written:t.length}});function m(r,e,t){if(t===void 0){const a=Y.encode(r),_=e(a.length,1)>>>0;return F().subarray(_,_+a.length).set(a),l=a.length,_}let n=r.length,i=e(n,1)>>>0;const o=F();let d=0;for(;d<n;d++){const a=r.charCodeAt(d);if(a>127)break;o[i+d]=a}if(d!==n){d!==0&&(r=r.slice(d)),i=t(i,n,n=d+r.length*3,1)>>>0;const a=F().subarray(i+d,i+n),_=Y.encodeInto(r,a);d+=_.written,i=t(i,n,d,1)>>>0}return l=d,i}let V=null;function R(){return(V===null||V.buffer.detached===!0||V.buffer.detached===void 0&&V.buffer!==s.memory.buffer)&&(V=new DataView(s.memory.buffer)),V}function g(r){return r==null}function be(r){const e=typeof r;if(e=="number"||e=="boolean"||r==null)return`${r}`;if(e=="string")return`"${r}"`;if(e=="symbol"){const i=r.description;return i==null?"Symbol":`Symbol(${i})`}if(e=="function"){const i=r.name;return typeof i=="string"&&i.length>0?`Function(${i})`:"Function"}if(Array.isArray(r)){const i=r.length;let o="[";i>0&&(o+=be(r[0]));for(let d=1;d<i;d++)o+=", "+be(r[d]);return o+="]",o}const t=/\[object ([^\]]+)\]/.exec(toString.call(r));let n;if(t&&t.length>1)n=t[1];else return toString.call(r);if(n=="Object")try{return"Object("+JSON.stringify(r)+")"}catch{return"Object"}return r instanceof Error?`${r.name}: ${r.message}
${r.stack}`:n}function I(r){const e=s.__externref_table_alloc();return s.__wbindgen_externrefs.set(e,r),e}function f(r,e){try{return r.apply(this,e)}catch(t){const n=I(t);s.__wbindgen_exn_store(n)}}function U(r,e){return r=r>>>0,F().subarray(r/1,r/1+e)}function G(r,e){r=r>>>0;const t=R(),n=[];for(let i=r;i<r+4*e;i+=4)n.push(s.__wbindgen_externrefs.get(t.getUint32(i,!0)));return s.__externref_drop_slice(r,e),n}const he=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(r=>r.dtor(r.a,r.b));function oe(r,e,t,n){const i={a:r,b:e,cnt:1,dtor:t},o=(...d)=>{i.cnt++;const a=i.a;i.a=0;try{return n(a,i.b,...d)}finally{i.a=a,o._wbg_cb_unref()}};return o._wbg_cb_unref=()=>{--i.cnt===0&&(i.dtor(i.a,i.b),i.a=0,he.unregister(i))},he.register(o,i,i),o}function T(r,e){const t=e(r.length*4,4)>>>0;for(let n=0;n<r.length;n++){const i=I(r[n]);R().setUint32(t+4*n,i,!0)}return l=r.length,t}function w(r){const e=s.__wbindgen_externrefs.get(r);return s.__externref_table_dealloc(r),e}function X(r,e){if(!(r instanceof e))throw new Error(`expected instance of ${e.name}`)}function Ce(r,e){let t,n;try{const d=s.generateInboxId(r,!g(e),g(e)?BigInt(0):e);var i=d[0],o=d[1];if(d[3])throw i=0,o=0,w(d[2]);return t=i,n=o,p(i,o)}finally{s.__wbindgen_free(t,n,1)}}function We(r,e,t,n){const i=m(r,s.__wbindgen_malloc,s.__wbindgen_realloc),o=l;var d=g(e)?0:m(e,s.__wbindgen_malloc,s.__wbindgen_realloc),a=l;return s.getInboxIdForIdentifier(i,o,d,a,t,n)}function Pe(r,e,t){const n=m(r,s.__wbindgen_malloc,s.__wbindgen_realloc),i=l,o=s.verifySignedWithPublicKey(n,i,e,t);if(o[1])throw w(o[0])}function Ee(r,e,t,n,i,o,d,a,_,h,y,x,$,ae,_e){const ue=m(r,s.__wbindgen_malloc,s.__wbindgen_realloc),de=l,ut=m(e,s.__wbindgen_malloc,s.__wbindgen_realloc),dt=l;var gt=g(n)?0:m(n,s.__wbindgen_malloc,s.__wbindgen_realloc),bt=l,lt=g(o)?0:m(o,s.__wbindgen_malloc,s.__wbindgen_realloc),wt=l,ft=g(h)?0:m(h,s.__wbindgen_malloc,s.__wbindgen_realloc),pt=l,mt=g(y)?0:m(y,s.__wbindgen_malloc,s.__wbindgen_realloc),ht=l;let De=0;return g(ae)||(X(ae,le),De=ae.__destroy_into_raw()),s.createClient(ue,de,ut,dt,t,gt,bt,g(i)?0:I(i),lt,wt,g(d)?2:d,g(a)?0:I(a),g(_)?16777215:0,ft,pt,mt,ht,!g(x),g(x)?BigInt(0):x,g($)?0:I($),De,g(_e)?2:_e)}function Ge(r,e,t){s.wasm_bindgen__convert__closures_____invoke__hdff293b41f2cecc6(r,e,t)}function Le(r,e){s.wasm_bindgen__convert__closures_____invoke__hceddd2b8fc291040(r,e)}function ze(r,e){s.wasm_bindgen__convert__closures_____invoke__h6af3cd86eb56f4b1(r,e)}function Ue(r,e){s.wasm_bindgen__convert__closures_____invoke__h956b60152b2cf005(r,e)}function je(r,e,t,n){s.wasm_bindgen__convert__closures_____invoke__h47a8fb56fc48c5fb(r,e,t,n)}const ce=Object.freeze({Dm:0,0:"Dm",Group:1,1:"Group",Sync:2,2:"Sync",Oneshot:3,3:"Oneshot"}),ye=Object.freeze({Enabled:0,0:"Enabled",Disabled:1,1:"Disabled"}),Ke=Object.freeze({Allowed:0,0:"Allowed",Rejected:1,1:"Rejected",Pending:2,2:"Pending",Restored:3,3:"Restored",PendingRemove:4,4:"PendingRemove"}),Ne=Object.freeze({Off:0,0:"Off",Error:1,1:"Error",Warn:2,2:"Warn",Info:3,3:"Info",Debug:4,4:"Debug",Trace:5,5:"Trace"}),Ve=Object.freeze({Ascending:0,0:"Ascending",Descending:1,1:"Descending"}),He=["","no-referrer","no-referrer-when-downgrade","origin","origin-when-cross-origin","unsafe-url","same-origin","strict-origin","strict-origin-when-cross-origin"],$e=["default","no-store","reload","no-cache","force-cache","only-if-cached"],Je=["omit","same-origin","include"],Ye=["same-origin","no-cors","cors","navigate"],Xe=["follow","error","manual"],ve=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(r=>s.__wbg_authhandle_free(r>>>0,1));class le{__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,ve.unregister(this),e}free(){const e=this.__destroy_into_raw();s.__wbg_authhandle_free(e,0)}id(){return s.authhandle_id(this.__wbg_ptr)>>>0}constructor(){const e=s.authhandle_new();return this.__wbg_ptr=e>>>0,ve.register(this,this.__wbg_ptr,this),this}set(e){return s.authhandle_set(this.__wbg_ptr,e)}}Symbol.dispose&&(le.prototype[Symbol.dispose]=le.prototype.free);const Ie=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(r=>s.__wbg_client_free(r>>>0,1));class Q{static __wrap(e){e=e>>>0;const t=Object.create(Q.prototype);return t.__wbg_ptr=e,Ie.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,Ie.unregister(this),e}free(){const e=this.__destroy_into_raw();s.__wbg_client_free(e,0)}inboxState(e){return s.client_inboxState(this.__wbg_ptr,e)}getLatestInboxState(e){const t=m(e,s.__wbindgen_malloc,s.__wbindgen_realloc),n=l;return s.client_getLatestInboxState(this.__wbg_ptr,t,n)}getKeyPackageStatusesForInstallationIds(e){const t=T(e,s.__wbindgen_malloc),n=l;return s.client_getKeyPackageStatusesForInstallationIds(this.__wbg_ptr,t,n)}getConsentState(e,t){const n=m(t,s.__wbindgen_malloc,s.__wbindgen_realloc),i=l;return s.client_getConsentState(this.__wbg_ptr,e,n,i)}setConsentStates(e){const t=T(e,s.__wbindgen_malloc),n=l;return s.client_setConsentStates(this.__wbg_ptr,t,n)}registerIdentity(e){X(e,j);var t=e.__destroy_into_raw();return s.client_registerIdentity(this.__wbg_ptr,t)}applySignatureRequest(e){return X(e,j),s.client_applySignatureRequest(this.__wbg_ptr,e.__wbg_ptr)}signWithInstallationKey(e){const t=m(e,s.__wbindgen_malloc,s.__wbindgen_realloc),n=l,i=s.client_signWithInstallationKey(this.__wbg_ptr,t,n);if(i[2])throw w(i[1]);return w(i[0])}createInboxSignatureRequest(){const e=s.client_createInboxSignatureRequest(this.__wbg_ptr);if(e[2])throw w(e[1]);return e[0]===0?void 0:j.__wrap(e[0])}addWalletSignatureRequest(e){return s.client_addWalletSignatureRequest(this.__wbg_ptr,e)}revokeWalletSignatureRequest(e){return s.client_revokeWalletSignatureRequest(this.__wbg_ptr,e)}verifySignedWithInstallationKey(e,t){const n=m(e,s.__wbindgen_malloc,s.__wbindgen_realloc),i=l,o=s.client_verifySignedWithInstallationKey(this.__wbg_ptr,n,i,t);if(o[1])throw w(o[0])}revokeInstallationsSignatureRequest(e){const t=T(e,s.__wbindgen_malloc),n=l;return s.client_revokeInstallationsSignatureRequest(this.__wbg_ptr,t,n)}changeRecoveryIdentifierSignatureRequest(e){return s.client_changeRecoveryIdentifierSignatureRequest(this.__wbg_ptr,e)}revokeAllOtherInstallationsSignatureRequest(){return s.client_revokeAllOtherInstallationsSignatureRequest(this.__wbg_ptr)}get appVersion(){let e,t;try{const n=s.client_appVersion(this.__wbg_ptr);return e=n[0],t=n[1],p(n[0],n[1])}finally{s.__wbindgen_free(e,t,1)}}canMessage(e){const t=T(e,s.__wbindgen_malloc),n=l;return s.client_canMessage(this.__wbg_ptr,t,n)}conversations(){const e=s.client_conversations(this.__wbg_ptr);return ee.__wrap(e)}get isRegistered(){return s.client_isRegistered(this.__wbg_ptr)!==0}apiStatistics(){return s.client_apiStatistics(this.__wbg_ptr)}get installationId(){let e,t;try{const n=s.client_installationId(this.__wbg_ptr);return e=n[0],t=n[1],p(n[0],n[1])}finally{s.__wbindgen_free(e,t,1)}}get libxmtpVersion(){let e,t;try{const n=s.client_libxmtpVersion(this.__wbg_ptr);return e=n[0],t=n[1],p(n[0],n[1])}finally{s.__wbindgen_free(e,t,1)}}syncPreferences(){return s.client_syncPreferences(this.__wbg_ptr)}sendSyncRequest(){return s.client_sendSyncRequest(this.__wbg_ptr)}get accountIdentifier(){return s.client_accountIdentifier(this.__wbg_ptr)}clearAllStatistics(){s.client_clearAllStatistics(this.__wbg_ptr)}get installationIdBytes(){return s.client_installationIdBytes(this.__wbg_ptr)}apiIdentityStatistics(){return s.client_apiIdentityStatistics(this.__wbg_ptr)}apiAggregateStatistics(){let e,t;try{const n=s.client_apiAggregateStatistics(this.__wbg_ptr);return e=n[0],t=n[1],p(n[0],n[1])}finally{s.__wbindgen_free(e,t,1)}}inboxStateFromInboxIds(e,t){const n=T(e,s.__wbindgen_malloc),i=l;return s.client_inboxStateFromInboxIds(this.__wbg_ptr,n,i,t)}findInboxIdByIdentifier(e){return s.client_findInboxIdByIdentifier(this.__wbg_ptr,e)}get inboxId(){let e,t;try{const n=s.client_inboxId(this.__wbg_ptr);return e=n[0],t=n[1],p(n[0],n[1])}finally{s.__wbindgen_free(e,t,1)}}}Symbol.dispose&&(Q.prototype[Symbol.dispose]=Q.prototype.free);const Se=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(r=>s.__wbg_conversation_free(r>>>0,1));class O{static __wrap(e){e=e>>>0;const t=Object.create(O.prototype);return t.__wbg_ptr=e,Se.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,Se.unregister(this),e}free(){const e=this.__destroy_into_raw();s.__wbg_conversation_free(e,0)}adminList(){const e=s.conversation_adminList(this.__wbg_ptr);if(e[3])throw w(e[2]);var t=G(e[0],e[1]).slice();return s.__wbindgen_free(e[0],e[1]*4,4),t}getDebugInfo(){return s.conversation_getDebugInfo(this.__wbg_ptr)}groupName(){let e,t;try{const o=s.conversation_groupName(this.__wbg_ptr);var n=o[0],i=o[1];if(o[3])throw n=0,i=0,w(o[2]);return e=n,t=i,p(n,i)}finally{s.__wbindgen_free(e,t,1)}}sendReply(e,t){return s.conversation_sendReply(this.__wbg_ptr,e,g(t)?16777215:t?1:0)}addMembers(e){const t=T(e,s.__wbindgen_malloc),n=l;return s.conversation_addMembers(this.__wbg_ptr,t,n)}leaveGroup(){return s.conversation_leaveGroup(this.__wbg_ptr)}sendIntent(e,t){return s.conversation_sendIntent(this.__wbg_ptr,e,g(t)?16777215:t?1:0)}listMembers(){return s.conversation_listMembers(this.__wbg_ptr)}removeAdmin(e){const t=m(e,s.__wbindgen_malloc,s.__wbindgen_realloc),n=l;return s.conversation_removeAdmin(this.__wbg_ptr,t,n)}sendActions(e,t){return s.conversation_sendActions(this.__wbg_ptr,e,g(t)?16777215:t?1:0)}createdAtNs(){return s.conversation_createdAtNs(this.__wbg_ptr)}findMessages(e){return s.conversation_findMessages(this.__wbg_ptr,g(e)?0:I(e))}getHmacKeys(){const e=s.conversation_getHmacKeys(this.__wbg_ptr);if(e[2])throw w(e[1]);return w(e[0])}sendMarkdown(e,t){const n=m(e,s.__wbindgen_malloc,s.__wbindgen_realloc),i=l;return s.conversation_sendMarkdown(this.__wbg_ptr,n,i,g(t)?16777215:t?1:0)}sendReaction(e,t){return s.conversation_sendReaction(this.__wbg_ptr,e,g(t)?16777215:t?1:0)}countMessages(e){return s.conversation_countMessages(this.__wbg_ptr,g(e)?0:I(e))}groupMetadata(){return s.conversation_groupMetadata(this.__wbg_ptr)}isSuperAdmin(e){const t=m(e,s.__wbindgen_malloc,s.__wbindgen_realloc),n=l,i=s.conversation_isSuperAdmin(this.__wbg_ptr,t,n);if(i[2])throw w(i[1]);return i[0]!==0}removeMembers(e){const t=T(e,s.__wbindgen_malloc),n=l;return s.conversation_removeMembers(this.__wbg_ptr,t,n)}addSuperAdmin(e){const t=m(e,s.__wbindgen_malloc,s.__wbindgen_realloc),n=l;return s.conversation_addSuperAdmin(this.__wbg_ptr,t,n)}sendAttachment(e,t){return s.conversation_sendAttachment(this.__wbg_ptr,e,g(t)?16777215:t?1:0)}sendOptimistic(e,t){let n,i;try{const a=s.conversation_sendOptimistic(this.__wbg_ptr,e,t);var o=a[0],d=a[1];if(a[3])throw o=0,d=0,w(a[2]);return n=o,i=d,p(o,d)}finally{s.__wbindgen_free(n,i,1)}}updateAppData(e){const t=m(e,s.__wbindgen_malloc,s.__wbindgen_realloc),n=l;return s.conversation_updateAppData(this.__wbg_ptr,t,n)}dmPeerInboxId(){let e,t;try{const o=s.conversation_dmPeerInboxId(this.__wbg_ptr);var n=o[0],i=o[1];if(o[3])throw n=0,i=0,w(o[2]);return e=n,t=i,p(n,i)}finally{s.__wbindgen_free(e,t,1)}}membershipState(){const e=s.conversation_membershipState(this.__wbg_ptr);if(e[2])throw w(e[1]);return e[0]}publishMessages(){return s.conversation_publishMessages(this.__wbg_ptr)}superAdminList(){const e=s.conversation_superAdminList(this.__wbg_ptr);if(e[3])throw w(e[2]);var t=G(e[0],e[1]).slice();return s.__wbindgen_free(e[0],e[1]*4,4),t}addedByInboxId(){let e,t;try{const o=s.conversation_addedByInboxId(this.__wbg_ptr);var n=o[0],i=o[1];if(o[3])throw n=0,i=0,w(o[2]);return e=n,t=i,p(n,i)}finally{s.__wbindgen_free(e,t,1)}}groupDescription(){let e,t;try{const o=s.conversation_groupDescription(this.__wbg_ptr);var n=o[0],i=o[1];if(o[3])throw n=0,i=0,w(o[2]);return e=n,t=i,p(n,i)}finally{s.__wbindgen_free(e,t,1)}}groupPermissions(){const e=s.conversation_groupPermissions(this.__wbg_ptr);if(e[2])throw w(e[1]);return w(e[0])}sendReadReceipt(e){return s.conversation_sendReadReceipt(this.__wbg_ptr,g(e)?16777215:e?1:0)}updateGroupName(e){const t=m(e,s.__wbindgen_malloc,s.__wbindgen_realloc),n=l;return s.conversation_updateGroupName(this.__wbg_ptr,t,n)}findDuplicateDms(){return s.conversation_findDuplicateDms(this.__wbg_ptr)}pausedForVersion(){const e=s.conversation_pausedForVersion(this.__wbg_ptr);if(e[3])throw w(e[2]);let t;return e[0]!==0&&(t=p(e[0],e[1]).slice(),s.__wbindgen_free(e[0],e[1]*1,1)),t}removeSuperAdmin(e){const t=m(e,s.__wbindgen_malloc,s.__wbindgen_realloc),n=l;return s.conversation_removeSuperAdmin(this.__wbg_ptr,t,n)}getLastReadTimes(){return s.conversation_getLastReadTimes(this.__wbg_ptr)}findEnrichedMessages(e){return s.conversation_findEnrichedMessages(this.__wbg_ptr,g(e)?0:I(e))}groupImageUrlSquare(){let e,t;try{const o=s.conversation_groupImageUrlSquare(this.__wbg_ptr);var n=o[0],i=o[1];if(o[3])throw n=0,i=0,w(o[2]);return e=n,t=i,p(n,i)}finally{s.__wbindgen_free(e,t,1)}}sendRemoteAttachment(e,t){return s.conversation_sendRemoteAttachment(this.__wbg_ptr,e,g(t)?16777215:t?1:0)}sendWalletSendCalls(e,t){return s.conversation_sendWalletSendCalls(this.__wbg_ptr,e,g(t)?16777215:t?1:0)}addMembersByInboxId(e){const t=T(e,s.__wbindgen_malloc),n=l;return s.conversation_addMembersByInboxId(this.__wbg_ptr,t,n)}updateGroupDescription(e){const t=m(e,s.__wbindgen_malloc,s.__wbindgen_realloc),n=l;return s.conversation_updateGroupDescription(this.__wbg_ptr,t,n)}updatePermissionPolicy(e,t,n){return s.conversation_updatePermissionPolicy(this.__wbg_ptr,e,t,g(n)?6:n)}removeMembersByInboxId(e){const t=T(e,s.__wbindgen_malloc),n=l;return s.conversation_removeMembersByInboxId(this.__wbg_ptr,t,n)}sendTransactionReference(e,t){return s.conversation_sendTransactionReference(this.__wbg_ptr,e,g(t)?16777215:t?1:0)}findMessagesWithReactions(e){return s.conversation_findMessagesWithReactions(this.__wbg_ptr,g(e)?0:I(e))}sendMultiRemoteAttachment(e,t){return s.conversation_sendMultiRemoteAttachment(this.__wbg_ptr,e,g(t)?16777215:t?1:0)}messageDisappearingSettings(){const e=s.conversation_messageDisappearingSettings(this.__wbg_ptr);if(e[2])throw w(e[1]);return w(e[0])}updateGroupImageUrlSquare(e){const t=m(e,s.__wbindgen_malloc,s.__wbindgen_realloc),n=l;return s.conversation_updateGroupImageUrlSquare(this.__wbg_ptr,t,n)}id(){let e,t;try{const n=s.conversation_id(this.__wbg_ptr);return e=n[0],t=n[1],p(n[0],n[1])}finally{s.__wbindgen_free(e,t,1)}}processStreamedGroupMessage(e){return s.conversation_processStreamedGroupMessage(this.__wbg_ptr,e)}isMessageDisappearingEnabled(){const e=s.conversation_isMessageDisappearingEnabled(this.__wbg_ptr);if(e[2])throw w(e[1]);return e[0]!==0}removeMessageDisappearingSettings(){return s.conversation_removeMessageDisappearingSettings(this.__wbg_ptr)}updateMessageDisappearingSettings(e){return s.conversation_updateMessageDisappearingSettings(this.__wbg_ptr,e)}send(e,t){return s.conversation_send(this.__wbg_ptr,e,t)}sync(){return s.conversation_sync(this.__wbg_ptr)}stream(e){const t=s.conversation_stream(this.__wbg_ptr,e);if(t[2])throw w(t[1]);return E.__wrap(t[0])}appData(){let e,t;try{const o=s.conversation_appData(this.__wbg_ptr);var n=o[0],i=o[1];if(o[3])throw n=0,i=0,w(o[2]);return e=n,t=i,p(n,i)}finally{s.__wbindgen_free(e,t,1)}}isAdmin(e){const t=m(e,s.__wbindgen_malloc,s.__wbindgen_realloc),n=l,i=s.conversation_isAdmin(this.__wbg_ptr,t,n);if(i[2])throw w(i[1]);return i[0]!==0}addAdmin(e){const t=m(e,s.__wbindgen_malloc,s.__wbindgen_realloc),n=l;return s.conversation_addAdmin(this.__wbg_ptr,t,n)}isActive(){const e=s.conversation_isActive(this.__wbg_ptr);if(e[2])throw w(e[1]);return e[0]!==0}sendText(e,t){const n=m(e,s.__wbindgen_malloc,s.__wbindgen_realloc),i=l;return s.conversation_sendText(this.__wbg_ptr,n,i,g(t)?16777215:t?1:0)}consentState(){const e=s.conversation_consentState(this.__wbg_ptr);if(e[2])throw w(e[1]);return e[0]}updateConsentState(e){const t=s.conversation_updateConsentState(this.__wbg_ptr,e);if(t[1])throw w(t[0])}}Symbol.dispose&&(O.prototype[Symbol.dispose]=O.prototype.free);const we=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(r=>s.__wbg_conversationlistitem_free(r>>>0,1));class Z{static __wrap(e){e=e>>>0;const t=Object.create(Z.prototype);return t.__wbg_ptr=e,we.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,we.unregister(this),e}free(){const e=this.__destroy_into_raw();s.__wbg_conversationlistitem_free(e,0)}get conversation(){const e=s.__wbg_get_conversationlistitem_conversation(this.__wbg_ptr);return O.__wrap(e)}set conversation(e){X(e,O);var t=e.__destroy_into_raw();s.__wbg_set_conversationlistitem_conversation(this.__wbg_ptr,t)}get lastMessage(){return s.__wbg_get_conversationlistitem_lastMessage(this.__wbg_ptr)}set lastMessage(e){s.__wbg_set_conversationlistitem_lastMessage(this.__wbg_ptr,g(e)?0:I(e))}get isCommitLogForked(){const e=s.__wbg_get_conversationlistitem_isCommitLogForked(this.__wbg_ptr);return e===16777215?void 0:e!==0}set isCommitLogForked(e){s.__wbg_set_conversationlistitem_isCommitLogForked(this.__wbg_ptr,g(e)?16777215:e?1:0)}constructor(e,t,n){X(e,O);var i=e.__destroy_into_raw();const o=s.conversationlistitem_new(i,g(t)?0:I(t),g(n)?16777215:n?1:0);return this.__wbg_ptr=o>>>0,we.register(this,this.__wbg_ptr,this),this}}Symbol.dispose&&(Z.prototype[Symbol.dispose]=Z.prototype.free);const Re=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(r=>s.__wbg_conversations_free(r>>>0,1));class ee{static __wrap(e){e=e>>>0;const t=Object.create(ee.prototype);return t.__wbg_ptr=e,Re.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,Re.unregister(this),e}free(){const e=this.__destroy_into_raw();s.__wbg_conversations_free(e,0)}createGroup(e,t){const n=T(e,s.__wbindgen_malloc),i=l;return s.conversations_createGroup(this.__wbg_ptr,n,i,g(t)?0:I(t))}getHmacKeys(){const e=s.conversations_getHmacKeys(this.__wbg_ptr);if(e[2])throw w(e[1]);return w(e[0])}streamConsent(e){const t=s.conversations_streamConsent(this.__wbg_ptr,e);if(t[2])throw w(t[1]);return E.__wrap(t[0])}findGroupById(e){const t=m(e,s.__wbindgen_malloc,s.__wbindgen_realloc),n=l,i=s.conversations_findGroupById(this.__wbg_ptr,t,n);if(i[2])throw w(i[1]);return O.__wrap(i[0])}createDm(e,t){return s.conversations_createDm(this.__wbg_ptr,e,g(t)?0:I(t))}findMessageById(e){const t=m(e,s.__wbindgen_malloc,s.__wbindgen_realloc),n=l,i=s.conversations_findMessageById(this.__wbg_ptr,t,n);if(i[2])throw w(i[1]);return w(i[0])}streamPreferences(e){const t=s.conversations_streamPreferences(this.__wbg_ptr,e);if(t[2])throw w(t[1]);return E.__wrap(t[0])}streamAllMessages(e,t,n){var i=g(n)?0:T(n,s.__wbindgen_malloc),o=l;const d=s.conversations_streamAllMessages(this.__wbg_ptr,e,g(t)?4:t,i,o);if(d[2])throw w(d[1]);return E.__wrap(d[0])}deleteMessageById(e){const t=m(e,s.__wbindgen_malloc,s.__wbindgen_realloc),n=l,i=s.conversations_deleteMessageById(this.__wbg_ptr,t,n);if(i[2])throw w(i[1]);return i[0]>>>0}syncAllConversations(e){var t=g(e)?0:T(e,s.__wbindgen_malloc),n=l;return s.conversations_syncAllConversations(this.__wbg_ptr,t,n)}createGroupOptimistic(e){const t=s.conversations_createGroupOptimistic(this.__wbg_ptr,g(e)?0:I(e));if(t[2])throw w(t[1]);return O.__wrap(t[0])}streamMessageDeletions(e){const t=s.conversations_streamMessageDeletions(this.__wbg_ptr,e);if(t[2])throw w(t[1]);return E.__wrap(t[0])}createGroupByInboxIds(e,t){const n=T(e,s.__wbindgen_malloc),i=l;return s.conversations_createGroupByInboxIds(this.__wbg_ptr,n,i,g(t)?0:I(t))}findDmByTargetInboxId(e){const t=m(e,s.__wbindgen_malloc,s.__wbindgen_realloc),n=l,i=s.conversations_findDmByTargetInboxId(this.__wbg_ptr,t,n);if(i[2])throw w(i[1]);return O.__wrap(i[0])}streamLocal(e){return s.conversations_streamLocal(this.__wbg_ptr,g(e)?4:e)}findEnrichedMessageById(e){const t=m(e,s.__wbindgen_malloc,s.__wbindgen_realloc),n=l;return s.conversations_findEnrichedMessageById(this.__wbg_ptr,t,n)}createDmByInboxId(e,t){const n=m(e,s.__wbindgen_malloc,s.__wbindgen_realloc),i=l;return s.conversations_createDmByInboxId(this.__wbg_ptr,n,i,g(t)?0:I(t))}list(e){const t=s.conversations_list(this.__wbg_ptr,g(e)?0:I(e));if(t[2])throw w(t[1]);return w(t[0])}sync(){return s.conversations_sync(this.__wbg_ptr)}stream(e,t){const n=s.conversations_stream(this.__wbg_ptr,e,g(t)?4:t);if(n[2])throw w(n[1]);return E.__wrap(n[0])}}Symbol.dispose&&(ee.prototype[Symbol.dispose]=ee.prototype.free),typeof FinalizationRegistry>"u"||new FinalizationRegistry(r=>s.__wbg_intounderlyingbytesource_free(r>>>0,1)),typeof FinalizationRegistry>"u"||new FinalizationRegistry(r=>s.__wbg_intounderlyingsink_free(r>>>0,1));const Ae=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(r=>s.__wbg_intounderlyingsource_free(r>>>0,1));class te{static __wrap(e){e=e>>>0;const t=Object.create(te.prototype);return t.__wbg_ptr=e,Ae.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,Ae.unregister(this),e}free(){const e=this.__destroy_into_raw();s.__wbg_intounderlyingsource_free(e,0)}pull(e){return s.intounderlyingsource_pull(this.__wbg_ptr,e)}cancel(){const e=this.__destroy_into_raw();s.intounderlyingsource_cancel(e)}}Symbol.dispose&&(te.prototype[Symbol.dispose]=te.prototype.free);const ke=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(r=>s.__wbg_signaturerequesthandle_free(r>>>0,1));class j{static __wrap(e){e=e>>>0;const t=Object.create(j.prototype);return t.__wbg_ptr=e,ke.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,ke.unregister(this),e}free(){const e=this.__destroy_into_raw();s.__wbg_signaturerequesthandle_free(e,0)}signatureText(){return s.signaturerequesthandle_signatureText(this.__wbg_ptr)}addScwSignature(e,t,n,i){return s.signaturerequesthandle_addScwSignature(this.__wbg_ptr,e,t,n,!g(i),g(i)?BigInt(0):i)}addEcdsaSignature(e){return s.signaturerequesthandle_addEcdsaSignature(this.__wbg_ptr,e)}addPasskeySignature(e){return s.signaturerequesthandle_addPasskeySignature(this.__wbg_ptr,e)}}Symbol.dispose&&(j.prototype[Symbol.dispose]=j.prototype.free);const Fe=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(r=>s.__wbg_streamcloser_free(r>>>0,1));class E{static __wrap(e){e=e>>>0;const t=Object.create(E.prototype);return t.__wbg_ptr=e,Fe.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,Fe.unregister(this),e}free(){const e=this.__destroy_into_raw();s.__wbg_streamcloser_free(e,0)}endAndWait(){return s.streamcloser_endAndWait(this.__wbg_ptr)}waitForReady(){return s.streamcloser_waitForReady(this.__wbg_ptr)}end(){s.streamcloser_end(this.__wbg_ptr)}isClosed(){return s.streamcloser_isClosed(this.__wbg_ptr)!==0}}Symbol.dispose&&(E.prototype[Symbol.dispose]=E.prototype.free);const Qe=new Set(["basic","cors","default"]);async function Ze(r,e){if(typeof Response=="function"&&r instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(r,e)}catch(n){if(r.ok&&Qe.has(r.type)&&r.headers.get("Content-Type")!=="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",n);else throw n}const t=await r.arrayBuffer();return await WebAssembly.instantiate(t,e)}else{const t=await WebAssembly.instantiate(r,e);return t instanceof WebAssembly.Instance?{instance:t,module:r}:t}}function et(){const r={};return r.wbg={},r.wbg.__wbg_Error_e83987f665cf5504=function(e,t){return Error(p(e,t))},r.wbg.__wbg_Number_bb48ca12f395cd08=function(e){return Number(e)},r.wbg.__wbg_String_8f0eb39a4a4c2f66=function(e,t){const n=String(t),i=m(n,s.__wbindgen_malloc,s.__wbindgen_realloc),o=l;R().setInt32(e+4,o,!0),R().setInt32(e+0,i,!0)},r.wbg.__wbg___wbindgen_bigint_get_as_i64_f3ebc5a755000afd=function(e,t){const n=t,i=typeof n=="bigint"?n:void 0;R().setBigInt64(e+8,g(i)?BigInt(0):i,!0),R().setInt32(e+0,!g(i),!0)},r.wbg.__wbg___wbindgen_boolean_get_6d5a1ee65bab5f68=function(e){const t=e,n=typeof t=="boolean"?t:void 0;return g(n)?16777215:n?1:0},r.wbg.__wbg___wbindgen_debug_string_df47ffb5e35e6763=function(e,t){const n=be(t),i=m(n,s.__wbindgen_malloc,s.__wbindgen_realloc),o=l;R().setInt32(e+4,o,!0),R().setInt32(e+0,i,!0)},r.wbg.__wbg___wbindgen_in_bb933bd9e1b3bc0f=function(e,t){return e in t},r.wbg.__wbg___wbindgen_is_bigint_cb320707dcd35f0b=function(e){return typeof e=="bigint"},r.wbg.__wbg___wbindgen_is_function_ee8a6c5833c90377=function(e){return typeof e=="function"},r.wbg.__wbg___wbindgen_is_object_c818261d21f283a4=function(e){const t=e;return typeof t=="object"&&t!==null},r.wbg.__wbg___wbindgen_is_string_fbb76cb2940daafd=function(e){return typeof e=="string"},r.wbg.__wbg___wbindgen_is_undefined_2d472862bd29a478=function(e){return e===void 0},r.wbg.__wbg___wbindgen_jsval_eq_6b13ab83478b1c50=function(e,t){return e===t},r.wbg.__wbg___wbindgen_jsval_loose_eq_b664b38a2f582147=function(e,t){return e==t},r.wbg.__wbg___wbindgen_number_get_a20bf9b85341449d=function(e,t){const n=t,i=typeof n=="number"?n:void 0;R().setFloat64(e+8,g(i)?0:i,!0),R().setInt32(e+0,!g(i),!0)},r.wbg.__wbg___wbindgen_string_get_e4f06c90489ad01b=function(e,t){const n=t,i=typeof n=="string"?n:void 0;var o=g(i)?0:m(i,s.__wbindgen_malloc,s.__wbindgen_realloc),d=l;R().setInt32(e+4,d,!0),R().setInt32(e+0,o,!0)},r.wbg.__wbg___wbindgen_throw_b855445ff6a94295=function(e,t){throw new Error(p(e,t))},r.wbg.__wbg___wbindgen_try_into_number_e60ef6e208abc399=function(e){let t;try{t=+e}catch(i){t=i}return t},r.wbg.__wbg__wbg_cb_unref_2454a539ea5790d9=function(e){e._wbg_cb_unref()},r.wbg.__wbg_abort_28ad55c5825b004d=function(e,t){e.abort(t)},r.wbg.__wbg_abort_e7eb059f72f9ed0c=function(e){e.abort()},r.wbg.__wbg_append_b577eb3a177bc0fa=function(){return f(function(e,t,n,i,o){e.append(p(t,n),p(i,o))},arguments)},r.wbg.__wbg_arrayBuffer_b375eccb84b4ddf3=function(){return f(function(e){return e.arrayBuffer()},arguments)},r.wbg.__wbg_body_587542b2fd8e06c0=function(e){const t=e.body;return g(t)?0:I(t)},r.wbg.__wbg_buffer_ccc4520b36d3ccf4=function(e){return e.buffer},r.wbg.__wbg_byobRequest_2344e6975f27456e=function(e){const t=e.byobRequest;return g(t)?0:I(t)},r.wbg.__wbg_byteLength_bcd42e4025299788=function(e){return e.byteLength},r.wbg.__wbg_byteOffset_ca3a6cf7944b364b=function(e){return e.byteOffset},r.wbg.__wbg_call_525440f72fbfc0ea=function(){return f(function(e,t,n){return e.call(t,n)},arguments)},r.wbg.__wbg_call_e762c39fa8ea36bf=function(){return f(function(e,t){return e.call(t)},arguments)},r.wbg.__wbg_cancel_48ab6f9dc366e369=function(e){return e.cancel()},r.wbg.__wbg_catch_943836faa5d29bfb=function(e,t){return e.catch(t)},r.wbg.__wbg_clearInterval_dd1e598f425db353=function(e){return clearInterval(e)},r.wbg.__wbg_clearTimeout_2e2c4939388cdfbb=function(e){return clearTimeout(e)},r.wbg.__wbg_clearTimeout_5a54f8841c30079a=function(e){return clearTimeout(e)},r.wbg.__wbg_clearTimeout_7a42b49784aea641=function(e){return clearTimeout(e)},r.wbg.__wbg_client_new=function(e){return Q.__wrap(e)},r.wbg.__wbg_close_5a6caed3231b68cd=function(){return f(function(e){e.close()},arguments)},r.wbg.__wbg_close_6956df845478561a=function(){return f(function(e){e.close()},arguments)},r.wbg.__wbg_close_6b987dbb02427741=function(e){e.close()},r.wbg.__wbg_code_218f5fdf8c7fcabd=function(e){return e.code},r.wbg.__wbg_conversation_new=function(e){return O.__wrap(e)},r.wbg.__wbg_conversationlistitem_new=function(e){return Z.__wrap(e)},r.wbg.__wbg_createSyncAccessHandle_63bd856e74273e32=function(e){return e.createSyncAccessHandle()},r.wbg.__wbg_create_f2b6bfa66a83e88e=function(e){return Object.create(e)},r.wbg.__wbg_crypto_574e78ad8b13b65f=function(e){return e.crypto},r.wbg.__wbg_debug_e55e1461940eb14d=function(e,t,n,i){console.debug(e,t,n,i)},r.wbg.__wbg_debug_f4b0c59db649db48=function(e){console.debug(e)},r.wbg.__wbg_done_2042aa2670fb1db1=function(e){return e.done},r.wbg.__wbg_enqueue_7b18a650aec77898=function(){return f(function(e,t){e.enqueue(t)},arguments)},r.wbg.__wbg_entries_a1e792d46512c8bf=function(e){return e.entries()},r.wbg.__wbg_entries_e171b586f8f6bdbf=function(e){return Object.entries(e)},r.wbg.__wbg_error_7534b8e9a36f1ab4=function(e,t){let n,i;try{n=e,i=t,console.error(p(e,t))}finally{s.__wbindgen_free(n,i,1)}},r.wbg.__wbg_error_a7f8fbb0523dae15=function(e){console.error(e)},r.wbg.__wbg_error_d8b22cf4e59a6791=function(e,t,n,i){console.error(e,t,n,i)},r.wbg.__wbg_error_e98c298703cffa97=function(e,t){console.error(p(e,t))},r.wbg.__wbg_fetch_53eef7df7b439a49=function(e,t){return fetch(e,t)},r.wbg.__wbg_fetch_74a3e84ebd2c9a0e=function(e){return fetch(e)},r.wbg.__wbg_fetch_8725865ff47e7fcc=function(e,t,n){return e.fetch(t,n)},r.wbg.__wbg_fetch_f8ba0e29a9d6de0d=function(e,t){return e.fetch(t)},r.wbg.__wbg_fill_f6f1b48c9e4bb626=function(e,t,n,i){return e.fill(t,n>>>0,i>>>0)},r.wbg.__wbg_flush_b49c3916f841ba87=function(){return f(function(e){e.flush()},arguments)},r.wbg.__wbg_from_a4ad7cbddd0d7135=function(e){return Array.from(e)},r.wbg.__wbg_getDate_5a70d2f6a482d99f=function(e){return e.getDate()},r.wbg.__wbg_getDay_a150a3fd757619d1=function(e){return e.getDay()},r.wbg.__wbg_getDirectoryHandle_45b9305ebb42f05a=function(e,t,n,i){return e.getDirectoryHandle(p(t,n),i)},r.wbg.__wbg_getDirectory_7e7a55f640412401=function(e){return e.getDirectory()},r.wbg.__wbg_getFileHandle_acd9b5e4404b60dd=function(e,t,n,i){return e.getFileHandle(p(t,n),i)},r.wbg.__wbg_getFullYear_8240d5a15191feae=function(e){return e.getFullYear()},r.wbg.__wbg_getHours_5e476e0b9ebc42d1=function(e){return e.getHours()},r.wbg.__wbg_getMinutes_c95dfb65f1ea8f02=function(e){return e.getMinutes()},r.wbg.__wbg_getMonth_25c1c5a601d72773=function(e){return e.getMonth()},r.wbg.__wbg_getRandomValues_1c61fac11405ffdc=function(){return f(function(e,t){globalThis.crypto.getRandomValues(U(e,t))},arguments)},r.wbg.__wbg_getRandomValues_b8f5dbd5f3995a9e=function(){return f(function(e,t){e.getRandomValues(t)},arguments)},r.wbg.__wbg_getRandomValues_d8c71ea8f97a0b46=function(){return f(function(e,t){globalThis.crypto.getRandomValues(U(e,t))},arguments)},r.wbg.__wbg_getReader_48e00749fe3f6089=function(){return f(function(e){return e.getReader()},arguments)},r.wbg.__wbg_getSeconds_8113bf8709718eb2=function(e){return e.getSeconds()},r.wbg.__wbg_getSize_f43fed70ca1762f1=function(){return f(function(e){return e.getSize()},arguments)},r.wbg.__wbg_getTime_14776bfb48a1bff9=function(e){return e.getTime()},r.wbg.__wbg_getTimezoneOffset_d391cb11d54969f8=function(e){return e.getTimezoneOffset()},r.wbg.__wbg_getUint32_741d4a7dc32fc0d5=function(e,t){return e.getUint32(t>>>0)},r.wbg.__wbg_get_7bed016f185add81=function(e,t){return e[t>>>0]},r.wbg.__wbg_get_done_a0463af43a1fc764=function(e){const t=e.done;return g(t)?16777215:t?1:0},r.wbg.__wbg_get_efcb449f58ec27c2=function(){return f(function(e,t){return Reflect.get(e,t)},arguments)},r.wbg.__wbg_get_index_af1d9818a935f6ae=function(e,t){return e[t>>>0]},r.wbg.__wbg_get_value_5ce96c9f81ce7398=function(e){return e.value},r.wbg.__wbg_get_with_ref_key_1dc361bd10053bfe=function(e,t){return e[t]},r.wbg.__wbg_has_787fafc980c3ccdb=function(){return f(function(e,t){return Reflect.has(e,t)},arguments)},r.wbg.__wbg_headers_b87d7eaba61c3278=function(e){return e.headers},r.wbg.__wbg_info_68cd5b51ef7e5137=function(e,t,n,i){console.info(e,t,n,i)},r.wbg.__wbg_info_e674a11f4f50cc0c=function(e){console.info(e)},r.wbg.__wbg_instanceof_ArrayBuffer_70beb1189ca63b38=function(e){let t;try{t=e instanceof ArrayBuffer}catch{t=!1}return t},r.wbg.__wbg_instanceof_DomException_83b15e7b042a0b1a=function(e){let t;try{t=e instanceof DOMException}catch{t=!1}return t},r.wbg.__wbg_instanceof_Map_8579b5e2ab5437c7=function(e){let t;try{t=e instanceof Map}catch{t=!1}return t},r.wbg.__wbg_instanceof_Response_f4f3e87e07f3135c=function(e){let t;try{t=e instanceof Response}catch{t=!1}return t},r.wbg.__wbg_instanceof_Uint8Array_20c8e73002f7af98=function(e){let t;try{t=e instanceof Uint8Array}catch{t=!1}return t},r.wbg.__wbg_instanceof_WorkerGlobalScope_e31f49b6d33fcadd=function(e){let t;try{t=e instanceof WorkerGlobalScope}catch{t=!1}return t},r.wbg.__wbg_isArray_96e0af9891d0945d=function(e){return Array.isArray(e)},r.wbg.__wbg_isSafeInteger_d216eda7911dde36=function(e){return Number.isSafeInteger(e)},r.wbg.__wbg_iterator_e5822695327a3c39=function(){return Symbol.iterator},r.wbg.__wbg_length_69bca3cb64fc8748=function(e){return e.length},r.wbg.__wbg_length_a95b69f903b746c4=function(e){return e.length},r.wbg.__wbg_length_cdd215e10d9dd507=function(e){return e.length},r.wbg.__wbg_mark_05056c522bddc362=function(){return f(function(e,t,n){e.mark(p(t,n))},arguments)},r.wbg.__wbg_mark_24a1a597f4f00679=function(){return f(function(e,t,n,i){e.mark(p(t,n),i)},arguments)},r.wbg.__wbg_measure_0b7379f5cfacac6d=function(){return f(function(e,t,n,i,o,d,a){e.measure(p(t,n),p(i,o),p(d,a))},arguments)},r.wbg.__wbg_measure_7728846525e2cced=function(){return f(function(e,t,n,i){e.measure(p(t,n),i)},arguments)},r.wbg.__wbg_message_bd42dbe3f2f3ed8e=function(e,t){const n=t.message,i=m(n,s.__wbindgen_malloc,s.__wbindgen_realloc),o=l;R().setInt32(e+4,o,!0),R().setInt32(e+0,i,!0)},r.wbg.__wbg_msCrypto_a61aeb35a24c1329=function(e){return e.msCrypto},r.wbg.__wbg_name_3a33ad25b892b2dd=function(e,t){const n=t.name,i=m(n,s.__wbindgen_malloc,s.__wbindgen_realloc),o=l;R().setInt32(e+4,o,!0),R().setInt32(e+0,i,!0)},r.wbg.__wbg_navigator_ae06f1666ea7c968=function(e){return e.navigator},r.wbg.__wbg_new_0_f9740686d739025c=function(){return new Date},r.wbg.__wbg_new_1acc0b6eea89d040=function(){return new Object},r.wbg.__wbg_new_1c342efbe54a5bfd=function(e,t,n){return new DataView(e,t>>>0,n>>>0)},r.wbg.__wbg_new_2531773dac38ebb3=function(){return f(function(){return new AbortController},arguments)},r.wbg.__wbg_new_3c3d849046688a66=function(e,t){try{var n={a:e,b:t},i=(d,a)=>{const _=n.a;n.a=0;try{return je(_,n.b,d,a)}finally{n.a=_}};return new Promise(i)}finally{n.a=n.b=0}},r.wbg.__wbg_new_5a79be3ab53b8aa5=function(e){return new Uint8Array(e)},r.wbg.__wbg_new_68651c719dcda04e=function(){return new Map},r.wbg.__wbg_new_8a6f238a6ece86ea=function(){return new Error},r.wbg.__wbg_new_93d9417ed3fb115d=function(e){return new Date(e)},r.wbg.__wbg_new_9edf9838a2def39c=function(){return f(function(){return new Headers},arguments)},r.wbg.__wbg_new_a7442b4b19c1a356=function(e,t){return new Error(p(e,t))},r.wbg.__wbg_new_e17d9f43105b08be=function(){return new Array},r.wbg.__wbg_new_from_slice_92f4d78ca282a2d2=function(e,t){return new Uint8Array(U(e,t))},r.wbg.__wbg_new_no_args_ee98eee5275000a4=function(e,t){return new Function(p(e,t))},r.wbg.__wbg_new_with_byte_offset_and_length_46e3e6a5e9f9e89b=function(e,t,n){return new Uint8Array(e,t>>>0,n>>>0)},r.wbg.__wbg_new_with_into_underlying_source_b47f6a6a596a7f24=function(e,t){return new ReadableStream(te.__wrap(e),t)},r.wbg.__wbg_new_with_length_01aa0dc35aa13543=function(e){return new Uint8Array(e>>>0)},r.wbg.__wbg_new_with_str_and_init_0ae7728b6ec367b1=function(){return f(function(e,t,n){return new Request(p(e,t),n)},arguments)},r.wbg.__wbg_new_with_year_month_day_6236812cf591750d=function(e,t,n){return new Date(e>>>0,t,n)},r.wbg.__wbg_next_020810e0ae8ebcb0=function(){return f(function(e){return e.next()},arguments)},r.wbg.__wbg_next_2c826fe5dfec6b6a=function(e){return e.next},r.wbg.__wbg_next_eedaffcadc567b75=function(){return f(function(e){return e.next()},arguments)},r.wbg.__wbg_node_905d3e251edff8a2=function(e){return e.node},r.wbg.__wbg_now_2c95c9de01293173=function(e){return e.now()},r.wbg.__wbg_now_793306c526e2e3b6=function(){return Date.now()},r.wbg.__wbg_on_auth_required_bd4fddb2d64ca1f6=function(){return f(function(e){return e.on_auth_required()},arguments)},r.wbg.__wbg_on_close_b7db71fe8139a5f0=function(e){e.on_close()},r.wbg.__wbg_on_consent_update_f646a191e881f57d=function(e,t){e.on_consent_update(t)},r.wbg.__wbg_on_conversation_9187414aca96940c=function(e,t){e.on_conversation(O.__wrap(t))},r.wbg.__wbg_on_error_c58307424c85aaf5=function(e,t){e.on_error(t)},r.wbg.__wbg_on_message_b60ee485d291967a=function(e,t){e.on_message(t)},r.wbg.__wbg_on_message_deleted_dc9cf7d3b9aefde7=function(e,t,n){let i,o;try{i=t,o=n,e.on_message_deleted(p(t,n))}finally{s.__wbindgen_free(i,o,1)}},r.wbg.__wbg_on_user_preference_update_82574376a4af8566=function(e,t,n){var i=G(t,n).slice();s.__wbindgen_free(t,n*4,4),e.on_user_preference_update(i)},r.wbg.__wbg_performance_121b9855d716e029=function(){return globalThis.performance},r.wbg.__wbg_performance_7a3ffd0b17f663ad=function(e){return e.performance},r.wbg.__wbg_postMessage_de7175726e2c1bc7=function(){return f(function(e,t){e.postMessage(t)},arguments)},r.wbg.__wbg_process_dc0fbacc7c1c06f7=function(e){return e.process},r.wbg.__wbg_prototypesetcall_2a6620b6922694b2=function(e,t,n){Uint8Array.prototype.set.call(U(e,t),n)},r.wbg.__wbg_push_df81a39d04db858c=function(e,t){return e.push(t)},r.wbg.__wbg_queueMicrotask_34d692c25c47d05b=function(e){return e.queueMicrotask},r.wbg.__wbg_queueMicrotask_9d76cacb20c84d58=function(e){queueMicrotask(e)},r.wbg.__wbg_randomFillSync_ac0988aba3254290=function(){return f(function(e,t){e.randomFillSync(t)},arguments)},r.wbg.__wbg_random_babe96ffc73e60a2=function(){return Math.random()},r.wbg.__wbg_read_48f1593df542f968=function(e){return e.read()},r.wbg.__wbg_read_e2b5efb864451cae=function(){return f(function(e,t,n){return e.read(t,n)},arguments)},r.wbg.__wbg_read_f7d59b68d039d64d=function(){return f(function(e,t,n,i){return e.read(U(t,n),i)},arguments)},r.wbg.__wbg_releaseLock_5d0b5a68887b891d=function(e){e.releaseLock()},r.wbg.__wbg_require_60cc747a6bc5215a=function(){return f(function(){return module.require},arguments)},r.wbg.__wbg_resolve_caf97c30b83f7053=function(e){return Promise.resolve(e)},r.wbg.__wbg_respond_0f4dbf5386f5c73e=function(){return f(function(e,t){e.respond(t>>>0)},arguments)},r.wbg.__wbg_setInterval_ed3b5e3c3ebb8a6d=function(){return f(function(e,t){return setInterval(e,t)},arguments)},r.wbg.__wbg_setTimeout_7bb3429662ab1e70=function(e,t){return setTimeout(e,t)},r.wbg.__wbg_setTimeout_8f06012fba12034e=function(e,t){globalThis.setTimeout(e,t)},r.wbg.__wbg_setTimeout_929c97a7c0f23d36=function(e,t){return setTimeout(e,t)},r.wbg.__wbg_setTimeout_db2dbaeefb6f39c7=function(){return f(function(e,t){return setTimeout(e,t)},arguments)},r.wbg.__wbg_setUint32_7c19a62c08deac62=function(e,t,n){e.setUint32(t>>>0,n>>>0)},r.wbg.__wbg_set_3f1d0b984ed272ed=function(e,t,n){e[t]=n},r.wbg.__wbg_set_8b342d8cd9d2a02c=function(){return f(function(e,t,n,i,o){e.set(p(t,n),p(i,o))},arguments)},r.wbg.__wbg_set_907fb406c34a251d=function(e,t,n){return e.set(t,n)},r.wbg.__wbg_set_9e6516df7b7d0f19=function(e,t,n){e.set(U(t,n))},r.wbg.__wbg_set_at_ec187fadbab331e2=function(e,t){e.at=t},r.wbg.__wbg_set_body_3c365989753d61f4=function(e,t){e.body=t},r.wbg.__wbg_set_c213c871859d6500=function(e,t,n){e[t>>>0]=n},r.wbg.__wbg_set_c2abbebe8b9ebee1=function(){return f(function(e,t,n){return Reflect.set(e,t,n)},arguments)},r.wbg.__wbg_set_cache_2f9deb19b92b81e3=function(e,t){e.cache=$e[t]},r.wbg.__wbg_set_create_89d91caa5a7a3a2b=function(e,t){e.create=t!==0},r.wbg.__wbg_set_create_cd6996d11cc76544=function(e,t){e.create=t!==0},r.wbg.__wbg_set_credentials_f621cd2d85c0c228=function(e,t){e.credentials=Je[t]},r.wbg.__wbg_set_headers_6926da238cd32ee4=function(e,t){e.headers=t},r.wbg.__wbg_set_high_water_mark_5142ac1d2fb46365=function(e,t){e.highWaterMark=t},r.wbg.__wbg_set_integrity_62a46fc792832f41=function(e,t,n){e.integrity=p(t,n)},r.wbg.__wbg_set_method_c02d8cbbe204ac2d=function(e,t,n){e.method=p(t,n)},r.wbg.__wbg_set_mode_52ef73cfa79639cb=function(e,t){e.mode=Ye[t]},r.wbg.__wbg_set_redirect_df0285496ec45ff8=function(e,t){e.redirect=Xe[t]},r.wbg.__wbg_set_referrer_ec9cf8a8a315d50c=function(e,t,n){e.referrer=p(t,n)},r.wbg.__wbg_set_referrer_policy_99c1f299b4e37446=function(e,t){e.referrerPolicy=He[t]},r.wbg.__wbg_set_signal_dda2cf7ccb6bee0f=function(e,t){e.signal=t},r.wbg.__wbg_signal_4db5aa055bf9eb9a=function(e){return e.signal},r.wbg.__wbg_signaturerequesthandle_new=function(e){return j.__wrap(e)},r.wbg.__wbg_slice_3e7e2fc0da7cc625=function(e,t,n){return e.slice(t>>>0,n>>>0)},r.wbg.__wbg_stack_0ed75d68575b0f3c=function(e,t){const n=t.stack,i=m(n,s.__wbindgen_malloc,s.__wbindgen_realloc),o=l;R().setInt32(e+4,o,!0),R().setInt32(e+0,i,!0)},r.wbg.__wbg_static_accessor_GLOBAL_89e1d9ac6a1b250e=function(){const e=typeof global>"u"?null:global;return g(e)?0:I(e)},r.wbg.__wbg_static_accessor_GLOBAL_THIS_8b530f326a9e48ac=function(){const e=typeof globalThis>"u"?null:globalThis;return g(e)?0:I(e)},r.wbg.__wbg_static_accessor_SELF_6fdf4b64710cc91b=function(){const e=typeof self>"u"?null:self;return g(e)?0:I(e)},r.wbg.__wbg_static_accessor_WINDOW_b45bfc5a37f6cfa2=function(){const e=typeof window>"u"?null:window;return g(e)?0:I(e)},r.wbg.__wbg_status_de7eed5a7a5bfd5d=function(e){return e.status},r.wbg.__wbg_storage_2fd28cd0598c9a9b=function(e){return e.storage},r.wbg.__wbg_stringify_b5fb28f6465d9c3e=function(){return f(function(e){return JSON.stringify(e)},arguments)},r.wbg.__wbg_subarray_480600f3d6a9f26c=function(e,t,n){return e.subarray(t>>>0,n>>>0)},r.wbg.__wbg_text_dc33c15c17bdfb52=function(){return f(function(e){return e.text()},arguments)},r.wbg.__wbg_then_4f46f6544e6b4a28=function(e,t){return e.then(t)},r.wbg.__wbg_then_70d05cf780a18d77=function(e,t,n){return e.then(t,n)},r.wbg.__wbg_toString_331854e6e3c16849=function(){return f(function(e,t){return e.toString(t)},arguments)},r.wbg.__wbg_toString_7da7c8dbec78fcb8=function(e){return e.toString()},r.wbg.__wbg_truncate_6511a04243d4c36b=function(){return f(function(e,t){e.truncate(t)},arguments)},r.wbg.__wbg_truncate_f99e4636535b6562=function(){return f(function(e,t){e.truncate(t>>>0)},arguments)},r.wbg.__wbg_url_b36d2a5008eb056f=function(e,t){const n=t.url,i=m(n,s.__wbindgen_malloc,s.__wbindgen_realloc),o=l;R().setInt32(e+4,o,!0),R().setInt32(e+0,i,!0)},r.wbg.__wbg_value_692627309814bb8c=function(e){return e.value},r.wbg.__wbg_versions_c01dfd4722a88165=function(e){return e.versions},r.wbg.__wbg_view_f6c15ac9fed63bbd=function(e){const t=e.view;return g(t)?0:I(t)},r.wbg.__wbg_warn_1d74dddbe2fd1dbb=function(e){console.warn(e)},r.wbg.__wbg_warn_8f5b5437666d0885=function(e,t,n,i){console.warn(e,t,n,i)},r.wbg.__wbg_write_0c22b53589bfcada=function(){return f(function(e,t,n,i){return e.write(U(t,n),i)},arguments)},r.wbg.__wbg_write_5c1be3e4039a6ed1=function(){return f(function(e,t,n){return e.write(t,n)},arguments)},r.wbg.__wbindgen_cast_173fbbcd3a731426=function(e,t){return oe(e,t,s.wasm_bindgen__closure__destroy__hed8af60076250245,Ge)},r.wbg.__wbindgen_cast_2241b6af4c4b2941=function(e,t){return p(e,t)},r.wbg.__wbindgen_cast_25a0a844437d0e92=function(e,t){var n=G(e,t).slice();return s.__wbindgen_free(e,t*4,4),n},r.wbg.__wbindgen_cast_2900838d07f16ff6=function(e,t){return oe(e,t,s.wasm_bindgen__closure__destroy__hfbd660e60d498df9,Le)},r.wbg.__wbindgen_cast_3ab6bb23fa77e709=function(e,t){return oe(e,t,s.wasm_bindgen__closure__destroy__h3c5639ee43c80f22,Ue)},r.wbg.__wbindgen_cast_4625c577ab2ec9ee=function(e){return BigInt.asUintN(64,e)},r.wbg.__wbindgen_cast_4a7a1cd401354e65=function(e,t){var n=G(e,t).slice();return s.__wbindgen_free(e,t*4,4),n},r.wbg.__wbindgen_cast_8e37b4ad2f2ba653=function(e,t){var n=G(e,t).slice();return s.__wbindgen_free(e,t*4,4),n},r.wbg.__wbindgen_cast_998222446b91a002=function(e,t){var n=G(e,t).slice();return s.__wbindgen_free(e,t*4,4),n},r.wbg.__wbindgen_cast_9ae0607507abb057=function(e){return e},r.wbg.__wbindgen_cast_cb9088102bce6b30=function(e,t){return U(e,t)},r.wbg.__wbindgen_cast_d6cd19b81560fd6e=function(e){return e},r.wbg.__wbindgen_cast_e081be35fe620ec4=function(e,t){var n=G(e,t).slice();return s.__wbindgen_free(e,t*4,4),n},r.wbg.__wbindgen_cast_f20a506f31063fd0=function(e,t){var n=G(e,t).slice();return s.__wbindgen_free(e,t*4,4),n},r.wbg.__wbindgen_cast_f22164ae3d0f310b=function(e,t){return oe(e,t,s.wasm_bindgen__closure__destroy__he7b712e0eb1b5ac1,ze)},r.wbg.__wbindgen_init_externref_table=function(){const e=s.__wbindgen_externrefs,t=e.grow(4);e.set(0,void 0),e.set(t+0,void 0),e.set(t+1,null),e.set(t+2,!0),e.set(t+3,!1)},r}function tt(r,e){return s=r.exports,xe.__wbindgen_wasm_module=e,V=null,k=null,s.__wbindgen_start(),s}async function xe(r){if(s!==void 0)return s;typeof r<"u"&&(Object.getPrototypeOf(r)===Object.prototype?{module_or_path:r}=r:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof r>"u"&&(r=new URL("/assets/bindings_wasm_bg-B-5N5IsC.wasm",self.location.href));const e=et();(typeof r=="string"||typeof Request=="function"&&r instanceof Request||typeof URL=="function"&&r instanceof URL)&&(r=fetch(r));const{instance:t,module:n}=await Ze(await r,e);return tt(t,n)}const M=async r=>({id:r.id,name:r.name,imageUrl:r.imageUrl,description:r.description,appData:r.appData,permissions:r.permissions(),addedByInboxId:r.addedByInboxId,metadata:await r.metadata(),admins:r.listAdmins(),superAdmins:r.listSuperAdmins(),createdAtNs:r.createdAtNs});class nt extends Error{constructor(){super("Client not initialized, use Client.create or Client.build to create a client")}}class rt extends Error{constructor(e){super(`Group "${e}" not found`)}}class st extends Error{constructor(e){super(`Stream "${e}" not found`)}}const it={local:"http://localhost:5557",dev:"https://api.dev.xmtp.network:5558",production:"https://api.production.xmtp.network:5558"},at={local:"http://localhost:5558",dev:"https://message-history.dev.ephemera.network",production:"https://message-history.production.ephemera.network"},pe=class pe{constructor(e,t){W(this,ne);W(this,b);P(this,ne,e),P(this,b,t)}get id(){return c(this,b).id()}get name(){return c(this,b).groupName()}async updateName(e){return c(this,b).updateGroupName(e)}get imageUrl(){return c(this,b).groupImageUrlSquare()}async updateImageUrl(e){return c(this,b).updateGroupImageUrlSquare(e)}get description(){return c(this,b).groupDescription()}async updateDescription(e){return c(this,b).updateGroupDescription(e)}get appData(){try{return c(this,b).appData()}catch{return""}}async updateAppData(e){return c(this,b).updateAppData(e)}get isActive(){return c(this,b).isActive()}get addedByInboxId(){return c(this,b).addedByInboxId()}get createdAtNs(){return c(this,b).createdAtNs()}async lastMessage(){const e=await this.messages({limit:BigInt(1),direction:Ve.Descending});if(e.length>0)return e[0]}async metadata(){return c(this,b).groupMetadata()}async members(){return await c(this,b).listMembers()}listAdmins(){return c(this,b).adminList()}listSuperAdmins(){return c(this,b).superAdminList()}permissions(){const e=c(this,b).groupPermissions();return{policyType:e.policyType,policySet:e.policySet}}async updatePermission(e,t,n){return c(this,b).updatePermissionPolicy(e,t,n)}isAdmin(e){return c(this,b).isAdmin(e)}isSuperAdmin(e){return c(this,b).isSuperAdmin(e)}async sync(){return c(this,b).sync()}async addMembersByIdentifiers(e){return c(this,b).addMembers(e)}async addMembers(e){return c(this,b).addMembersByInboxId(e)}async removeMembersByIdentifiers(e){return c(this,b).removeMembers(e)}async removeMembers(e){return c(this,b).removeMembersByInboxId(e)}async addAdmin(e){return c(this,b).addAdmin(e)}async removeAdmin(e){return c(this,b).removeAdmin(e)}async addSuperAdmin(e){return c(this,b).addSuperAdmin(e)}async removeSuperAdmin(e){return c(this,b).removeSuperAdmin(e)}async publishMessages(){return c(this,b).publishMessages()}async send(e,t){return c(this,b).send(e,t!=null?t:{shouldPush:!0})}async sendText(e,t){return c(this,b).sendText(e,t)}async sendMarkdown(e,t){return c(this,b).sendMarkdown(e,t)}async sendReaction(e,t){return c(this,b).sendReaction(e,t)}async sendReadReceipt(e){return c(this,b).sendReadReceipt(e)}async sendReply(e,t){return c(this,b).sendReply(e,t)}async sendTransactionReference(e,t){return c(this,b).sendTransactionReference(e,t)}async sendWalletSendCalls(e,t){return c(this,b).sendWalletSendCalls(e,t)}async sendActions(e,t){return c(this,b).sendActions(e,t)}async sendIntent(e,t){return c(this,b).sendIntent(e,t)}async sendAttachment(e,t){return c(this,b).sendAttachment(e,t)}async sendMultiRemoteAttachment(e,t){return c(this,b).sendMultiRemoteAttachment(e,t)}async sendRemoteAttachment(e,t){return c(this,b).sendRemoteAttachment(e,t)}async messages(e){return c(this,b).findEnrichedMessages(e)}async countMessages(e){return c(this,b).countMessages(e)}consentState(){return c(this,b).consentState()}updateConsentState(e){c(this,b).updateConsentState(e)}dmPeerInboxId(){return c(this,b).dmPeerInboxId()}messageDisappearingSettings(){return c(this,b).messageDisappearingSettings()}async updateMessageDisappearingSettings(e,t){const n={fromNs:e,inNs:t};return c(this,b).updateMessageDisappearingSettings(n)}async removeMessageDisappearingSettings(){return c(this,b).removeMessageDisappearingSettings()}isMessageDisappearingEnabled(){return c(this,b).isMessageDisappearingEnabled()}stream(e,t){return c(this,b).stream({on_message:n=>{e(null,n)},on_error:n=>{e(n,void 0)},on_close:()=>{t()}})}pausedForVersion(){return c(this,b).pausedForVersion()}hmacKeys(){return c(this,b).getHmacKeys()}async debugInfo(){return await c(this,b).getDebugInfo()}async duplicateDms(){return(await c(this,b).findDuplicateDms()).map((e=>new pe(c(this,ne),e)))}async requestRemoval(){return c(this,b).leaveGroup()}isPendingRemoval(){return c(this,b).membershipState()===Ke.PendingRemove}async lastReadTimes(){return c(this,b).getLastReadTimes()}};ne=new WeakMap,b=new WeakMap;let B=pe;class ot{constructor(e,t){W(this,q);W(this,S);P(this,q,e),P(this,S,t)}async sync(){return c(this,S).sync()}async syncAll(e){return c(this,S).syncAllConversations(e)}getConversationById(e){try{const t=c(this,S).findGroupById(e);return new B(c(this,q),t)}catch{return}}async getMessageById(e){try{return await c(this,S).findEnrichedMessageById(e)}catch{return}}getDmByInboxId(e){try{const t=c(this,S).findDmByTargetInboxId(e);return new B(c(this,q),t)}catch{return}}list(e){return c(this,S).list(e).map((t=>new B(c(this,q),t.conversation)))}listGroups(e){return c(this,S).list({...e!=null?e:{},conversationType:ce.Group}).map((t=>new B(c(this,q),t.conversation)))}listDms(e){return c(this,S).list({...e!=null?e:{},conversationType:ce.Dm}).map((t=>new B(c(this,q),t.conversation)))}createGroupOptimistic(e){const t=c(this,S).createGroupOptimistic(e);return new B(c(this,q),t)}async createGroupWithIdentifiers(e,t){const n=await c(this,S).createGroup(e,t);return new B(c(this,q),n)}async createGroup(e,t){const n=await c(this,S).createGroupByInboxIds(e,t);return new B(c(this,q),n)}async createDmWithIdentifier(e,t){const n=await c(this,S).createDm(e,t);return new B(c(this,q),n)}async createDm(e,t){const n=await c(this,S).createDmByInboxId(e,t);return new B(c(this,q),n)}hmacKeys(){return c(this,S).getHmacKeys()}stream(e,t,n){return c(this,S).stream({on_conversation:i=>{e(null,i)},on_error:i=>{e(i,void 0)},on_close:()=>{t()}},n)}streamGroups(e,t){return this.stream(e,t,ce.Group)}streamDms(e,t){return this.stream(e,t,ce.Dm)}streamAllMessages(e,t,n,i){return c(this,S).streamAllMessages({on_message:o=>{e(null,o)},on_error:o=>{e(o,void 0)},on_close:()=>{t()}},n,i)}streamMessageDeletions(e){return c(this,S).streamMessageDeletions({on_message_deleted:t=>{e(null,t)},on_error:t=>{e(t,void 0)}})}}q=new WeakMap,S=new WeakMap;class ct{constructor(e){W(this,K);P(this,K,e)}apiStatistics(){return c(this,K).apiStatistics()}apiIdentityStatistics(){return c(this,K).apiIdentityStatistics()}apiAggregateStatistics(){return c(this,K).apiAggregateStatistics()}clearAllStatistics(){c(this,K).clearAllStatistics()}}K=new WeakMap;class _t{constructor(e,t){W(this,z);W(this,J);P(this,z,e),P(this,J,t)}sync(){return c(this,z).syncPreferences()}async inboxState(e){return c(this,z).inboxState(e)}async getInboxStates(e,t){return c(this,z).inboxStateFromInboxIds(e,t!=null?t:!1)}async setConsentStates(e){return c(this,z).setConsentStates(e)}async getConsentState(e,t){return c(this,z).getConsentState(e,t)}streamConsent(e,t){return c(this,J).streamConsent({on_consent_update:n=>{e(null,n)},on_error:n=>{e(n,void 0)},on_close:()=>{t()}})}streamPreferences(e,t){return c(this,J).streamPreferences({on_user_preference_update:n=>{e(null,n)},on_error:n=>{e(n,void 0)},on_close:()=>{t()}})}}z=new WeakMap,J=new WeakMap;const me=class me{constructor(e){W(this,v);W(this,re);W(this,se);W(this,ie);P(this,v,e);const t=e.conversations();P(this,re,new ot(this,t)),P(this,se,new ct(e)),P(this,ie,new _t(e,t))}static async create(e,t){const n=await(async(i,o)=>{var ue,de;const d=(o==null?void 0:o.env)||"dev",a=(o==null?void 0:o.apiUrl)||it[d],_=(o==null?void 0:o.gatewayHost)||void 0,h=a.startsWith("https"),y=await We(a,_,h,i)||Ce(i),x=(o==null?void 0:o.dbPath)===void 0?`xmtp-${d}-${y}.db3`:o.dbPath,$=o&&(o.loggingLevel!==void 0||o.structuredLogging||o.performanceLogging),ae=(o==null?void 0:o.historySyncUrl)===void 0?at[d]:o.historySyncUrl,_e=o!=null&&o.disableDeviceSync?ye.Disabled:ye.Enabled;return Ee(a,y,i,x,o==null?void 0:o.dbEncryptionKey,ae,_e,$?{structured:(ue=o.structuredLogging)!=null?ue:!1,performance:(de=o.performanceLogging)!=null?de:!1,level:o.loggingLevel}:void 0,void 0,o==null?void 0:o.appVersion,o==null?void 0:o.gatewayHost,void 0,void 0,void 0,void 0)})(e,t);return new me(n)}get libxmtpVersion(){return c(this,v).libxmtpVersion}get appVersion(){return c(this,v).appVersion}get accountIdentifier(){return c(this,v).accountIdentifier}get inboxId(){return c(this,v).inboxId}get installationId(){return c(this,v).installationId}get installationIdBytes(){return c(this,v).installationIdBytes}get isRegistered(){return c(this,v).isRegistered}get conversations(){return c(this,re)}get debugInformation(){return c(this,se)}get preferences(){return c(this,ie)}async canMessage(e){return c(this,v).canMessage(e)}async addSignature(e,t){switch(t.type){case"SCW":await e.addScwSignature(t.identifier,t.signature,t.chainId,t.blockNumber);break;case"EOA":await e.addEcdsaSignature(t.signature)}}async applySignatureRequest(e){return c(this,v).applySignatureRequest(e)}async processSignatureRequest(e,t){await this.addSignature(t,e),await this.applySignatureRequest(t)}createInboxSignatureRequest(){return c(this,v).createInboxSignatureRequest()}async addAccountSignatureRequest(e){return c(this,v).addWalletSignatureRequest(e)}async removeAccountSignatureRequest(e){return c(this,v).revokeWalletSignatureRequest(e)}async revokeAllOtherInstallationsSignatureRequest(){return c(this,v).revokeAllOtherInstallationsSignatureRequest()}async revokeInstallationsSignatureRequest(e){return c(this,v).revokeInstallationsSignatureRequest(e)}async changeRecoveryIdentifierSignatureRequest(e){return c(this,v).changeRecoveryIdentifierSignatureRequest(e)}async registerIdentity(e,t){await this.addSignature(t,e),await c(this,v).registerIdentity(t)}async getInboxIdByIdentifier(e){return c(this,v).findInboxIdByIdentifier(e)}signWithInstallationKey(e){return c(this,v).signWithInstallationKey(e)}verifySignedWithInstallationKey(e,t){try{return c(this,v).verifySignedWithInstallationKey(e,t),!0}catch{return!1}}verifySignedWithPublicKey(e,t,n){try{return Pe(e,t,n),!0}catch{return!1}}async fetchKeyPackageStatuses(e){return c(this,v).getKeyPackageStatusesForInstallationIds(e)}async sendSyncRequest(){return c(this,v).sendSyncRequest()}};v=new WeakMap,re=new WeakMap,se=new WeakMap,ie=new WeakMap;let fe=me,L,Me=!1;const D=new Map,A=new Map,u=r=>{self.postMessage(r)},C=r=>{self.postMessage(r)},H=r=>{self.postMessage(r)};self.onmessage=async r=>{var i;const{action:e,id:t,data:n}=r.data;Me&&console.log("client worker received event data",r.data),await xe();try{if(e==="client.init"&&!L)return L=await fe.create(n.identifier,n.options),Me=((i=n.options)==null?void 0:i.loggingLevel)!==void 0&&n.options.loggingLevel!==Ne.Off,void u({id:t,action:e,result:{appVersion:L.appVersion,inboxId:L.inboxId,installationId:L.installationId,installationIdBytes:L.installationIdBytes,libxmtpVersion:L.libxmtpVersion}});if(!L)throw new nt;const o=L,d=a=>{const _=o.conversations.getConversationById(a);if(!_)throw new rt(a);return _};switch(e){case"endStream":{const a=D.get(n.streamId);if(!a)throw new st(n.streamId);a.end(),D.delete(n.streamId),u({id:t,action:e,result:void 0});break}case"client.applySignatureRequest":{const a=A.get(n.signatureRequestId);if(!a)throw new Error("Signature request not found");await o.processSignatureRequest(n.signer,a),A.delete(n.signatureRequestId),u({id:t,action:e,result:void 0});break}case"client.createInboxSignatureText":{const a={signatureText:void 0,signatureRequestId:void 0};try{const _=o.createInboxSignatureRequest();_&&(a.signatureText=await _.signatureText(),a.signatureRequestId=n.signatureRequestId,A.set(n.signatureRequestId,_))}finally{u({id:t,action:e,result:a})}break}case"client.addAccountSignatureText":{const a=await o.addAccountSignatureRequest(n.newIdentifier),_={signatureText:await a.signatureText(),signatureRequestId:n.signatureRequestId};A.set(n.signatureRequestId,a),u({id:t,action:e,result:_});break}case"client.removeAccountSignatureText":{const a=await o.removeAccountSignatureRequest(n.identifier),_={signatureText:await a.signatureText(),signatureRequestId:n.signatureRequestId};A.set(n.signatureRequestId,a),u({id:t,action:e,result:_});break}case"client.revokeAllOtherInstallationsSignatureText":{const a=await o.revokeAllOtherInstallationsSignatureRequest(),_={signatureText:await(a==null?void 0:a.signatureText()),signatureRequestId:n.signatureRequestId};a&&A.set(n.signatureRequestId,a),u({id:t,action:e,result:_});break}case"client.revokeInstallationsSignatureText":{const a=await o.revokeInstallationsSignatureRequest(n.installationIds),_={signatureText:await a.signatureText(),signatureRequestId:n.signatureRequestId};A.set(n.signatureRequestId,a),u({id:t,action:e,result:_});break}case"client.changeRecoveryIdentifierSignatureText":{const a=await o.changeRecoveryIdentifierSignatureRequest(n.identifier),_={signatureText:await a.signatureText(),signatureRequestId:n.signatureRequestId};A.set(n.signatureRequestId,a),u({id:t,action:e,result:_});break}case"client.registerIdentity":{const a=A.get(n.signatureRequestId);if(!a)throw new Error("Signature request not found");await o.registerIdentity(n.signer,a),A.delete(n.signatureRequestId),u({id:t,action:e,result:void 0});break}case"client.addAccount":{const a=A.get(n.signatureRequestId);if(!a)throw new Error("Signature request not found");await o.processSignatureRequest(n.signer,a),A.delete(n.signatureRequestId),u({id:t,action:e,result:void 0});break}case"client.removeAccount":{const a=A.get(n.signatureRequestId);if(!a)throw new Error("Signature request not found");await o.processSignatureRequest(n.signer,a),A.delete(n.signatureRequestId),u({id:t,action:e,result:void 0});break}case"client.revokeAllOtherInstallations":{const a=A.get(n.signatureRequestId);if(!a)throw new Error("Signature request not found");await o.processSignatureRequest(n.signer,a),A.delete(n.signatureRequestId),u({id:t,action:e,result:void 0});break}case"client.revokeInstallations":{const a=A.get(n.signatureRequestId);if(!a)throw new Error("Signature request not found");await o.processSignatureRequest(n.signer,a),A.delete(n.signatureRequestId),u({id:t,action:e,result:void 0});break}case"client.changeRecoveryIdentifier":{const a=A.get(n.signatureRequestId);if(!a)throw new Error("Signature request not found");await o.processSignatureRequest(n.signer,a),A.delete(n.signatureRequestId),u({id:t,action:e,result:void 0});break}case"client.isRegistered":{const a=o.isRegistered;u({id:t,action:e,result:a});break}case"client.canMessage":{const a=await o.canMessage(n.identifiers);u({id:t,action:e,result:a});break}case"client.getInboxIdByIdentifier":{const a=await o.getInboxIdByIdentifier(n.identifier);u({id:t,action:e,result:a});break}case"client.signWithInstallationKey":{const a=o.signWithInstallationKey(n.signatureText);u({id:t,action:e,result:a});break}case"client.verifySignedWithInstallationKey":{const a=o.verifySignedWithInstallationKey(n.signatureText,n.signatureBytes);u({id:t,action:e,result:a});break}case"client.verifySignedWithPublicKey":{const a=o.verifySignedWithPublicKey(n.signatureText,n.signatureBytes,n.publicKey);u({id:t,action:e,result:a});break}case"client.fetchKeyPackageStatuses":{const a=await o.fetchKeyPackageStatuses(n.installationIds);u({id:t,action:e,result:a});break}case"client.sendSyncRequest":await o.sendSyncRequest(),u({id:t,action:e,result:void 0});break;case"debugInformation.apiStatistics":{const a=o.debugInformation.apiStatistics();u({id:t,action:e,result:a});break}case"debugInformation.apiIdentityStatistics":{const a=o.debugInformation.apiIdentityStatistics();u({id:t,action:e,result:a});break}case"debugInformation.apiAggregateStatistics":{const a=o.debugInformation.apiAggregateStatistics();u({id:t,action:e,result:a});break}case"debugInformation.clearAllStatistics":o.debugInformation.clearAllStatistics(),u({id:t,action:e,result:void 0});break;case"preferences.inboxState":{const a=await o.preferences.inboxState(n.refreshFromNetwork);u({id:t,action:e,result:a});break}case"preferences.getInboxStates":{const a=await o.preferences.getInboxStates(n.inboxIds,n.refreshFromNetwork);u({id:t,action:e,result:a});break}case"preferences.setConsentStates":await o.preferences.setConsentStates(n.records),u({id:t,action:e,result:void 0});break;case"preferences.getConsentState":{const a=await o.preferences.getConsentState(n.entityType,n.entity);u({id:t,action:e,result:a});break}case"preferences.sync":{const a=await o.preferences.sync();u({id:t,action:e,result:a});break}case"preferences.streamConsent":{const a=(h,y)=>{h?H({action:"stream.consent",streamId:n.streamId,error:h}):C({action:"stream.consent",streamId:n.streamId,result:y!=null?y:[]})},_=o.preferences.streamConsent(a,(()=>{D.delete(n.streamId),C({action:"stream.fail",streamId:n.streamId,result:void 0})}));D.set(n.streamId,_),u({id:t,action:e,result:void 0});break}case"preferences.streamPreferences":{const a=(h,y)=>{h?H({action:"stream.preferences",streamId:n.streamId,error:h}):C({action:"stream.preferences",streamId:n.streamId,result:y!=null?y:void 0})},_=o.preferences.streamPreferences(a,(()=>{D.delete(n.streamId),C({action:"stream.fail",streamId:n.streamId,result:void 0})}));D.set(n.streamId,_),u({id:t,action:e,result:void 0});break}case"conversations.stream":{const a=(h,y)=>{h?H({action:"stream.conversation",streamId:n.streamId,error:h}):y?M(new B(o,y)).then((x=>{C({action:"stream.conversation",streamId:n.streamId,result:x})})).catch((x=>{H({action:"stream.conversation",streamId:n.streamId,error:x})})):C({action:"stream.conversation",streamId:n.streamId,result:void 0})},_=o.conversations.stream(a,(()=>{D.delete(n.streamId),C({action:"stream.fail",streamId:n.streamId,result:void 0})}),n.conversationType);D.set(n.streamId,_),u({id:t,action:e,result:void 0});break}case"conversations.streamAllMessages":{const a=(h,y)=>{h?H({action:"stream.message",streamId:n.streamId,error:h}):y&&o.conversations.getMessageById(y.id).then((x=>{x&&C({action:"stream.message",streamId:n.streamId,result:x})}))},_=o.conversations.streamAllMessages(a,(()=>{D.delete(n.streamId),C({action:"stream.fail",streamId:n.streamId,result:void 0})}),n.conversationType,n.consentStates);D.set(n.streamId,_),u({id:t,action:e,result:void 0});break}case"conversations.streamMessageDeletions":{const a=(h,y)=>{h?(D.delete(n.streamId),H({action:"stream.messageDeleted",streamId:n.streamId,error:h})):C({action:"stream.messageDeleted",streamId:n.streamId,result:y})},_=o.conversations.streamMessageDeletions(a);D.set(n.streamId,_),u({id:t,action:e,result:void 0});break}case"conversations.list":{const a=o.conversations.list(n.options),_=await Promise.all(a.map((h=>M(h))));u({id:t,action:e,result:_});break}case"conversations.listGroups":{const a=o.conversations.listGroups(n.options),_=await Promise.all(a.map((h=>M(h))));u({id:t,action:e,result:_});break}case"conversations.listDms":{const a=o.conversations.listDms(n.options),_=await Promise.all(a.map((h=>M(h))));u({id:t,action:e,result:_});break}case"conversations.createGroupOptimistic":{const a=o.conversations.createGroupOptimistic(n.options),_=await M(a);u({id:t,action:e,result:_});break}case"conversations.createGroupWithIdentifiers":{const a=await o.conversations.createGroupWithIdentifiers(n.identifiers,n.options),_=await M(a);u({id:t,action:e,result:_});break}case"conversations.createGroup":{const a=await o.conversations.createGroup(n.inboxIds,n.options),_=await M(a);u({id:t,action:e,result:_});break}case"conversations.createDmWithIdentifier":{const a=await o.conversations.createDmWithIdentifier(n.identifier,n.options),_=await M(a);u({id:t,action:e,result:_});break}case"conversations.createDm":{const a=await o.conversations.createDm(n.inboxId,n.options),_=await M(a);u({id:t,action:e,result:_});break}case"conversations.sync":await o.conversations.sync(),u({id:t,action:e,result:void 0});break;case"conversations.syncAll":await o.conversations.syncAll(n.consentStates),u({id:t,action:e,result:void 0});break;case"conversations.getConversationById":{const a=o.conversations.getConversationById(n.id),_=a?await M(a):void 0;u({id:t,action:e,result:_});break}case"conversations.getMessageById":{const a=await o.conversations.getMessageById(n.id);u({id:t,action:e,result:a});break}case"conversations.getDmByInboxId":{const a=o.conversations.getDmByInboxId(n.inboxId),_=a?await M(a):void 0;u({id:t,action:e,result:_});break}case"conversations.hmacKeys":{const a=o.conversations.hmacKeys();u({id:t,action:e,result:a});break}case"conversation.sync":{const a=d(n.id);await a.sync();const _=await M(a);u({id:t,action:e,result:_});break}case"conversation.lastMessage":{const a=d(n.id),_=await a.lastMessage();u({id:t,action:e,result:_});break}case"conversation.isActive":{const a=d(n.id).isActive;u({id:t,action:e,result:a});break}case"conversation.consentState":{const a=d(n.id).consentState();u({id:t,action:e,result:a});break}case"conversation.updateConsentState":d(n.id).updateConsentState(n.state),u({id:t,action:e,result:void 0});break;case"group.updateName":{await d(n.id).updateName(n.name),u({id:t,action:e,result:void 0});break}case"group.updateDescription":{await d(n.id).updateDescription(n.description),u({id:t,action:e,result:void 0});break}case"group.updateImageUrl":{await d(n.id).updateImageUrl(n.imageUrl),u({id:t,action:e,result:void 0});break}case"group.updateAppData":{await d(n.id).updateAppData(n.appData),u({id:t,action:e,result:void 0});break}case"conversation.send":{const a=d(n.id),_=await a.send(n.content,n.options);u({id:t,action:e,result:_});break}case"conversation.publishMessages":{await d(n.id).publishMessages(),u({id:t,action:e,result:void 0});break}case"conversation.messages":{const a=d(n.id),_=await a.messages(n.options);u({id:t,action:e,result:_});break}case"conversation.countMessages":{const a=d(n.id),_=await a.countMessages(n.options);u({id:t,action:e,result:_});break}case"conversation.members":{const a=d(n.id),_=await a.members();u({id:t,action:e,result:_});break}case"group.listAdmins":{const a=d(n.id).listAdmins();u({id:t,action:e,result:a});break}case"group.listSuperAdmins":{const a=d(n.id).listSuperAdmins();u({id:t,action:e,result:a});break}case"group.addAdmin":{await d(n.id).addAdmin(n.inboxId),u({id:t,action:e,result:void 0});break}case"group.removeAdmin":{await d(n.id).removeAdmin(n.inboxId),u({id:t,action:e,result:void 0});break}case"group.addSuperAdmin":{await d(n.id).addSuperAdmin(n.inboxId),u({id:t,action:e,result:void 0});break}case"group.removeSuperAdmin":{await d(n.id).removeSuperAdmin(n.inboxId),u({id:t,action:e,result:void 0});break}case"group.addMembersByIdentifiers":{await d(n.id).addMembersByIdentifiers(n.identifiers),u({id:t,action:e,result:void 0});break}case"group.removeMembersByIdentifiers":{await d(n.id).removeMembersByIdentifiers(n.identifiers),u({id:t,action:e,result:void 0});break}case"group.addMembers":{await d(n.id).addMembers(n.inboxIds),u({id:t,action:e,result:void 0});break}case"group.removeMembers":{await d(n.id).removeMembers(n.inboxIds),u({id:t,action:e,result:void 0});break}case"group.isAdmin":{const a=d(n.id).isAdmin(n.inboxId);u({id:t,action:e,result:a});break}case"group.isSuperAdmin":{const a=d(n.id).isSuperAdmin(n.inboxId);u({id:t,action:e,result:a});break}case"dm.peerInboxId":{const a=d(n.id).dmPeerInboxId();u({id:t,action:e,result:a});break}case"group.updatePermission":{await d(n.id).updatePermission(n.permissionType,n.policy,n.metadataField),u({id:t,action:e,result:void 0});break}case"group.permissions":{const a=d(n.id),_=(await M(a)).permissions;u({id:t,action:e,result:_});break}case"group.requestRemoval":{await d(n.id).requestRemoval(),u({id:t,action:e,result:void 0});break}case"group.isPendingRemoval":{const a=d(n.id).isPendingRemoval();u({id:t,action:e,result:a});break}case"conversation.messageDisappearingSettings":{const a=d(n.id).messageDisappearingSettings();u({id:t,action:e,result:a});break}case"conversation.updateMessageDisappearingSettings":{await d(n.id).updateMessageDisappearingSettings(n.fromNs,n.inNs),u({id:t,action:e,result:void 0});break}case"conversation.removeMessageDisappearingSettings":{await d(n.id).removeMessageDisappearingSettings(),u({id:t,action:e,result:void 0});break}case"conversation.isMessageDisappearingEnabled":{const a=d(n.id).isMessageDisappearingEnabled();u({id:t,action:e,result:a});break}case"conversation.stream":{const a=d(n.groupId),_=(y,x)=>{y?H({action:"stream.message",streamId:n.streamId,error:y}):x&&o.conversations.getMessageById(x.id).then(($=>{$&&C({action:"stream.message",streamId:n.streamId,result:$})}))},h=a.stream(_,(()=>{D.delete(n.streamId),C({action:"stream.fail",streamId:n.streamId,result:void 0})}));D.set(n.streamId,h),u({id:t,action:e,result:void 0});break}case"conversation.pausedForVersion":{const a=d(n.id).pausedForVersion();u({id:t,action:e,result:a});break}case"conversation.hmacKeys":{const a=d(n.id).hmacKeys();u({id:t,action:e,result:a});break}case"dm.duplicateDms":{const a=d(n.id),_=await a.duplicateDms(),h=await Promise.all(_.map((y=>M(y))));u({id:t,action:e,result:h});break}case"conversation.debugInfo":{const a=d(n.id),_=await a.debugInfo();u({id:t,action:e,result:_});break}case"conversation.lastReadTimes":{const a=d(n.id),_=await a.lastReadTimes();u({id:t,action:e,result:_});break}case"conversation.sendText":{const a=d(n.id),_=await a.sendText(n.text,n.isOptimistic);u({id:t,action:e,result:_});break}case"conversation.sendMarkdown":{const a=d(n.id),_=await a.sendMarkdown(n.markdown,n.isOptimistic);u({id:t,action:e,result:_});break}case"conversation.sendReaction":{const a=d(n.id),_=await a.sendReaction(n.reaction,n.isOptimistic);u({id:t,action:e,result:_});break}case"conversation.sendReadReceipt":{const a=d(n.id),_=await a.sendReadReceipt(n.isOptimistic);u({id:t,action:e,result:_});break}case"conversation.sendReply":{const a=d(n.id),_=await a.sendReply(n.reply,n.isOptimistic);u({id:t,action:e,result:_});break}case"conversation.sendTransactionReference":{const a=d(n.id),_=await a.sendTransactionReference(n.transactionReference,n.isOptimistic);u({id:t,action:e,result:_});break}case"conversation.sendWalletSendCalls":{const a=d(n.id),_=await a.sendWalletSendCalls(n.walletSendCalls,n.isOptimistic);u({id:t,action:e,result:_});break}case"conversation.sendActions":{const a=d(n.id),_=await a.sendActions(n.actions,n.isOptimistic);u({id:t,action:e,result:_});break}case"conversation.sendIntent":{const a=d(n.id),_=await a.sendIntent(n.intent,n.isOptimistic);u({id:t,action:e,result:_});break}case"conversation.sendAttachment":{const a=d(n.id),_=await a.sendAttachment(n.attachment,n.isOptimistic);u({id:t,action:e,result:_});break}case"conversation.sendMultiRemoteAttachment":{const a=d(n.id),_=await a.sendMultiRemoteAttachment(n.multiRemoteAttachment,n.isOptimistic);u({id:t,action:e,result:_});break}case"conversation.sendRemoteAttachment":{const a=d(n.id),_=await a.sendRemoteAttachment(n.remoteAttachment,n.isOptimistic);u({id:t,action:e,result:_});break}}}catch(o){(d=>{self.postMessage(d)})({id:t,action:e,error:o})}}})();
