const C=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,F=globalThis,zt="10.38.0";function Ot(){return Fr(F),F}function Fr(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||zt,t[zt]=t[zt]||{}}function rr(e,t,n=F){const r=n.__SENTRY__=n.__SENTRY__||{},s=r[zt]=r[zt]||{};return s[e]||(s[e]=t())}const _a=["debug","info","warn","error","log","assert","trace"],qh="Sentry Logger ",zs={};function Qt(e){if(!("console"in F))return e();const t=F.console,n={},r=Object.keys(zs);r.forEach(s=>{const o=zs[s];n[s]=t[s],t[s]=o});try{return e()}finally{r.forEach(s=>{t[s]=n[s]})}}function Gh(){Sa().enabled=!0}function Vh(){Sa().enabled=!1}function fd(){return Sa().enabled}function Jh(...e){ya("log",...e)}function Yh(...e){ya("warn",...e)}function Kh(...e){ya("error",...e)}function ya(e,...t){C&&fd()&&Qt(()=>{F.console[e](`${qh}[${e}]:`,...t)})}function Sa(){return C?rr("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const _={enable:Gh,disable:Vh,isEnabled:fd,log:Jh,warn:Yh,error:Kh},pd=50,ht="?",Dc=/\(error: (.*)\)/,Fc=/captureMessage|captureException/;function hd(...e){const t=e.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0,s=0)=>{const o=[],i=n.split(`
`);for(let a=r;a<i.length;a++){let c=i[a];c.length>1024&&(c=c.slice(0,1024));const u=Dc.test(c)?c.replace(Dc,"$1"):c;if(!u.match(/\S*Error: /)){for(const d of t){const l=d(u);if(l){o.push(l);break}}if(o.length>=pd+s)break}}return Qh(o.slice(s))}}function Xh(e){return Array.isArray(e)?hd(...e):e}function Qh(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(is(t).function||"")&&t.pop(),t.reverse(),Fc.test(is(t).function||"")&&(t.pop(),Fc.test(is(t).function||"")&&t.pop()),t.slice(0,pd).map(n=>({...n,filename:n.filename||is(t).filename,function:n.function||ht}))}function is(e){return e[e.length-1]||{}}const ni="<anonymous>";function Ct(e){try{return!e||typeof e!="function"?ni:e.name||ni}catch{return ni}}function Ni(e){const t=e.exception;if(t){const n=[];try{return t.values.forEach(r=>{r.stacktrace.frames&&n.push(...r.stacktrace.frames)}),n}catch{return}}}function md(e){return"__v_isVNode"in e&&e.__v_isVNode?"[VueVNode]":"[VueViewModel]"}function Zh(e){let t=e!=null&&e.startsWith("file://")?e.slice(7):e;return t!=null&&t.match(/\/[A-Z]:/)&&(t=t.slice(1)),t}const Is={},$c={};function Zt(e,t){Is[e]=Is[e]||[],Is[e].push(t)}function en(e,t){if(!$c[e]){$c[e]=!0;try{t()}catch(n){C&&_.error(`Error while instrumenting ${e}`,n)}}}function et(e,t){const n=e&&Is[e];if(n)for(const r of n)try{r(t)}catch(s){C&&_.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${Ct(r)}
Error:`,s)}}let ri=null;function gd(e){const t="error";Zt(t,e),en(t,em)}function em(){ri=F.onerror,F.onerror=function(e,t,n,r,s){return et("error",{column:r,error:s,line:n,msg:e,url:t}),ri?ri.apply(this,arguments):!1},F.onerror.__SENTRY_INSTRUMENTED__=!0}let si=null;function _d(e){const t="unhandledrejection";Zt(t,e),en(t,tm)}function tm(){si=F.onunhandledrejection,F.onunhandledrejection=function(e){return et("unhandledrejection",e),si?si.apply(this,arguments):!0},F.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const yd=Object.prototype.toString;function vt(e){switch(yd.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return Rt(e,Error)}}function sr(e,t){return yd.call(e)===`[object ${t}]`}function Sd(e){return sr(e,"ErrorEvent")}function Bc(e){return sr(e,"DOMError")}function nm(e){return sr(e,"DOMException")}function it(e){return sr(e,"String")}function Eo(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function Yt(e){return e===null||Eo(e)||typeof e!="object"&&typeof e!="function"}function Ve(e){return sr(e,"Object")}function To(e){return typeof Event<"u"&&Rt(e,Event)}function rm(e){return typeof Element<"u"&&Rt(e,Element)}function sm(e){return sr(e,"RegExp")}function or(e){return!!(e!=null&&e.then&&typeof e.then=="function")}function om(e){return Ve(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function Rt(e,t){try{return e instanceof t}catch{return!1}}function bd(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue||e.__v_isVNode))}function ba(e){return typeof Request<"u"&&Rt(e,Request)}const Ea=F,im=80;function We(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,s=[];let o=0,i=0;const a=" > ",c=a.length;let u;const d=Array.isArray(t)?t:t.keyAttrs,l=!Array.isArray(t)&&t.maxStringLength||im;for(;n&&o++<r&&(u=am(n,d),!(u==="html"||o>1&&i+s.length*c+u.length>=l));)s.push(u),i+=u.length,n=n.parentNode;return s.reverse().join(a)}catch{return"<unknown>"}}function am(e,t){const n=e,r=[];if(!(n!=null&&n.tagName))return"";if(Ea.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const s=t!=null&&t.length?t.filter(i=>n.getAttribute(i)).map(i=>[i,n.getAttribute(i)]):null;if(s!=null&&s.length)s.forEach(i=>{r.push(`[${i[0]}="${i[1]}"]`)});else{n.id&&r.push(`#${n.id}`);const i=n.className;if(i&&it(i)){const a=i.split(/\s+/);for(const c of a)r.push(`.${c}`)}}const o=["aria-label","type","name","title","alt"];for(const i of o){const a=n.getAttribute(i);a&&r.push(`[${i}="${a}"]`)}return r.join("")}function wn(){try{return Ea.document.location.href}catch{return""}}function Ed(e){if(!Ea.HTMLElement)return null;let t=e;const n=5;for(let r=0;r<n;r++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}function Ce(e,t,n){if(!(t in e))return;const r=e[t];if(typeof r!="function")return;const s=n(r);typeof s=="function"&&Td(s,r);try{e[t]=s}catch{C&&_.log(`Failed to replace method "${t}" in object`,e)}}function Pe(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{C&&_.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function Td(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,Pe(e,"__sentry_original__",t)}catch{}}function Ta(e){return e.__sentry_original__}function vd(e){if(vt(e))return{message:e.message,name:e.name,stack:e.stack,...Hc(e)};if(To(e)){const t={type:e.type,target:Uc(e.target),currentTarget:Uc(e.currentTarget),...Hc(e)};return typeof CustomEvent<"u"&&Rt(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function Uc(e){try{return rm(e)?We(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function Hc(e){if(typeof e=="object"&&e!==null){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function cm(e){const t=Object.keys(vd(e));return t.sort(),t[0]?t.join(", "):"[object has no keys]"}let An;function $r(e){if(An!==void 0)return An?An(e):e();const t=Symbol.for("__SENTRY_SAFE_RANDOM_ID_WRAPPER__"),n=F;return t in n&&typeof n[t]=="function"?(An=n[t],An(e)):(An=null,e())}function It(){return $r(()=>Math.random())}function Br(){return $r(()=>Date.now())}function Rr(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function oi(e,t){let n=e;const r=n.length;if(r<=150)return n;t>r&&(t=r);let s=Math.max(t-60,0);s<5&&(s=0);let o=Math.min(s+140,r);return o>r-5&&(o=r),o===r&&(s=Math.max(o-140,0)),n=n.slice(s,o),s>0&&(n=`'{snip} ${n}`),o<r&&(n+=" {snip}"),n}function qs(e,t){if(!Array.isArray(e))return"";const n=[];for(let r=0;r<e.length;r++){const s=e[r];try{bd(s)?n.push(md(s)):n.push(String(s))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function ws(e,t,n=!1){return it(e)?sm(t)?t.test(e):it(t)?n?e===t:e.includes(t):!1:!1}function at(e,t=[],n=!1){return t.some(r=>ws(e,r,n))}function um(){const e=F;return e.crypto||e.msCrypto}let ii;function lm(){return It()*16}function Ie(e=um()){try{if(e!=null&&e.randomUUID)return $r(()=>e.randomUUID()).replace(/-/g,"")}catch{}return ii||(ii="10000000100040008000"+1e11),ii.replace(/[018]/g,t=>(t^(lm()&15)>>t/4).toString(16))}function Id(e){var t,n;return(n=(t=e.exception)==null?void 0:t.values)==null?void 0:n[0]}function an(e){const{message:t,event_id:n}=e;if(t)return t;const r=Id(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function Oi(e,t,n){const r=e.exception=e.exception||{},s=r.values=r.values||[],o=s[0]=s[0]||{};o.value||(o.value=t||""),o.type||(o.type="Error")}function At(e,t){const n=Id(e);if(!n)return;const r={type:"generic",handled:!0},s=n.mechanism;if(n.mechanism={...r,...s,...t},t&&"data"in t){const o={...s==null?void 0:s.data,...t.data};n.mechanism.data=o}}function dm(e,t,n=5){if(t.lineno===void 0)return;const r=e.length,s=Math.max(Math.min(r-1,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,s-n),s).map(i=>oi(i,0));const o=Math.min(r-1,s);t.context_line=oi(e[o],t.colno||0),t.post_context=e.slice(Math.min(s+1,r),s+1+n).map(i=>oi(i,0))}function Wc(e){if(fm(e))return!0;try{Pe(e,"__sentry_captured__",!0)}catch{}return!1}function fm(e){try{return e.__sentry_captured__}catch{}}const wd=1e3;function kn(){return Br()/wd}function pm(){const{performance:e}=F;if(!(e!=null&&e.now)||!e.timeOrigin)return kn;const t=e.timeOrigin;return()=>(t+$r(()=>e.now()))/wd}let as;function me(){return(as!=null?as:as=pm())()}let ai=null;function hm(){var i;const{performance:e}=F;if(!(e!=null&&e.now))return;const t=3e5,n=$r(()=>e.now()),r=Br(),s=e.timeOrigin;if(typeof s=="number"&&Math.abs(s+n-r)<t)return s;const o=(i=e.timing)==null?void 0:i.navigationStart;return typeof o=="number"&&Math.abs(o+n-r)<t?o:r-n}function xe(){return ai===null&&(ai=hm()),ai}function mm(e){const t=me(),n={sid:Ie(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>_m(n)};return e&&zn(n,e),n}function zn(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||me(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:Ie()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function gm(e,t){let n={};e.status==="ok"&&(n={status:"exited"}),zn(e,n)}function _m(e){return{sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}}}function Ur(e,t,n=2){if(!t||typeof t!="object"||n<=0)return t;if(e&&Object.keys(t).length===0)return e;const r={...e};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=Ur(r[s],t[s],n-1));return r}function mt(){return Ie()}function wt(){return Ie().substring(16)}const Li="_sentrySpan";function gt(e,t){t?Pe(e,Li,t):delete e[Li]}function qn(e){return e[Li]}const ym=100;class _t{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._attributes={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:mt(),sampleRand:It()}}clone(){const t=new _t;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._attributes={...this._attributes},t._extra={...this._extra},t._contexts={...this._contexts},this._contexts.flags&&(t._contexts.flags={values:[...this._contexts.flags.values]}),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,t._conversationId=this._conversationId,gt(t,qn(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&zn(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}setConversationId(t){return this._conversationId=t||void 0,this._notifyScopeListeners(),this}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this.setTags({[t]:n})}setAttributes(t){return this._attributes={...this._attributes,...t},this._notifyScopeListeners(),this}setAttribute(t,n){return this.setAttributes({[t]:n})}removeAttribute(t){return t in this._attributes&&(delete this._attributes[t],this._notifyScopeListeners()),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const n=typeof t=="function"?t(this):t,r=n instanceof _t?n.getScopeData():Ve(n)?t:void 0,{tags:s,attributes:o,extra:i,user:a,contexts:c,level:u,fingerprint:d=[],propagationContext:l,conversationId:f}=r||{};return this._tags={...this._tags,...s},this._attributes={...this._attributes,...o},this._extra={...this._extra,...i},this._contexts={...this._contexts,...c},a&&Object.keys(a).length&&(this._user=a),u&&(this._level=u),d.length&&(this._fingerprint=d),l&&(this._propagationContext=l),f&&(this._conversationId=f),this}clear(){return this._breadcrumbs=[],this._tags={},this._attributes={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,this._conversationId=void 0,gt(this,void 0),this._attachments=[],this.setPropagationContext({traceId:mt(),sampleRand:It()}),this._notifyScopeListeners(),this}addBreadcrumb(t,n){var o;const r=typeof n=="number"?n:ym;if(r<=0)return this;const s={timestamp:kn(),...t,message:t.message?Rr(t.message,2048):t.message};return this._breadcrumbs.push(s),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),(o=this._client)==null||o.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,attributes:this._attributes,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:qn(this),conversationId:this._conversationId}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=Ur(this._sdkProcessingMetadata,t,2),this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){const r=(n==null?void 0:n.event_id)||Ie();if(!this._client)return C&&_.warn("No client configured on scope - will not capture exception!"),r;const s=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:s,...n,event_id:r},this),r}captureMessage(t,n,r){var i;const s=(r==null?void 0:r.event_id)||Ie();if(!this._client)return C&&_.warn("No client configured on scope - will not capture message!"),s;const o=(i=r==null?void 0:r.syntheticException)!=null?i:new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:o,...r,event_id:s},this),s}captureEvent(t,n){const r=(n==null?void 0:n.event_id)||Ie();return this._client?(this._client.captureEvent(t,{...n,event_id:r},this),r):(C&&_.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}function Sm(){return rr("defaultCurrentScope",()=>new _t)}function bm(){return rr("defaultIsolationScope",()=>new _t)}class Em{constructor(t,n){let r;t?r=t:r=new _t;let s;n?s=n:s=new _t,this._stack=[{scope:r}],this._isolationScope=s}withScope(t){const n=this._pushScope();let r;try{r=t(n)}catch(s){throw this._popScope(),s}return or(r)?r.then(s=>(this._popScope(),s),s=>{throw this._popScope(),s}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function Gn(){const e=Ot(),t=Fr(e);return t.stack=t.stack||new Em(Sm(),bm())}function Tm(e){return Gn().withScope(e)}function vm(e,t){const n=Gn();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function jc(e){return Gn().withScope(()=>e(Gn().getIsolationScope()))}function Im(){return{withIsolationScope:jc,withScope:Tm,withSetScope:vm,withSetIsolationScope:(e,t)=>jc(t),getCurrentScope:()=>Gn().getScope(),getIsolationScope:()=>Gn().getIsolationScope()}}function tn(e){const t=Fr(e);return t.acs?t.acs:Im()}function G(){const e=Ot();return tn(e).getCurrentScope()}function ve(){const e=Ot();return tn(e).getIsolationScope()}function Tr(){return rr("globalScope",()=>new _t)}function ut(...e){const t=Ot(),n=tn(t);if(e.length===2){const[r,s]=e;return r?n.withSetScope(r,s):n.withScope(s)}return n.withScope(e[0])}function gA(...e){const t=Ot(),n=tn(t);if(e.length===2){const[r,s]=e;return r?n.withSetIsolationScope(r,s):n.withIsolationScope(s)}return n.withIsolationScope(e[0])}function x(){return G().getClient()}function kd(e){const t=e.getPropagationContext(),{traceId:n,parentSpanId:r,propagationSpanId:s}=t,o={trace_id:n,span_id:s||wt()};return r&&(o.parent_span_id=r),o}const Ze="sentry.source",va="sentry.sample_rate",Cd="sentry.previous_trace_sample_rate",we="sentry.op",oe="sentry.origin",Ar="sentry.idle_span_finish_reason",Hr="sentry.measurement_unit",Wr="sentry.measurement_value",Pi="sentry.custom_span_name",Ia="sentry.profile_id",ir="sentry.exclusive_time",wm="http.request.method",km="url.full",Cm="sentry.link.type",Rm="gen_ai.conversation.id",Am=0,vo=1,ee=2;function xm(e){if(e<400&&e>=100)return{code:vo};if(e>=400&&e<500)switch(e){case 401:return{code:ee,message:"unauthenticated"};case 403:return{code:ee,message:"permission_denied"};case 404:return{code:ee,message:"not_found"};case 409:return{code:ee,message:"already_exists"};case 413:return{code:ee,message:"failed_precondition"};case 429:return{code:ee,message:"resource_exhausted"};case 499:return{code:ee,message:"cancelled"};default:return{code:ee,message:"invalid_argument"}}if(e>=500&&e<600)switch(e){case 501:return{code:ee,message:"unimplemented"};case 503:return{code:ee,message:"unavailable"};case 504:return{code:ee,message:"deadline_exceeded"};default:return{code:ee,message:"internal_error"}}return{code:ee,message:"internal_error"}}function Gs(e,t){e.setAttribute("http.response.status_code",t);const n=xm(t);n.message!=="unknown_error"&&e.setStatus(n)}const Rd="_sentryScope",Ad="_sentryIsolationScope";function Mm(e){try{const t=F.WeakRef;if(typeof t=="function")return new t(e)}catch{}return e}function Nm(e){if(e){if(typeof e=="object"&&"deref"in e&&typeof e.deref=="function")try{return e.deref()}catch{return}return e}}function Om(e,t,n){e&&(Pe(e,Ad,Mm(n)),Pe(e,Rd,t))}function Vs(e){const t=e;return{scope:t[Rd],isolationScope:Nm(t[Ad])}}const wa="sentry-",Lm=/^sentry-/,Pm=8192;function ka(e){const t=Dm(e);if(!t)return;const n=Object.entries(t).reduce((r,[s,o])=>{if(s.match(Lm)){const i=s.slice(wa.length);r[i]=o}return r},{});if(Object.keys(n).length>0)return n}function xd(e){if(!e)return;const t=Object.entries(e).reduce((n,[r,s])=>(s&&(n[`${wa}${r}`]=s),n),{});return Fm(t)}function Dm(e){if(!(!e||!it(e)&&!Array.isArray(e)))return Array.isArray(e)?e.reduce((t,n)=>{const r=zc(n);return Object.entries(r).forEach(([s,o])=>{t[s]=o}),t},{}):zc(e)}function zc(e){return e.split(",").map(t=>{const n=t.indexOf("=");if(n===-1)return[];const r=t.slice(0,n),s=t.slice(n+1);return[r,s].map(o=>{try{return decodeURIComponent(o.trim())}catch{return}})}).reduce((t,[n,r])=>(n&&r&&(t[n]=r),t),{})}function Fm(e){if(Object.keys(e).length!==0)return Object.entries(e).reduce((t,[n,r],s)=>{const o=`${encodeURIComponent(n)}=${encodeURIComponent(r)}`,i=s===0?o:`${t},${o}`;return i.length>Pm?(C&&_.warn(`Not adding key: ${n} with val: ${r} to baggage header due to exceeding baggage size limits.`),t):i},"")}const $m=/^o(\d+)\./,Bm=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)((?:\[[:.%\w]+\]|[\w.-]+))(?::(\d+))?\/(.+)/;function Um(e){return e==="http"||e==="https"}function Lt(e,t=!1){const{host:n,path:r,pass:s,port:o,projectId:i,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&s?`:${s}`:""}@${n}${o?`:${o}`:""}/${r&&`${r}/`}${i}`}function Md(e){const t=Bm.exec(e);if(!t){Qt(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}const[n,r,s="",o="",i="",a=""]=t.slice(1);let c="",u=a;const d=u.split("/");if(d.length>1&&(c=d.slice(0,-1).join("/"),u=d.pop()),u){const l=u.match(/^\d+/);l&&(u=l[0])}return Nd({host:o,pass:s,path:c,projectId:u,port:i,protocol:n,publicKey:r})}function Nd(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function Hm(e){if(!C)return!0;const{port:t,projectId:n,protocol:r}=e;return["protocol","publicKey","host","projectId"].find(i=>e[i]?!1:(_.error(`Invalid Sentry Dsn: ${i} missing`),!0))?!1:n.match(/^\d+$/)?Um(r)?t&&isNaN(parseInt(t,10))?(_.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(_.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(_.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function Wm(e){const t=e.match($m);return t==null?void 0:t[1]}function Od(e){const t=e.getOptions(),{host:n}=e.getDsn()||{};let r;return t.orgId?r=String(t.orgId):n&&(r=Wm(n)),r}function Ld(e){const t=typeof e=="string"?Md(e):Nd(e);if(!(!t||!Hm(t)))return t}function mn(e){if(typeof e=="boolean")return Number(e);const t=typeof e=="string"?parseFloat(e):e;if(!(typeof t!="number"||isNaN(t)||t<0||t>1))return t}const Pd=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function jm(e){if(!e)return;const t=e.match(Pd);if(!t)return;let n;return t[3]==="1"?n=!0:t[3]==="0"&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function Dd(e,t){const n=jm(e),r=ka(t);if(!(n!=null&&n.traceId))return{traceId:mt(),sampleRand:It()};const s=zm(n,r);r&&(r.sample_rand=s.toString());const{traceId:o,parentSpanId:i,parentSampled:a}=n;return{traceId:o,parentSpanId:i,sampled:a,dsc:r||{},sampleRand:s}}function Fd(e=mt(),t=wt(),n){let r="";return n!==void 0&&(r=n?"-1":"-0"),`${e}-${t}${r}`}function $d(e=mt(),t=wt(),n){return`00-${e}-${t}-${n?"01":"00"}`}function zm(e,t){const n=mn(t==null?void 0:t.sample_rand);if(n!==void 0)return n;const r=mn(t==null?void 0:t.sample_rate);return r&&(e==null?void 0:e.parentSampled)!==void 0?e.parentSampled?It()*r:r+It()*(1-r):It()}function qm(e,t){const n=Od(e);return t&&n&&t!==n?(_.log(`Won't continue trace because org IDs don't match (incoming baggage: ${t}, SDK options: ${n})`),!1):(e.getOptions().strictTraceContinuation||!1)&&(t&&!n||!t&&n)?(_.log(`Starting a new trace because strict trace continuation is enabled but one org ID is missing (incoming baggage: ${t}, Sentry client: ${n})`),!1):!0}const Bd=0,Ca=1;let qc=!1;function Gm(e){const{spanId:t,traceId:n}=e.spanContext(),{data:r,op:s,parent_span_id:o,status:i,origin:a,links:c}=q(e);return{parent_span_id:o,span_id:t,trace_id:n,data:r,op:s,status:i,origin:a,links:c}}function Ud(e){const{spanId:t,traceId:n,isRemote:r}=e.spanContext(),s=r?t:q(e).parent_span_id,o=Vs(e).scope,i=r?(o==null?void 0:o.getPropagationContext().propagationSpanId)||wt():t;return{parent_span_id:s,span_id:i,trace_id:n}}function Vm(e){const{traceId:t,spanId:n}=e.spanContext(),r=nn(e);return Fd(t,n,r)}function Jm(e){const{traceId:t,spanId:n}=e.spanContext(),r=nn(e);return $d(t,n,r)}function Hd(e){if(e&&e.length>0)return e.map(({context:{spanId:t,traceId:n,traceFlags:r,...s},attributes:o})=>({span_id:t,trace_id:n,sampled:r===Ca,attributes:o,...s}))}function fn(e){return typeof e=="number"?Gc(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?Gc(e.getTime()):me()}function Gc(e){return e>9999999999?e/1e3:e}function q(e){var r;if(Km(e))return e.getSpanJSON();const{spanId:t,traceId:n}=e.spanContext();if(Ym(e)){const{attributes:s,startTime:o,name:i,endTime:a,status:c,links:u}=e,d="parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?(r=e.parentSpanContext)==null?void 0:r.spanId:void 0;return{span_id:t,trace_id:n,data:s,description:i,parent_span_id:d,start_timestamp:fn(o),timestamp:fn(a)||void 0,status:Wd(c),op:s[we],origin:s[oe],links:Hd(u)}}return{span_id:t,trace_id:n,start_timestamp:0,data:{}}}function Ym(e){const t=e;return!!t.attributes&&!!t.startTime&&!!t.name&&!!t.endTime&&!!t.status}function Km(e){return typeof e.getSpanJSON=="function"}function nn(e){const{traceFlags:t}=e.spanContext();return t===Ca}function Wd(e){if(!(!e||e.code===Am))return e.code===vo?"ok":e.message||"internal_error"}const pn="_sentryChildSpans",Di="_sentryRootSpan";function jd(e,t){const n=e[Di]||e;Pe(t,Di,n),e[pn]?e[pn].add(t):Pe(e,pn,new Set([t]))}function Xm(e,t){e[pn]&&e[pn].delete(t)}function ks(e){const t=new Set;function n(r){if(!t.has(r)&&nn(r)){t.add(r);const s=r[pn]?Array.from(r[pn]):[];for(const o of s)n(o)}}return n(e),Array.from(t)}function Ee(e){return e[Di]||e}function Te(){const e=Ot(),t=tn(e);return t.getActiveSpan?t.getActiveSpan():qn(G())}function Fi(){qc||(Qt(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly or use `ignoreSpans`.")}),qc=!0)}function _A(e,t){e.updateName(t),e.setAttributes({[Ze]:"custom",[Pi]:t})}let Vc=!1;function Qm(){if(Vc)return;function e(){const t=Te(),n=t&&Ee(t);if(n){const r="internal_error";C&&_.log(`[Tracing] Root span: ${r} -> Global error occurred`),n.setStatus({code:ee,message:r})}}e.tag="sentry_tracingErrorCallback",Vc=!0,gd(e),_d(e)}function tt(e){var n;if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const t=e||((n=x())==null?void 0:n.getOptions());return!!t&&(t.tracesSampleRate!=null||!!t.tracesSampler)}function Jc(e){_.log(`Ignoring span ${e.op} - ${e.description} because it matches \`ignoreSpans\`.`)}function Js(e,t){if(!(t!=null&&t.length)||!e.description)return!1;for(const n of t){if(eg(n)){if(ws(e.description,n))return C&&Jc(e),!0;continue}if(!n.name&&!n.op)continue;const r=n.name?ws(e.description,n.name):!0,s=n.op?e.op&&ws(e.op,n.op):!0;if(r&&s)return C&&Jc(e),!0}return!1}function Zm(e,t){const n=t.parent_span_id,r=t.span_id;if(n)for(const s of e)s.parent_span_id===r&&(s.parent_span_id=n)}function eg(e){return typeof e=="string"||e instanceof RegExp}const Io="production",zd="_frozenDsc";function Cs(e,t){Pe(e,zd,t)}function qd(e,t){const n=t.getOptions(),{publicKey:r}=t.getDsn()||{},s={environment:n.environment||Io,release:n.release,public_key:r,trace_id:e,org_id:Od(t)};return t.emit("createDsc",s),s}function Ra(e,t){const n=t.getPropagationContext();return n.dsc||qd(n.traceId,e)}function ct(e){var h,m,g,y;const t=x();if(!t)return{};const n=Ee(e),r=q(n),s=r.data,o=n.spanContext().traceState,i=(m=(h=o==null?void 0:o.get("sentry.sample_rate"))!=null?h:s[va])!=null?m:s[Cd];function a(S){return(typeof i=="number"||typeof i=="string")&&(S.sample_rate=`${i}`),S}const c=n[zd];if(c)return a(c);const u=o==null?void 0:o.get("sentry.dsc"),d=u&&ka(u);if(d)return a(d);const l=qd(e.spanContext().traceId,t),f=s[Ze],p=r.description;return f!=="url"&&p&&(l.transaction=p),tt()&&(l.sampled=String(nn(n)),l.sample_rand=(y=o==null?void 0:o.get("sentry.sample_rand"))!=null?y:(g=Vs(n).scope)==null?void 0:g.getPropagationContext().sampleRand.toString()),a(l),t.emit("createDsc",l,n),l}function yA(e){const t=ct(e);return xd(t)}class xt{constructor(t={}){this._traceId=t.traceId||mt(),this._spanId=t.spanId||wt()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:Bd}}end(t){}setAttribute(t,n){return this}setAttributes(t){return this}setStatus(t){return this}updateName(t){return this}isRecording(){return!1}addEvent(t,n,r){return this}addLink(t){return this}addLinks(t){return this}recordException(t,n){}}function ze(e,t=100,n=1/0){try{return $i("",e,t,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function Gd(e,t=3,n=100*1024){const r=ze(e,t);return sg(r)>n?Gd(e,t-1,n):r}function $i(e,t,n=1/0,r=1/0,s=og()){const[o,i]=s;if(t==null||["boolean","string"].includes(typeof t)||typeof t=="number"&&Number.isFinite(t))return t;const a=tg(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const c=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(c===0)return a.replace("object ","");if(o(t))return"[Circular ~]";const u=t;if(u&&typeof u.toJSON=="function")try{const p=u.toJSON();return $i("",p,c-1,r,s)}catch{}const d=Array.isArray(t)?[]:{};let l=0;const f=vd(t);for(const p in f){if(!Object.prototype.hasOwnProperty.call(f,p))continue;if(l>=r){d[p]="[MaxProperties ~]";break}const h=f[p];d[p]=$i(p,h,c-1,r,s),l++}return i(t),d}function tg(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(bd(t))return md(t);if(om(t))return"[SyntheticEvent]";if(typeof t=="number"&&!Number.isFinite(t))return`[${t}]`;if(typeof t=="function")return`[Function: ${Ct(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;const n=ng(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function ng(e){const t=Object.getPrototypeOf(e);return t!=null&&t.constructor?t.constructor.name:"null prototype"}function rg(e){return~-encodeURI(e).split(/%..|./).length}function sg(e){return rg(JSON.stringify(e))}function og(){const e=new WeakSet;function t(r){return e.has(r)?!0:(e.add(r),!1)}function n(r){e.delete(r)}return[t,n]}function lt(e,t=[]){return[e,t]}function ig(e,t){const[n,r]=e;return[n,[...r,t]]}function gn(e,t){const n=e[1];for(const r of n){const s=r[0].type;if(t(r,s))return!0}return!1}function Bi(e,t){return gn(e,(n,r)=>t.includes(r))}function Ys(e){const t=Fr(F);return t.encodePolyfill?t.encodePolyfill(e):new TextEncoder().encode(e)}function ag(e){const t=Fr(F);return t.decodePolyfill?t.decodePolyfill(e):new TextDecoder().decode(e)}function Ks(e){const[t,n]=e;let r=JSON.stringify(t);function s(o){typeof r=="string"?r=typeof o=="string"?r+o:[Ys(r),o]:r.push(typeof o=="string"?Ys(o):o)}for(const o of n){const[i,a]=o;if(s(`
${JSON.stringify(i)}
`),typeof a=="string"||a instanceof Uint8Array)s(a);else{let c;try{c=JSON.stringify(a)}catch{c=JSON.stringify(ze(a))}s(c)}}return typeof r=="string"?r:cg(r)}function cg(e){const t=e.reduce((s,o)=>s+o.length,0),n=new Uint8Array(t);let r=0;for(const s of e)n.set(s,r),r+=s.length;return n}function ug(e){let t=typeof e=="string"?Ys(e):e;function n(i){const a=t.subarray(0,i);return t=t.subarray(i+1),a}function r(){let i=t.indexOf(10);return i<0&&(i=t.length),JSON.parse(ag(n(i)))}const s=r(),o=[];for(;t.length;){const i=r(),a=typeof i.length=="number"?i.length:void 0;o.push([i,a?n(a):r()])}return[s,o]}function lg(e){return[{type:"span"},e]}function dg(e){const t=typeof e.data=="string"?Ys(e.data):e.data;return[{type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType},t]}const fg={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item",metric:"metric",trace_metric:"metric"};function Yc(e){return fg[e]}function wo(e){if(!(e!=null&&e.sdk))return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function Vd(e,t,n,r){var o;const s=(o=e.sdkProcessingMetadata)==null?void 0:o.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:Lt(r)},...s&&{trace:s}}}function pg(e,t){var r,s,o,i;if(!t)return e;const n=e.sdk||{};return e.sdk={...n,name:n.name||t.name,version:n.version||t.version,integrations:[...((r=e.sdk)==null?void 0:r.integrations)||[],...t.integrations||[]],packages:[...((s=e.sdk)==null?void 0:s.packages)||[],...t.packages||[]],settings:(o=e.sdk)!=null&&o.settings||t.settings?{...(i=e.sdk)==null?void 0:i.settings,...t.settings}:void 0},e}function hg(e,t,n,r){const s=wo(n),o={sent_at:new Date().toISOString(),...s&&{sdk:s},...!!r&&t&&{dsn:Lt(t)}},i="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return lt(o,[i])}function mg(e,t,n,r){const s=wo(n),o=e.type&&e.type!=="replay_event"?e.type:"event";pg(e,n==null?void 0:n.sdk);const i=Vd(e,s,r,t);return delete e.sdkProcessingMetadata,lt(i,[[{type:o},e]])}function gg(e,t){function n(p){return!!p.trace_id&&!!p.public_key}const r=ct(e[0]),s=t==null?void 0:t.getDsn(),o=t==null?void 0:t.getOptions().tunnel,i={sent_at:new Date().toISOString(),...n(r)&&{trace:r},...!!o&&s&&{dsn:Lt(s)}},{beforeSendSpan:a,ignoreSpans:c}=(t==null?void 0:t.getOptions())||{},u=c!=null&&c.length?e.filter(p=>!Js(q(p),c)):e,d=e.length-u.length;d&&(t==null||t.recordDroppedEvent("before_send","span",d));const l=a?p=>{const h=q(p),m=a(h);return m||(Fi(),h)}:q,f=[];for(const p of u){const h=l(p);h&&f.push(lg(h))}return lt(i,f)}function _g(e){if(!C)return;const{description:t="< unknown name >",op:n="< unknown op >",parent_span_id:r}=q(e),{spanId:s}=e.spanContext(),o=nn(e),i=Ee(e),a=i===e,c=`[Tracing] Starting ${o?"sampled":"unsampled"} ${a?"root ":""}span`,u=[`op: ${n}`,`name: ${t}`,`ID: ${s}`];if(r&&u.push(`parent ID: ${r}`),!a){const{op:d,description:l}=q(i);u.push(`root ID: ${i.spanContext().spanId}`),d&&u.push(`root op: ${d}`),l&&u.push(`root description: ${l}`)}_.log(`${c}
  ${u.join(`
  `)}`)}function yg(e){if(!C)return;const{description:t="< unknown name >",op:n="< unknown op >"}=q(e),{spanId:r}=e.spanContext(),o=Ee(e)===e,i=`[Tracing] Finishing "${n}" ${o?"root ":""}span "${t}" with ID ${r}`;_.log(i)}function Sg(e,t,n,r=Te()){const s=r&&Ee(r);s&&(C&&_.log(`[Measurement] Setting measurement on root span: ${e} = ${t} ${n}`),s.addEvent(e,{[Wr]:t,[Hr]:n}))}function Kc(e){if(!e||e.length===0)return;const t={};return e.forEach(n=>{const r=n.attributes||{},s=r[Hr],o=r[Wr];typeof s=="string"&&typeof o=="number"&&(t[n.name]={value:o,unit:s})}),t}const Xc=1e3;class ko{constructor(t={}){this._traceId=t.traceId||mt(),this._spanId=t.spanId||wt(),this._startTime=t.startTimestamp||me(),this._links=t.links,this._attributes={},this.setAttributes({[oe]:"manual",[we]:t.op,...t.attributes}),this._name=t.name,t.parentSpanId&&(this._parentSpanId=t.parentSpanId),"sampled"in t&&(this._sampled=t.sampled),t.endTimestamp&&(this._endTime=t.endTimestamp),this._events=[],this._isStandaloneSpan=t.isStandalone,this._endTime&&this._onSpanEnded()}addLink(t){return this._links?this._links.push(t):this._links=[t],this}addLinks(t){return this._links?this._links.push(...t):this._links=t,this}recordException(t,n){}spanContext(){const{_spanId:t,_traceId:n,_sampled:r}=this;return{spanId:t,traceId:n,traceFlags:r?Ca:Bd}}setAttribute(t,n){return n===void 0?delete this._attributes[t]:this._attributes[t]=n,this}setAttributes(t){return Object.keys(t).forEach(n=>this.setAttribute(n,t[n])),this}updateStartTime(t){this._startTime=fn(t)}setStatus(t){return this._status=t,this}updateName(t){return this._name=t,this.setAttribute(Ze,"custom"),this}end(t){this._endTime||(this._endTime=fn(t),yg(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[we],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:Wd(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[oe],profile_id:this._attributes[Ia],exclusive_time:this._attributes[ir],measurements:Kc(this._events),is_segment:this._isStandaloneSpan&&Ee(this)===this||void 0,segment_id:this._isStandaloneSpan?Ee(this).spanContext().spanId:void 0,links:Hd(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(t,n,r){C&&_.log("[Tracing] Adding an event to span:",t);const s=Qc(n)?n:r||me(),o=Qc(n)?{}:n||{},i={name:t,time:fn(s),attributes:o};return this._events.push(i),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const t=x();if(t&&t.emit("spanEnd",this),!(this._isStandaloneSpan||this===Ee(this)))return;if(this._isStandaloneSpan){this._sampled?Eg(gg([this],t)):(C&&_.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),t&&t.recordDroppedEvent("sample_rate","span"));return}const r=this._convertSpanToTransaction();r&&(Vs(this).scope||G()).captureEvent(r)}_convertSpanToTransaction(){var d;if(!Zc(q(this)))return;this._name||(C&&_.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:t,isolationScope:n}=Vs(this),r=(d=t==null?void 0:t.getScopeData().sdkProcessingMetadata)==null?void 0:d.normalizedRequest;if(this._sampled!==!0)return;const o=ks(this).filter(l=>l!==this&&!bg(l)).map(l=>q(l)).filter(Zc),i=this._attributes[Ze];delete this._attributes[Pi],o.forEach(l=>{delete l.data[Pi]});const a={contexts:{trace:Gm(this)},spans:o.length>Xc?o.sort((l,f)=>l.start_timestamp-f.start_timestamp).slice(0,Xc):o,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:t,capturedSpanIsolationScope:n,dynamicSamplingContext:ct(this)},request:r,...i&&{transaction_info:{source:i}}},c=Kc(this._events);return c&&Object.keys(c).length&&(C&&_.log("[Measurements] Adding measurements to transaction event",JSON.stringify(c,void 0,2)),a.measurements=c),a}}function Qc(e){return e&&typeof e=="number"||e instanceof Date||Array.isArray(e)}function Zc(e){return!!e.start_timestamp&&!!e.timestamp&&!!e.span_id&&!!e.trace_id}function bg(e){return e instanceof ko&&e.isStandaloneSpan()}function Eg(e){const t=x();if(!t)return;const n=e[1];if(!n||n.length===0){t.recordDroppedEvent("before_send","span");return}t.sendEnvelope(e)}function Co(e,t,n=()=>{},r=()=>{}){let s;try{s=e()}catch(o){throw t(o),n(),o}return Tg(s,t,n,r)}function Tg(e,t,n,r){return or(e)?e.then(s=>(n(),r(s),s),s=>{throw t(s),n(),s}):(n(),r(e),e)}function vg(e,t,n){if(!tt(e))return[!1];let r,s;typeof e.tracesSampler=="function"?(s=e.tracesSampler({...t,inheritOrSampleWith:a=>typeof t.parentSampleRate=="number"?t.parentSampleRate:typeof t.parentSampled=="boolean"?Number(t.parentSampled):a}),r=!0):t.parentSampled!==void 0?s=t.parentSampled:typeof e.tracesSampleRate<"u"&&(s=e.tracesSampleRate,r=!0);const o=mn(s);if(o===void 0)return C&&_.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(s)} of type ${JSON.stringify(typeof s)}.`),[!1];if(!o)return C&&_.log(`[Tracing] Discarding transaction because ${typeof e.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,o,r];const i=n<o;return i||C&&_.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(s)})`),[i,o,r]}const Xs="__SENTRY_SUPPRESS_TRACING__";function rn(e,t){const n=jr();if(n.startSpan)return n.startSpan(e,t);const r=xa(e),{forceTransaction:s,parentSpan:o,scope:i}=e,a=i==null?void 0:i.clone();return ut(a,()=>Jd(o)(()=>{const u=G(),d=Ma(u,o),f=e.onlyIfParent&&!d?new xt:Aa({parentSpan:d,spanArguments:r,forceTransaction:s,scope:u});return gt(u,f),Co(()=>t(f),()=>{const{status:p}=q(f);f.isRecording()&&(!p||p==="ok")&&f.setStatus({code:ee,message:"internal_error"})},()=>{f.end()})}))}function Wt(e,t){const n=jr();if(n.startSpanManual)return n.startSpanManual(e,t);const r=xa(e),{forceTransaction:s,parentSpan:o,scope:i}=e,a=i==null?void 0:i.clone();return ut(a,()=>Jd(o)(()=>{const u=G(),d=Ma(u,o),f=e.onlyIfParent&&!d?new xt:Aa({parentSpan:d,spanArguments:r,forceTransaction:s,scope:u});return gt(u,f),Co(()=>t(f,()=>f.end()),()=>{const{status:p}=q(f);f.isRecording()&&(!p||p==="ok")&&f.setStatus({code:ee,message:"internal_error"})})}))}function ar(e){const t=jr();if(t.startInactiveSpan)return t.startInactiveSpan(e);const n=xa(e),{forceTransaction:r,parentSpan:s}=e;return(e.scope?i=>ut(e.scope,i):s!==void 0?i=>Ro(s,i):i=>i())(()=>{const i=G(),a=Ma(i,s);return e.onlyIfParent&&!a?new xt:Aa({parentSpan:a,spanArguments:n,forceTransaction:r,scope:i})})}const SA=(e,t)=>{const n=Ot(),r=tn(n);if(r.continueTrace)return r.continueTrace(e,t);const{sentryTrace:s,baggage:o}=e,i=x(),a=ka(o);return i&&!qm(i,a==null?void 0:a.org_id)?wg(t):ut(c=>{const u=Dd(s,o);return c.setPropagationContext(u),gt(c,void 0),t()})};function Ro(e,t){const n=jr();return n.withActiveSpan?n.withActiveSpan(e,t):ut(r=>(gt(r,e||void 0),t(r)))}function Ig(e){const t=jr();return t.suppressTracing?t.suppressTracing(e):ut(n=>{n.setSDKProcessingMetadata({[Xs]:!0});const r=e();return n.setSDKProcessingMetadata({[Xs]:void 0}),r})}function wg(e){return ut(t=>(t.setPropagationContext({traceId:mt(),sampleRand:It()}),C&&_.log(`Starting a new trace with id ${t.getPropagationContext().traceId}`),Ro(null,e)))}function Aa({parentSpan:e,spanArguments:t,forceTransaction:n,scope:r}){if(!tt()){const i=new xt;if(n||!e){const a={sampled:"false",sample_rate:"0",transaction:t.name,...ct(i)};Cs(i,a)}return i}const s=ve();let o;if(e&&!n)o=kg(e,r,t),jd(e,o);else if(e){const i=ct(e),{traceId:a,spanId:c}=e.spanContext(),u=nn(e);o=eu({traceId:a,parentSpanId:c,...t},r,u),Cs(o,i)}else{const{traceId:i,dsc:a,parentSpanId:c,sampled:u}={...s.getPropagationContext(),...r.getPropagationContext()};o=eu({traceId:i,parentSpanId:c,...t},r,u),a&&Cs(o,a)}return _g(o),Om(o,r,s),o}function xa(e){const n={isStandalone:(e.experimental||{}).standalone,...e};if(e.startTime){const r={...n};return r.startTimestamp=fn(e.startTime),delete r.startTime,r}return n}function jr(){const e=Ot();return tn(e)}function eu(e,t,n){var h,m;const r=x(),s=(r==null?void 0:r.getOptions())||{},{name:o=""}=e,i={spanAttributes:{...e.attributes},spanName:o,parentSampled:n};r==null||r.emit("beforeSampling",i,{decision:!1});const a=(h=i.parentSampled)!=null?h:n,c=i.spanAttributes,u=t.getPropagationContext(),[d,l,f]=t.getScopeData().sdkProcessingMetadata[Xs]?[!1]:vg(s,{name:o,parentSampled:a,attributes:c,parentSampleRate:mn((m=u.dsc)==null?void 0:m.sample_rate)},u.sampleRand),p=new ko({...e,attributes:{[Ze]:"custom",[va]:l!==void 0&&f?l:void 0,...c},sampled:d});return!d&&r&&(C&&_.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),r.recordDroppedEvent("sample_rate","transaction")),r&&r.emit("spanStart",p),p}function kg(e,t,n){const{spanId:r,traceId:s}=e.spanContext(),o=t.getScopeData().sdkProcessingMetadata[Xs]?!1:nn(e),i=o?new ko({...n,parentSpanId:r,traceId:s,sampled:o}):new xt({traceId:s});jd(e,i);const a=x();return a&&(a.emit("spanStart",i),n.endTimestamp&&a.emit("spanEnd",i)),i}function Ma(e,t){if(t)return t;if(t===null)return;const n=qn(e);if(!n)return;const r=x();return(r?r.getOptions():{}).parentSpanIsAlwaysRootSpan?Ee(n):n}function Jd(e){return e!==void 0?t=>Ro(e,t):t=>t()}const Rs={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3},Cg="heartbeatFailed",Rg="idleTimeout",Ag="finalTimeout",xg="externalFinish";function Yd(e,t={}){const n=new Map;let r=!1,s,o=xg,i=!t.disableAutoFinish;const a=[],{idleTimeout:c=Rs.idleTimeout,finalTimeout:u=Rs.finalTimeout,childSpanTimeout:d=Rs.childSpanTimeout,beforeSpanEnd:l,trimIdleSpanEndTimestamp:f=!0}=t,p=x();if(!p||!tt()){const b=new xt,A={sample_rate:"0",sampled:"false",...ct(b)};return Cs(b,A),b}const h=G(),m=Te(),g=Mg(e);g.end=new Proxy(g.end,{apply(b,A,$){if(l&&l(g),A instanceof xt)return;const[T,...M]=$,R=T||me(),N=fn(R),O=ks(g).filter(k=>k!==g),V=q(g);if(!O.length||!f)return L(N),Reflect.apply(b,A,[N,...M]);const K=p.getOptions().ignoreSpans,X=O==null?void 0:O.reduce((k,z)=>{const se=q(z);return!se.timestamp||K&&Js(se,K)?k:k?Math.max(k,se.timestamp):se.timestamp},void 0),v=V.start_timestamp,W=Math.min(v?v+u/1e3:1/0,Math.max(v||-1/0,Math.min(N,X||1/0)));return L(W),Reflect.apply(b,A,[W,...M])}});function y(){s&&(clearTimeout(s),s=void 0)}function S(b){y(),s=setTimeout(()=>{!r&&n.size===0&&i&&(o=Rg,g.end(b))},c)}function w(b){s=setTimeout(()=>{!r&&i&&(o=Cg,g.end(b))},d)}function E(b){y(),n.set(b,!0);const A=me();w(A+d/1e3)}function D(b){if(n.has(b)&&n.delete(b),n.size===0){const A=me();S(A+c/1e3)}}function L(b){r=!0,n.clear(),a.forEach(O=>O()),gt(h,m);const A=q(g),{start_timestamp:$}=A;if(!$)return;A.data[Ar]||g.setAttribute(Ar,o);const M=A.status;(!M||M==="unknown")&&g.setStatus({code:vo}),_.log(`[Tracing] Idle span "${A.op}" finished`);const R=ks(g).filter(O=>O!==g);let N=0;R.forEach(O=>{O.isRecording()&&(O.setStatus({code:ee,message:"cancelled"}),O.end(b),C&&_.log("[Tracing] Cancelling span since span ended early",JSON.stringify(O,void 0,2)));const V=q(O),{timestamp:K=0,start_timestamp:X=0}=V,v=X<=b,W=(u+c)/1e3,k=K-X<=W;if(C){const z=JSON.stringify(O,void 0,2);v?k||_.log("[Tracing] Discarding span since it finished after idle span final timeout",z):_.log("[Tracing] Discarding span since it happened after idle span was finished",z)}(!k||!v)&&(Xm(g,O),N++)}),N>0&&g.setAttribute("sentry.idle_span_discarded_spans",N)}return a.push(p.on("spanStart",b=>{if(r||b===g||q(b).timestamp||b instanceof ko&&b.isStandaloneSpan())return;ks(g).includes(b)&&E(b.spanContext().spanId)})),a.push(p.on("spanEnd",b=>{r||D(b.spanContext().spanId)})),a.push(p.on("idleSpanEnableAutoFinish",b=>{b===g&&(i=!0,S(),n.size&&w())})),t.disableAutoFinish||S(),setTimeout(()=>{r||(g.setStatus({code:ee,message:"deadline_exceeded"}),o=Ag,g.end())},u),g}function Mg(e){const t=ar(e);return gt(G(),t),C&&_.log("[Tracing] Started span is an idle span"),t}const ci=0,tu=1,nu=2;function Ao(e){return new xr(t=>{t(e)})}function Na(e){return new xr((t,n)=>{n(e)})}class xr{constructor(t){this._state=ci,this._handlers=[],this._runExecutor(t)}then(t,n){return new xr((r,s)=>{this._handlers.push([!1,o=>{if(!t)r(o);else try{r(t(o))}catch(i){s(i)}},o=>{if(!n)s(o);else try{r(n(o))}catch(i){s(i)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new xr((n,r)=>{let s,o;return this.then(i=>{o=!1,s=i,t&&t()},i=>{o=!0,s=i,t&&t()}).then(()=>{if(o){r(s);return}n(s)})})}_executeHandlers(){if(this._state===ci)return;const t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===tu&&n[1](this._value),this._state===nu&&n[2](this._value),n[0]=!0)})}_runExecutor(t){const n=(o,i)=>{if(this._state===ci){if(or(i)){i.then(r,s);return}this._state=o,this._value=i,this._executeHandlers()}},r=o=>{n(tu,o)},s=o=>{n(nu,o)};try{t(r,s)}catch(o){s(o)}}}function Ng(e,t,n,r=0){try{const s=Ui(t,n,e,r);return or(s)?s:Ao(s)}catch(s){return Na(s)}}function Ui(e,t,n,r){const s=n[r];if(!e||!s)return e;const o=s({...e},t);return C&&o===null&&_.log(`Event processor "${s.id||"?"}" dropped event`),or(o)?o.then(i=>Ui(i,t,n,r+1)):Ui(o,t,n,r+1)}let St,ru,su,$t;function Kd(e){const t=F._sentryDebugIds,n=F._debugIds;if(!t&&!n)return{};const r=t?Object.keys(t):[],s=n?Object.keys(n):[];if($t&&r.length===ru&&s.length===su)return $t;ru=r.length,su=s.length,$t={},St||(St={});const o=(i,a)=>{for(const c of i){const u=a[c],d=St==null?void 0:St[c];if(d&&$t&&u)$t[d[0]]=u,St&&(St[c]=[d[0],u]);else if(u){const l=e(c);for(let f=l.length-1;f>=0;f--){const p=l[f],h=p==null?void 0:p.filename;if(h&&$t&&St){$t[h]=u,St[c]=[h,u];break}}}}};return t&&o(r,t),n&&o(s,n),$t}function Og(e,t){const n=Kd(e);if(!n)return[];const r=[];for(const s of t){const o=Zh(s);o&&n[o]&&r.push({type:"sourcemap",code_file:s,debug_id:n[o]})}return r}function Lg(e,t){const{fingerprint:n,span:r,breadcrumbs:s,sdkProcessingMetadata:o}=t;Pg(e,t),r&&$g(e,r),Bg(e,n),Dg(e,s),Fg(e,o)}function ou(e,t){const{extra:n,tags:r,attributes:s,user:o,contexts:i,level:a,sdkProcessingMetadata:c,breadcrumbs:u,fingerprint:d,eventProcessors:l,attachments:f,propagationContext:p,transactionName:h,span:m}=t;mr(e,"extra",n),mr(e,"tags",r),mr(e,"attributes",s),mr(e,"user",o),mr(e,"contexts",i),e.sdkProcessingMetadata=Ur(e.sdkProcessingMetadata,c,2),a&&(e.level=a),h&&(e.transactionName=h),m&&(e.span=m),u.length&&(e.breadcrumbs=[...e.breadcrumbs,...u]),d.length&&(e.fingerprint=[...e.fingerprint,...d]),l.length&&(e.eventProcessors=[...e.eventProcessors,...l]),f.length&&(e.attachments=[...e.attachments,...f]),e.propagationContext={...e.propagationContext,...p}}function mr(e,t,n){e[t]=Ur(e[t],n,1)}function Oa(e,t){const n=Tr().getScopeData();return e&&ou(n,e.getScopeData()),t&&ou(n,t.getScopeData()),n}function Pg(e,t){const{extra:n,tags:r,user:s,contexts:o,level:i,transactionName:a}=t;Object.keys(n).length&&(e.extra={...n,...e.extra}),Object.keys(r).length&&(e.tags={...r,...e.tags}),Object.keys(s).length&&(e.user={...s,...e.user}),Object.keys(o).length&&(e.contexts={...o,...e.contexts}),i&&(e.level=i),a&&e.type!=="transaction"&&(e.transaction=a)}function Dg(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}function Fg(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function $g(e,t){e.contexts={trace:Ud(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:ct(t),...e.sdkProcessingMetadata};const n=Ee(t),r=q(n).description;r&&!e.transaction&&e.type==="transaction"&&(e.transaction=r)}function Bg(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint.length||delete e.fingerprint}function Xd(e,t,n,r,s,o){const{normalizeDepth:i=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||n.event_id||Ie(),timestamp:t.timestamp||kn()},u=n.integrations||e.integrations.map(g=>g.name);Ug(c,e),jg(c,u),s&&s.emit("applyFrameMetadata",t),t.type===void 0&&Hg(c,e.stackParser);const d=qg(r,n.captureContext);n.mechanism&&At(c,n.mechanism);const l=s?s.getEventProcessors():[],f=Oa(o,d),p=[...n.attachments||[],...f.attachments];p.length&&(n.attachments=p),Lg(c,f);const h=[...l,...f.eventProcessors];return Ng(h,c,n).then(g=>(g&&Wg(g),typeof i=="number"&&i>0?zg(g,i,a):g))}function Ug(e,t){var a,c;const{environment:n,release:r,dist:s,maxValueLength:o}=t;e.environment=e.environment||n||Io,!e.release&&r&&(e.release=r),!e.dist&&s&&(e.dist=s);const i=e.request;i!=null&&i.url&&o&&(i.url=Rr(i.url,o)),o&&((c=(a=e.exception)==null?void 0:a.values)==null||c.forEach(u=>{u.value&&(u.value=Rr(u.value,o))}))}function Hg(e,t){var r,s;const n=Kd(t);(s=(r=e.exception)==null?void 0:r.values)==null||s.forEach(o=>{var i,a;(a=(i=o.stacktrace)==null?void 0:i.frames)==null||a.forEach(c=>{c.filename&&(c.debug_id=n[c.filename])})})}function Wg(e){var r,s;const t={};if((s=(r=e.exception)==null?void 0:r.values)==null||s.forEach(o=>{var i,a;(a=(i=o.stacktrace)==null?void 0:i.frames)==null||a.forEach(c=>{c.debug_id&&(c.abs_path?t[c.abs_path]=c.debug_id:c.filename&&(t[c.filename]=c.debug_id),delete c.debug_id)})}),Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.entries(t).forEach(([o,i])=>{n.push({type:"sourcemap",code_file:o,debug_id:i})})}function jg(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function zg(e,t,n){var s,o;if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(i=>({...i,...i.data&&{data:ze(i.data,t,n)}}))},...e.user&&{user:ze(e.user,t,n)},...e.contexts&&{contexts:ze(e.contexts,t,n)},...e.extra&&{extra:ze(e.extra,t,n)}};return(s=e.contexts)!=null&&s.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=ze(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map(i=>({...i,...i.data&&{data:ze(i.data,t,n)}}))),(o=e.contexts)!=null&&o.flags&&r.contexts&&(r.contexts.flags=ze(e.contexts.flags,3,n)),r}function qg(e,t){if(!t)return e;const n=e?e.clone():new _t;return n.update(t),n}function Gg(e){if(e)return Vg(e)?{captureContext:e}:Yg(e)?{captureContext:e}:e}function Vg(e){return e instanceof _t||typeof e=="function"}const Jg=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function Yg(e){return Object.keys(e).some(t=>Jg.includes(t))}function _e(e,t){return G().captureException(e,Gg(t))}function Kg(e,t){const n=typeof t=="string"?t:void 0,r=typeof t!="string"?{captureContext:t}:void 0;return G().captureMessage(e,n,r)}function zr(e,t){return G().captureEvent(e,t)}function Xg(e,t){ve().setContext(e,t)}function bA(e){ve().setExtras(e)}function EA(e,t){ve().setExtra(e,t)}function TA(e){ve().setTags(e)}function vA(e,t){ve().setTag(e,t)}function IA(e){ve().setUser(e)}function Qg(){return ve().lastEventId()}async function wA(e){const t=x();return t?t.flush(e):(C&&_.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}async function kA(e){const t=x();return t?t.close(e):(C&&_.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}function CA(){return!!x()}function Zg(){const e=x();return(e==null?void 0:e.getOptions().enabled)!==!1&&!!(e!=null&&e.getTransport())}function e_(e){ve().addEventProcessor(e)}function iu(e){const t=ve(),n=G(),{userAgent:r}=F.navigator||{},s=mm({user:n.getUser()||t.getUser(),...r&&{userAgent:r},...e}),o=t.getSession();return(o==null?void 0:o.status)==="ok"&&zn(o,{status:"exited"}),Qd(),t.setSession(s),s}function Qd(){const e=ve(),n=G().getSession()||e.getSession();n&&gm(n),Zd(),e.setSession()}function Zd(){const e=ve(),t=x(),n=e.getSession();n&&t&&t.captureSession(n)}function au(e=!1){if(e){Qd();return}Zd()}const t_="7";function ef(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function n_(e){return`${ef(e)}${e.projectId}/envelope/`}function r_(e,t){const n={sentry_version:t_};return e.publicKey&&(n.sentry_key=e.publicKey),t&&(n.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(n).toString()}function tf(e,t,n){return t||`${n_(e)}?${r_(e,n)}`}function s_(e,t){const n=Ld(e);if(!n)return"";const r=`${ef(n)}embed/error-page/`;let s=`dsn=${Lt(n)}`;for(const o in t)if(o!=="dsn"&&o!=="onClose")if(o==="user"){const i=t.user;if(!i)continue;i.name&&(s+=`&name=${encodeURIComponent(i.name)}`),i.email&&(s+=`&email=${encodeURIComponent(i.email)}`)}else s+=`&${encodeURIComponent(o)}=${encodeURIComponent(t[o])}`;return`${r}?${s}`}const cu=[];function o_(e){const t={};return e.forEach(n=>{const{name:r}=n,s=t[r];s&&!s.isDefaultInstance&&n.isDefaultInstance||(t[r]=n)}),Object.values(t)}function i_(e){const t=e.defaultIntegrations||[],n=e.integrations;t.forEach(s=>{s.isDefaultInstance=!0});let r;if(Array.isArray(n))r=[...t,...n];else if(typeof n=="function"){const s=n(t);r=Array.isArray(s)?s:[s]}else r=t;return o_(r)}function a_(e,t){const n={};return t.forEach(r=>{r&&nf(e,r,n)}),n}function uu(e,t){for(const n of t)n!=null&&n.afterAllSetup&&n.afterAllSetup(e)}function nf(e,t,n){if(n[t.name]){C&&_.log(`Integration skipped because it was already installed: ${t.name}`);return}if(n[t.name]=t,!cu.includes(t.name)&&typeof t.setupOnce=="function"&&(t.setupOnce(),cu.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),typeof t.preprocessEvent=="function"){const r=t.preprocessEvent.bind(t);e.on("preprocessEvent",(s,o)=>r(s,o,e))}if(typeof t.processEvent=="function"){const r=t.processEvent.bind(t),s=Object.assign((o,i)=>r(o,i,e),{id:t.name});e.addEventProcessor(s)}C&&_.log(`Integration installed: ${t.name}`)}function lu(e){const t=x();if(!t){C&&_.warn(`Cannot add integration "${e.name}" because no SDK Client is available.`);return}t.addIntegration(e)}function c_(e){return typeof e=="object"&&e!=null&&!Array.isArray(e)&&Object.keys(e).includes("value")}function u_(e,t){var a;const{value:n,unit:r}=c_(e)?e:{value:e,unit:void 0},s=l_(n),o=r&&typeof r=="string"?{unit:r}:{};if(s)return{...s,...o};if(!t||t==="skip-undefined"&&n===void 0)return;let i="";try{i=(a=JSON.stringify(n))!=null?a:""}catch{}return{value:i,type:"string",...o}}function Qs(e,t=!1){const n={};for(const[r,s]of Object.entries(e!=null?e:{})){const o=u_(s,t);o&&(n[r]=o)}return n}function l_(e){const t=typeof e=="string"?"string":typeof e=="boolean"?"boolean":typeof e=="number"&&!Number.isNaN(e)?Number.isInteger(e)?"integer":"double":null;if(t)return{value:e,type:t}}function rf(e,t){return t?ut(t,()=>{const n=Te(),r=n?Ud(n):kd(t);return[n?ct(n):Ra(e,t),r]}):[void 0,void 0]}const d_={trace:1,debug:5,info:9,warn:13,error:17,fatal:21};function f_(e){return[{type:"log",item_count:e.length,content_type:"application/vnd.sentry.items.log+json"},{items:e}]}function p_(e,t,n,r){const s={};return t!=null&&t.sdk&&(s.sdk={name:t.sdk.name,version:t.sdk.version}),n&&r&&(s.dsn=Lt(r)),lt(s,[f_(e)])}const h_=100;function ft(e,t,n,r=!0){n&&(!e[t]||r)&&(e[t]=n)}function m_(e,t){const n=Pa(),r=sf(e);r===void 0?n.set(e,[t]):r.length>=h_?(La(e,r),n.set(e,[t])):n.set(e,[...r,t])}function Zs(e,t=G(),n=m_){var M,R,N;const r=(M=t==null?void 0:t.getClient())!=null?M:x();if(!r){C&&_.warn("No client available to capture log.");return}const{release:s,environment:o,enableLogs:i=!1,beforeSendLog:a}=r.getOptions();if(!i){C&&_.warn("logging option not enabled, log will not be captured.");return}const[,c]=rf(r,t),u={...e.attributes},{user:{id:d,email:l,username:f},attributes:p={}}=Oa(ve(),t);ft(u,"user.id",d,!1),ft(u,"user.email",l,!1),ft(u,"user.name",f,!1),ft(u,"sentry.release",s),ft(u,"sentry.environment",o);const{name:h,version:m}=(N=(R=r.getSdkMetadata())==null?void 0:R.sdk)!=null?N:{};ft(u,"sentry.sdk.name",h),ft(u,"sentry.sdk.version",m);const g=r.getIntegrationByName("Replay"),y=g==null?void 0:g.getReplayId(!0);ft(u,"sentry.replay_id",y),y&&(g==null?void 0:g.getRecordingMode())==="buffer"&&ft(u,"sentry._internal.replay_is_buffering",!0);const S=e.message;if(Eo(S)){const{__sentry_template_string__:O,__sentry_template_values__:V=[]}=S;V!=null&&V.length&&(u["sentry.message.template"]=O),V.forEach((K,X)=>{u[`sentry.message.parameter.${X}`]=K})}const w=qn(t);ft(u,"sentry.trace.parent_span_id",w==null?void 0:w.spanContext().spanId);const E={...e,attributes:u};r.emit("beforeCaptureLog",E);const D=a?Qt(()=>a(E)):E;if(!D){r.recordDroppedEvent("before_send","log_item",1),C&&_.warn("beforeSendLog returned null, log will not be captured.");return}const{level:L,message:b,attributes:A={},severityNumber:$}=D,T={timestamp:me(),level:L,body:b,trace_id:c==null?void 0:c.trace_id,severity_number:$!=null?$:d_[L],attributes:{...Qs(p),...Qs(A,!0)}};n(r,T),r.emit("afterCaptureLog",D)}function La(e,t){var o;const n=(o=t!=null?t:sf(e))!=null?o:[];if(n.length===0)return;const r=e.getOptions(),s=p_(n,r._metadata,r.tunnel,e.getDsn());Pa().set(e,[]),e.emit("flushLogs"),e.sendEnvelope(s)}function sf(e){return Pa().get(e)}function Pa(){return rr("clientToLogBufferMap",()=>new WeakMap)}function g_(e){return[{type:"trace_metric",item_count:e.length,content_type:"application/vnd.sentry.items.trace-metric+json"},{items:e}]}function __(e,t,n,r){const s={};return t!=null&&t.sdk&&(s.sdk={name:t.sdk.name,version:t.sdk.version}),n&&r&&(s.dsn=Lt(r)),lt(s,[g_(e)])}const y_=1e3;function bt(e,t,n,r=!0){n&&(r||!(t in e))&&(e[t]=n)}function S_(e,t){const n=Fa(),r=of(e);r===void 0?n.set(e,[t]):r.length>=y_?(Da(e,r),n.set(e,[t])):n.set(e,[...r,t])}function b_(e,t,n){var d,l;const{release:r,environment:s}=t.getOptions(),o={...e.attributes};bt(o,"user.id",n.id,!1),bt(o,"user.email",n.email,!1),bt(o,"user.name",n.username,!1),bt(o,"sentry.release",r),bt(o,"sentry.environment",s);const{name:i,version:a}=(l=(d=t.getSdkMetadata())==null?void 0:d.sdk)!=null?l:{};bt(o,"sentry.sdk.name",i),bt(o,"sentry.sdk.version",a);const c=t.getIntegrationByName("Replay"),u=c==null?void 0:c.getReplayId(!0);return bt(o,"sentry.replay_id",u),u&&(c==null?void 0:c.getRecordingMode())==="buffer"&&bt(o,"sentry._internal.replay_is_buffering",!0),{...e,attributes:o}}function E_(e,t,n,r){const[,s]=rf(t,n),o=qn(n),i=o?o.spanContext().traceId:s==null?void 0:s.trace_id,a=o?o.spanContext().spanId:void 0;return{timestamp:me(),trace_id:i!=null?i:"",span_id:a,name:e.name,type:e.type,unit:e.unit,value:e.value,attributes:{...Qs(r),...Qs(e.attributes,"skip-undefined")}}}function T_(e,t){var m,g,y,S;const n=(m=t==null?void 0:t.scope)!=null?m:G(),r=(g=t==null?void 0:t.captureSerializedMetric)!=null?g:S_,s=(y=n==null?void 0:n.getClient())!=null?y:x();if(!s){C&&_.warn("No client available to capture metric.");return}const{_experiments:o,enableMetrics:i,beforeSendMetric:a}=s.getOptions();if(!((S=i!=null?i:o==null?void 0:o.enableMetrics)!=null?S:!0)){C&&_.warn("metrics option not enabled, metric will not be captured.");return}const{user:u,attributes:d}=Oa(ve(),n),l=b_(e,s,u);s.emit("processMetric",l);const f=a||(o==null?void 0:o.beforeSendMetric),p=f?f(l):l;if(!p){C&&_.log("`beforeSendMetric` returned `null`, will not send metric.");return}const h=E_(p,s,n,d);C&&_.log("[Metric]",h),r(s,h),s.emit("afterCaptureMetric",p)}function Da(e,t){var o;const n=(o=t!=null?t:of(e))!=null?o:[];if(n.length===0)return;const r=e.getOptions(),s=__(n,r._metadata,r.tunnel,e.getDsn());Fa().set(e,[]),e.emit("flushMetrics"),e.sendEnvelope(s)}function of(e){return Fa().get(e)}function Fa(){return rr("clientToMetricBufferMap",()=>new WeakMap)}const $a=Symbol.for("SentryBufferFullError");function Ba(e=100){const t=new Set;function n(){return t.size<e}function r(i){t.delete(i)}function s(i){if(!n())return Na($a);const a=i();return t.add(a),a.then(()=>r(a),()=>r(a)),a}function o(i){if(!t.size)return Ao(!0);const a=Promise.allSettled(Array.from(t)).then(()=>!0);if(!i)return a;const c=[a,new Promise(u=>setTimeout(()=>u(!1),i))];return Promise.race(c)}return{get $(){return Array.from(t)},add:s,drain:o}}const v_=60*1e3;function af(e,t=Br()){const n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;const r=Date.parse(`${e}`);return isNaN(r)?v_:r-t}function I_(e,t){return e[t]||e.all||0}function cf(e,t,n=Br()){return I_(e,t)>n}function uf(e,{statusCode:t,headers:n},r=Br()){const s={...e},o=n==null?void 0:n["x-sentry-rate-limits"],i=n==null?void 0:n["retry-after"];if(o)for(const a of o.trim().split(",")){const[c,u,,,d]=a.split(":",5),l=parseInt(c,10),f=(isNaN(l)?60:l)*1e3;if(!u)s.all=r+f;else for(const p of u.split(";"))p==="metric_bucket"?(!d||d.split(";").includes("custom"))&&(s[p]=r+f):s[p]=r+f}else i?s.all=r+af(i,r):t===429&&(s.all=r+60*1e3);return s}const lf=64;function w_(e,t,n=Ba(e.bufferSize||lf)){let r={};const s=i=>n.drain(i);function o(i){const a=[];if(gn(i,(l,f)=>{const p=Yc(f);cf(r,p)?e.recordDroppedEvent("ratelimit_backoff",p):a.push(l)}),a.length===0)return Promise.resolve({});const c=lt(i[0],a),u=l=>{if(Bi(c,["client_report"])){C&&_.warn(`Dropping client report. Will not send outcomes (reason: ${l}).`);return}gn(c,(f,p)=>{e.recordDroppedEvent(l,Yc(p))})},d=()=>t({body:Ks(c)}).then(l=>(l.statusCode!==void 0&&(l.statusCode<200||l.statusCode>=300)&&C&&_.warn(`Sentry responded with status code ${l.statusCode} to sent event.`),r=uf(r,l),l),l=>{throw u("network_error"),C&&_.error("Encountered error running transport request:",l),l});return n.add(d).then(l=>l,l=>{if(l===$a)return C&&_.error("Skipped sending event because buffer is full."),u("queue_overflow"),Promise.resolve({});throw l})}return{send:o,flush:s}}function k_(e,t,n){const r=[{type:"client_report"},{timestamp:kn(),discarded_events:e}];return lt(t?{dsn:t}:{},[r])}function df(e){const t=[];e.message&&t.push(e.message);try{const n=e.exception.values[e.exception.values.length-1];n!=null&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`))}catch{}return t}function C_(e){var c,u,d;const{trace_id:t,parent_span_id:n,span_id:r,status:s,origin:o,data:i,op:a}=(u=(c=e.contexts)==null?void 0:c.trace)!=null?u:{};return{data:i!=null?i:{},description:e.transaction,op:a,parent_span_id:n,span_id:r!=null?r:"",start_timestamp:(d=e.start_timestamp)!=null?d:0,status:s,timestamp:e.timestamp,trace_id:t!=null?t:"",origin:o,profile_id:i==null?void 0:i[Ia],exclusive_time:i==null?void 0:i[ir],measurements:e.measurements,is_segment:!0}}function R_(e){return{type:"transaction",timestamp:e.timestamp,start_timestamp:e.start_timestamp,transaction:e.description,contexts:{trace:{trace_id:e.trace_id,span_id:e.span_id,parent_span_id:e.parent_span_id,op:e.op,status:e.status,origin:e.origin,data:{...e.data,...e.profile_id&&{[Ia]:e.profile_id},...e.exclusive_time&&{[ir]:e.exclusive_time}}}},measurements:e.measurements}}const du="Not capturing exception because it's already been captured.",fu="Discarded session because of missing or non-string release",ff=Symbol.for("SentryInternalError"),pf=Symbol.for("SentryDoNotSendEventError"),A_=5e3;function As(e){return{message:e,[ff]:!0}}function ui(e){return{message:e,[pf]:!0}}function pu(e){return!!e&&typeof e=="object"&&ff in e}function hu(e){return!!e&&typeof e=="object"&&pf in e}function mu(e,t,n,r,s){let o=0,i,a=!1;e.on(n,()=>{o=0,clearTimeout(i),a=!1}),e.on(t,c=>{o+=r(c),o>=8e5?s(e):a||(a=!0,i=setTimeout(()=>{s(e)},A_))}),e.on("flush",()=>{s(e)})}class x_{constructor(t){var r,s,o,i,a,c,u;if(this._options=t,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],this._promiseBuffer=Ba((s=(r=t.transportOptions)==null?void 0:r.bufferSize)!=null?s:lf),t.dsn?this._dsn=Ld(t.dsn):C&&_.warn("No DSN provided, client will not send events."),this._dsn){const d=tf(this._dsn,t.tunnel,t._metadata?t._metadata.sdk:void 0);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:d})}this._options.enableLogs=(i=this._options.enableLogs)!=null?i:(o=this._options._experiments)==null?void 0:o.enableLogs,this._options.enableLogs&&mu(this,"afterCaptureLog","flushLogs",L_,La),((u=(c=this._options.enableMetrics)!=null?c:(a=this._options._experiments)==null?void 0:a.enableMetrics)==null||u)&&mu(this,"afterCaptureMetric","flushMetrics",O_,Da)}captureException(t,n,r){const s=Ie();if(Wc(t))return C&&_.log(du),s;const o={event_id:s,...n};return this._process(()=>this.eventFromException(t,o).then(i=>this._captureEvent(i,o,r)).then(i=>i),"error"),o.event_id}captureMessage(t,n,r,s){const o={event_id:Ie(),...r},i=Eo(t)?t:String(t),a=Yt(t),c=a?this.eventFromMessage(i,n,o):this.eventFromException(t,o);return this._process(()=>c.then(u=>this._captureEvent(u,o,s)),a?"unknown":"error"),o.event_id}captureEvent(t,n,r){const s=Ie();if(n!=null&&n.originalException&&Wc(n.originalException))return C&&_.log(du),s;const o={event_id:s,...n},i=t.sdkProcessingMetadata||{},a=i.capturedSpanScope,c=i.capturedSpanIsolationScope,u=gu(t.type);return this._process(()=>this._captureEvent(t,o,a||r,c),u),o.event_id}captureSession(t){this.sendSession(t),zn(t,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}async flush(t){const n=this._transport;if(!n)return!0;this.emit("flush");const r=await this._isClientDoneProcessing(t),s=await n.flush(t);return r&&s}async close(t){const n=await this.flush(t);return this.getOptions().enabled=!1,this.emit("close"),n}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}init(){(this._isEnabled()||this._options.integrations.some(({name:t})=>t.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(t){return this._integrations[t]}addIntegration(t){const n=this._integrations[t.name];nf(this,t,this._integrations),n||uu(this,[t])}sendEvent(t,n={}){this.emit("beforeSendEvent",t,n);let r=mg(t,this._dsn,this._options._metadata,this._options.tunnel);for(const s of n.attachments||[])r=ig(r,dg(s));this.sendEnvelope(r).then(s=>this.emit("afterSendEvent",t,s))}sendSession(t){const{release:n,environment:r=Io}=this._options;if("aggregates"in t){const o=t.attrs||{};if(!o.release&&!n){C&&_.warn(fu);return}o.release=o.release||n,o.environment=o.environment||r,t.attrs=o}else{if(!t.release&&!n){C&&_.warn(fu);return}t.release=t.release||n,t.environment=t.environment||r}this.emit("beforeSendSession",t);const s=hg(t,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(s)}recordDroppedEvent(t,n,r=1){if(this._options.sendClientReports){const s=`${t}:${n}`;C&&_.log(`Recording outcome: "${s}"${r>1?` (${r} times)`:""}`),this._outcomes[s]=(this._outcomes[s]||0)+r}}on(t,n){const r=this._hooks[t]=this._hooks[t]||new Set,s=(...o)=>n(...o);return r.add(s),()=>{r.delete(s)}}emit(t,...n){const r=this._hooks[t];r&&r.forEach(s=>s(...n))}async sendEnvelope(t){if(this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport)try{return await this._transport.send(t)}catch(n){return C&&_.error("Error while sending envelope:",n),{}}return C&&_.error("Transport disabled"),{}}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=a_(this,t),uu(this,t)}_updateSessionFromEvent(t,n){var c,u;let r=n.level==="fatal",s=!1;const o=(c=n.exception)==null?void 0:c.values;if(o){s=!0,r=!1;for(const d of o)if(((u=d.mechanism)==null?void 0:u.handled)===!1){r=!0;break}}const i=t.status==="ok";(i&&t.errors===0||i&&r)&&(zn(t,{...r&&{status:"crashed"},errors:t.errors||Number(s||r)}),this.captureSession(t))}async _isClientDoneProcessing(t){let n=0;for(;!t||n<t;){if(await new Promise(r=>setTimeout(r,1)),!this._numProcessing)return!0;n++}return!1}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,n,r,s){const o=this.getOptions(),i=Object.keys(this._integrations);return!n.integrations&&(i!=null&&i.length)&&(n.integrations=i),this.emit("preprocessEvent",t,n),t.type||s.setLastEventId(t.event_id||n.event_id),Xd(o,t,n,r,this,s).then(a=>{if(a===null)return a;this.emit("postprocessEvent",a,n),a.contexts={trace:kd(r),...a.contexts};const c=Ra(this,r);return a.sdkProcessingMetadata={dynamicSamplingContext:c,...a.sdkProcessingMetadata},a})}_captureEvent(t,n={},r=G(),s=ve()){return C&&Hi(t)&&_.log(`Captured error event \`${df(t)[0]||"<unknown>"}\``),this._processEvent(t,n,r,s).then(o=>o.event_id,o=>{C&&(hu(o)?_.log(o.message):pu(o)?_.warn(o.message):_.warn(o))})}_processEvent(t,n,r,s){const o=this.getOptions(),{sampleRate:i}=o,a=hf(t),c=Hi(t),d=`before send for type \`${t.type||"error"}\``,l=typeof i>"u"?void 0:mn(i);if(c&&typeof l=="number"&&It()>l)return this.recordDroppedEvent("sample_rate","error"),Na(ui(`Discarding event because it's not included in the random sample (sampling rate = ${i})`));const f=gu(t.type);return this._prepareEvent(t,n,r,s).then(p=>{if(p===null)throw this.recordDroppedEvent("event_processor",f),ui("An event processor returned `null`, will not send event.");if(n.data&&n.data.__sentry__===!0)return p;const m=N_(this,o,p,n);return M_(m,d)}).then(p=>{var g;if(p===null){if(this.recordDroppedEvent("before_send",f),a){const S=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",S)}throw ui(`${d} returned \`null\`, will not send event.`)}const h=r.getSession()||s.getSession();if(c&&h&&this._updateSessionFromEvent(h,p),a){const y=((g=p.sdkProcessingMetadata)==null?void 0:g.spanCountBeforeProcessing)||0,S=p.spans?p.spans.length:0,w=y-S;w>0&&this.recordDroppedEvent("before_send","span",w)}const m=p.transaction_info;if(a&&m&&p.transaction!==t.transaction){const y="custom";p.transaction_info={...m,source:y}}return this.sendEvent(p,n),p}).then(null,p=>{throw hu(p)||pu(p)?p:(this.captureException(p,{mechanism:{handled:!1,type:"internal"},data:{__sentry__:!0},originalException:p}),As(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${p}`))})}_process(t,n){this._numProcessing++,this._promiseBuffer.add(t).then(r=>(this._numProcessing--,r),r=>(this._numProcessing--,r===$a&&this.recordDroppedEvent("queue_overflow",n),r))}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.entries(t).map(([n,r])=>{const[s,o]=n.split(":");return{reason:s,category:o,quantity:r}})}_flushOutcomes(){C&&_.log("Flushing outcomes...");const t=this._clearOutcomes();if(t.length===0){C&&_.log("No outcomes to send");return}if(!this._dsn){C&&_.log("No dsn provided, will not send outcomes");return}C&&_.log("Sending outcomes:",t);const n=k_(t,this._options.tunnel&&Lt(this._dsn));this.sendEnvelope(n)}}function gu(e){return e==="replay_event"?"replay":e||"error"}function M_(e,t){const n=`${t} must return \`null\` or a valid event.`;if(or(e))return e.then(r=>{if(!Ve(r)&&r!==null)throw As(n);return r},r=>{throw As(`${t} rejected with ${r}`)});if(!Ve(e)&&e!==null)throw As(n);return e}function N_(e,t,n,r){const{beforeSend:s,beforeSendTransaction:o,beforeSendSpan:i,ignoreSpans:a}=t;let c=n;if(Hi(c)&&s)return s(c,r);if(hf(c)){if(i||a){const u=C_(c);if(a!=null&&a.length&&Js(u,a))return null;if(i){const d=i(u);d?c=Ur(n,R_(d)):Fi()}if(c.spans){const d=[],l=c.spans;for(const p of l){if(a!=null&&a.length&&Js(p,a)){Zm(l,p);continue}if(i){const h=i(p);h?d.push(h):(Fi(),d.push(p))}else d.push(p)}const f=c.spans.length-d.length;f&&e.recordDroppedEvent("before_send","span",f),c.spans=d}}if(o){if(c.spans){const u=c.spans.length;c.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:u}}return o(c,r)}}return c}function Hi(e){return e.type===void 0}function hf(e){return e.type==="transaction"}function O_(e){let t=0;return e.name&&(t+=e.name.length*2),t+=8,t+mf(e.attributes)}function L_(e){let t=0;return e.message&&(t+=e.message.length*2),t+mf(e.attributes)}function mf(e){if(!e)return 0;let t=0;return Object.values(e).forEach(n=>{Array.isArray(n)?t+=n.length*_u(n[0]):Yt(n)?t+=_u(n):t+=100}),t}function _u(e){return typeof e=="string"?e.length*2:typeof e=="number"?8:typeof e=="boolean"?4:0}function P_(e){return vt(e)&&"__sentry_fetch_url_host__"in e&&typeof e.__sentry_fetch_url_host__=="string"}function yu(e){return P_(e)?`${e.message} (${e.__sentry_fetch_url_host__})`:e.message}function D_(e,t){t.debug===!0&&(C?_.enable():Qt(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),G().update(t.initialScope);const r=new e(t);return F_(r),r.init(),r}function F_(e){G().setClient(e)}const li=100,di=5e3,$_=36e5;function B_(e){function t(...n){C&&_.log("[Offline]:",...n)}return n=>{const r=e(n);if(!n.createStore)throw new Error("No `createStore` function was provided");const s=n.createStore(n);let o=di,i;function a(l,f,p){return Bi(l,["client_report"])?!1:n.shouldStore?n.shouldStore(l,f,p):!0}function c(l){i&&clearTimeout(i),i=setTimeout(async()=>{i=void 0;const f=await s.shift();f&&(t("Attempting to send previously queued event"),f[0].sent_at=new Date().toISOString(),d(f,!0).catch(p=>{t("Failed to retry sending",p)}))},l),typeof i!="number"&&i.unref&&i.unref()}function u(){i||(c(o),o=Math.min(o*2,$_))}async function d(l,f=!1){var p,h;if(!f&&Bi(l,["replay_event","replay_recording"]))return await s.push(l),c(li),{};try{if(n.shouldSend&&await n.shouldSend(l)===!1)throw new Error("Envelope not sent because `shouldSend` callback returned false");const m=await r.send(l);let g=li;if(m){if((p=m.headers)!=null&&p["retry-after"])g=af(m.headers["retry-after"]);else if((h=m.headers)!=null&&h["x-sentry-rate-limits"])g=6e4;else if((m.statusCode||0)>=400)return m}return c(g),o=di,m}catch(m){if(await a(l,m,o))return f?await s.unshift(l):await s.push(l),u(),t("Error sending. Event queued.",m),{};throw m}}return n.flushAtStartup&&u(),{send:d,flush:l=>(l===void 0&&(o=di,c(li)),r.flush(l))}}}const fi="MULTIPLEXED_TRANSPORT_EXTRA_KEY";function gf(e,t){let n;return gn(e,(r,s)=>(t.includes(s)&&(n=Array.isArray(r)?r[1]:void 0),!!n)),n}function U_(e,t){return n=>{const r=e(n);return{...r,send:async s=>{const o=gf(s,["event","transaction","profile","replay_event"]);return o&&(o.release=t),r.send(s)}}}}function H_(e,t){return lt(t?{...e[0],dsn:t}:e[0],e[1])}function RA(e,t){return n=>{const r=e(n),s=new Map,o=t||(u=>{var l;const d=u.getEvent();return(l=d==null?void 0:d.extra)!=null&&l[fi]&&Array.isArray(d.extra[fi])?d.extra[fi]:[]});function i(u,d){const l=d?`${u}:${d}`:u;let f=s.get(l);if(!f){const p=Md(u);if(!p)return;const h=tf(p,n.tunnel);f=d?U_(e,d)({...n,url:h}):e({...n,url:h}),s.set(l,f)}return[u,f]}async function a(u){function d(h){const m=h!=null&&h.length?h:["event"];return gf(u,m)}const l=o({envelope:u,getEvent:d}).map(h=>typeof h=="string"?i(h,void 0):i(h.dsn,h.release)).filter(h=>!!h),f=l.length?l:[["",r]];return(await Promise.all(f.map(([h,m])=>m.send(H_(u,h)))))[0]}async function c(u){const d=[...s.values(),r];return(await Promise.all(d.map(f=>f.flush(u)))).every(f=>f)}return{send:a,flush:c}}}const W_="thismessage:/";function Ua(e){return"isRelative"in e}function Ha(e,t){const n=e.indexOf("://")<=0&&e.indexOf("//")!==0,r=n?W_:void 0;try{if("canParse"in URL&&!URL.canParse(e,r))return;const s=new URL(e,r);return n?{isRelative:n,pathname:s.pathname,search:s.search,hash:s.hash}:s}catch{}}function j_(e){if(Ua(e))return e.pathname;const t=new URL(e);return t.search="",t.hash="",["80","443"].includes(t.port)&&(t.port=""),t.password&&(t.password="%filtered%"),t.username&&(t.username="%filtered%"),t.toString()}function hn(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}function _f(e){return e.split(/[?#]/,1)[0]}function qt(e,t=!0){if(e.startsWith("data:")){const n=e.match(/^data:([^;,]+)/),r=n?n[1]:"text/plain",s=e.includes(";base64,"),o=e.indexOf(",");let i="";if(t&&o!==-1){const a=e.slice(o+1);i=a.length>10?`${a.slice(0,10)}... [truncated]`:a}return`data:${r}${s?",base64":""}${i?`,${i}`:""}`}return e}function yf(e,t){const n=t==null?void 0:t.getDsn(),r=t==null?void 0:t.getOptions().tunnel;return q_(e,n)||z_(e,r)}function z_(e,t){return t?Su(e)===Su(t):!1}function q_(e,t){const n=Ha(e);return!n||Ua(n)?!1:t?n.host.includes(t.host)&&/(^|&|\?)sentry_key=/.test(n.search):!1}function Su(e){return e[e.length-1]==="/"?e.slice(0,-1):e}function G_(e,...t){const n=new String(String.raw(e,...t));return n.__sentry_template_string__=e.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),n.__sentry_template_values__=t,n}const V_=G_;function J_(e){var t;"aggregates"in e?((t=e.attrs)==null?void 0:t.ip_address)===void 0&&(e.attrs={...e.attrs,ip_address:"{{auto}}"}):e.ipAddress===void 0&&(e.ipAddress="{{auto}}")}function Y_(e,t,n=[t],r="npm"){const s=e._metadata||{};s.sdk||(s.sdk={name:`sentry.javascript.${t}`,packages:n.map(o=>({name:`${r}:@sentry/${o}`,version:zt})),version:zt}),e._metadata=s}function Sf(e={}){const t=e.client||x();if(!Zg()||!t)return{};const n=Ot(),r=tn(n);if(r.getTraceData)return r.getTraceData(e);const s=e.scope||G(),o=e.span||Te(),i=o?Vm(o):K_(s),a=o?ct(o):Ra(t,s),c=xd(a);if(!Pd.test(i))return _.warn("Invalid sentry-trace data. Cannot generate trace data"),{};const d={"sentry-trace":i,baggage:c};return e.propagateTraceparent&&(d.traceparent=o?Jm(o):X_(s)),d}function K_(e){const{traceId:t,sampled:n,propagationSpanId:r}=e.getPropagationContext();return Fd(t,r,n)}function X_(e){const{traceId:t,sampled:n,propagationSpanId:r}=e.getPropagationContext();return $d(t,r,n)}function Q_(e,t,n){let r,s,o;const i=n!=null&&n.maxWait?Math.max(n.maxWait,t):0,a=(n==null?void 0:n.setTimeoutImpl)||setTimeout;function c(){return u(),r=e(),r}function u(){s!==void 0&&clearTimeout(s),o!==void 0&&clearTimeout(o),s=o=void 0}function d(){return s!==void 0||o!==void 0?c():r}function l(){return s&&clearTimeout(s),s=a(c,t),i&&o===void 0&&(o=a(c,i)),r}return l.cancel=u,l.flush=d,l}const Z_=100;function Mt(e,t){const n=x(),r=ve();if(!n)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:o=Z_}=n.getOptions();if(o<=0)return;const a={timestamp:kn(),...e},c=s?Qt(()=>s(a,t)):a;c!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",c,t),r.addBreadcrumb(c,o))}let bu;const ey="FunctionToString",Eu=new WeakMap,ty=(()=>({name:ey,setupOnce(){bu=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=Ta(this),n=Eu.has(x())&&t!==void 0?t:this;return bu.apply(n,e)}}catch{}},setup(e){Eu.set(e,!0)}})),ny=ty,ry=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],sy="EventFilters",oy=(e={})=>{let t;return{name:sy,setup(n){const r=n.getOptions();t=Tu(e,r)},processEvent(n,r,s){if(!t){const o=s.getOptions();t=Tu(e,o)}return ay(n,t)?null:n}}},iy=((e={})=>({...oy(e),name:"InboundFilters"}));function Tu(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:ry],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]]}}function ay(e,t){if(e.type){if(e.type==="transaction"&&uy(e,t.ignoreTransactions))return C&&_.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${an(e)}`),!0}else{if(cy(e,t.ignoreErrors))return C&&_.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${an(e)}`),!0;if(py(e))return C&&_.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${an(e)}`),!0;if(ly(e,t.denyUrls))return C&&_.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${an(e)}.
Url: ${eo(e)}`),!0;if(!dy(e,t.allowUrls))return C&&_.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${an(e)}.
Url: ${eo(e)}`),!0}return!1}function cy(e,t){return t!=null&&t.length?df(e).some(n=>at(n,t)):!1}function uy(e,t){if(!(t!=null&&t.length))return!1;const n=e.transaction;return n?at(n,t):!1}function ly(e,t){if(!(t!=null&&t.length))return!1;const n=eo(e);return n?at(n,t):!1}function dy(e,t){if(!(t!=null&&t.length))return!0;const n=eo(e);return n?at(n,t):!0}function fy(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function eo(e){var t,n,r;try{const s=[...(n=(t=e.exception)==null?void 0:t.values)!=null?n:[]].reverse().find(i=>{var a,c,u;return((a=i.mechanism)==null?void 0:a.parent_id)===void 0&&((u=(c=i.stacktrace)==null?void 0:c.frames)==null?void 0:u.length)}),o=(r=s==null?void 0:s.stacktrace)==null?void 0:r.frames;return o?fy(o):null}catch{return C&&_.error(`Cannot extract url for event ${an(e)}`),null}}function py(e){var t,n;return(n=(t=e.exception)==null?void 0:t.values)!=null&&n.length?!e.message&&!e.exception.values.some(r=>r.stacktrace||r.type&&r.type!=="Error"||r.value):!1}function hy(e,t,n,r,s,o){var a;if(!((a=s.exception)!=null&&a.values)||!o||!Rt(o.originalException,Error))return;const i=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;i&&(s.exception.values=Wi(e,t,r,o.originalException,n,s.exception.values,i,0))}function Wi(e,t,n,r,s,o,i,a){if(o.length>=n+1)return o;let c=[...o];if(Rt(r[s],Error)){vu(i,a,r);const u=e(t,r[s]),d=c.length;Iu(u,s,d,a),c=Wi(e,t,n,r[s],s,[u,...c],u,d)}return bf(r)&&r.errors.forEach((u,d)=>{if(Rt(u,Error)){vu(i,a,r);const l=e(t,u),f=c.length;Iu(l,`errors[${d}]`,f,a),c=Wi(e,t,n,u,s,[l,...c],l,f)}}),c}function bf(e){return Array.isArray(e.errors)}function vu(e,t,n){e.mechanism={handled:!0,type:"auto.core.linked_errors",...bf(n)&&{is_exception_group:!0},...e.mechanism,exception_id:t}}function Iu(e,t,n,r){e.mechanism={handled:!0,...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}const Ef=new Map,wu=new Set;function my(e){if(F._sentryModuleMetadata)for(const t of Object.keys(F._sentryModuleMetadata)){const n=F._sentryModuleMetadata[t];if(wu.has(t))continue;wu.add(t);const r=e(t);for(const s of r.reverse())if(s.filename){Ef.set(s.filename,n);break}}}function gy(e,t){return my(e),Ef.get(t)}function Tf(e,t){var n,r;(r=(n=t.exception)==null?void 0:n.values)==null||r.forEach(s=>{var o,i;(i=(o=s.stacktrace)==null?void 0:o.frames)==null||i.forEach(a=>{if(!a.filename||a.module_metadata)return;const c=gy(e,a.filename);c&&(a.module_metadata=c)})})}function vf(e){var t,n;(n=(t=e.exception)==null?void 0:t.values)==null||n.forEach(r=>{var s,o;(o=(s=r.stacktrace)==null?void 0:s.frames)==null||o.forEach(i=>{delete i.module_metadata})})}const AA=()=>({name:"ModuleMetadata",setup(e){e.on("beforeEnvelope",t=>{gn(t,(n,r)=>{if(r==="event"){const s=Array.isArray(n)?n[1]:void 0;s&&(vf(s),n[1]=s)}})}),e.on("applyFrameMetadata",t=>{if(t.type)return;const n=e.getOptions().stackParser;Tf(n,t)})}});function Wa(e){const t="console";Zt(t,e),en(t,_y)}function _y(){"console"in F&&_a.forEach(function(e){e in F.console&&Ce(F.console,e,function(t){return zs[e]=t,function(...n){et("console",{args:n,level:e});const s=zs[e];s==null||s.apply(F.console,n)}})})}function to(e){return e==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}const yy="CaptureConsole",Sy=((e={})=>{var r;const t=e.levels||_a,n=(r=e.handled)!=null?r:!0;return{name:yy,setup(s){"console"in F&&Wa(({args:o,level:i})=>{x()!==s||!t.includes(i)||by(o,i,n)})}}}),xA=Sy;function by(e,t,n){const r=to(t),s=new Error,o={level:to(t),extra:{arguments:e}};ut(i=>{if(i.addEventProcessor(u=>(u.logger="console",At(u,{handled:n,type:"auto.core.capture_console"}),u)),t==="assert"){if(!e[0]){const u=`Assertion failed: ${qs(e.slice(1)," ")||"console.assert"}`;i.setExtra("arguments",e.slice(1)),i.captureMessage(u,r,{captureContext:o,syntheticException:s})}return}const a=e.find(u=>u instanceof Error);if(a){_e(a,o);return}const c=qs(e," ");i.captureMessage(c,r,{captureContext:o,syntheticException:s})})}const Ey="Dedupe",Ty=(()=>{let e;return{name:Ey,processEvent(t){if(t.type)return t;try{if(Iy(t,e))return C&&_.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}}),vy=Ty;function Iy(e,t){return t?!!(wy(e,t)||ky(e,t)):!1}function wy(e,t){const n=e.message,r=t.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!wf(e,t)||!If(e,t))}function ky(e,t){const n=ku(t),r=ku(e);return!(!n||!r||n.type!==r.type||n.value!==r.value||!wf(e,t)||!If(e,t))}function If(e,t){let n=Ni(e),r=Ni(t);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let s=0;s<r.length;s++){const o=r[s],i=n[s];if(o.filename!==i.filename||o.lineno!==i.lineno||o.colno!==i.colno||o.function!==i.function)return!1}return!0}function wf(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function ku(e){var t,n;return(n=(t=e.exception)==null?void 0:t.values)==null?void 0:n[0]}const Cy="ExtraErrorData",Ry=((e={})=>{const{depth:t=3,captureErrorCause:n=!0}=e;return{name:Cy,processEvent(r,s,o){const{maxValueLength:i}=o.getOptions();return Ay(r,s,t,n,i)}}}),MA=Ry;function Ay(e,t={},n,r,s){if(!t.originalException||!vt(t.originalException))return e;const o=t.originalException.name||t.originalException.constructor.name,i=kf(t.originalException,r,s);if(i){const a={...e.contexts},c=ze(i,n);return Ve(c)&&(Pe(c,"__sentry_skip_normalization__",!0),a[o]=c),{...e,contexts:a}}return e}function kf(e,t,n){try{const r=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],s={};for(const o of Object.keys(e)){if(r.indexOf(o)!==-1)continue;const i=e[o];s[o]=vt(i)||typeof i=="string"?n?Rr(`${i}`,n):`${i}`:i}if(t&&e.cause!==void 0)if(vt(e.cause)){const o=e.cause.name||e.cause.constructor.name;s.cause={[o]:kf(e.cause,!1,n)}}else s.cause=e.cause;if(typeof e.toJSON=="function"){const o=e.toJSON();for(const i of Object.keys(o)){const a=o[i];s[i]=vt(a)?a.toString():a}}return s}catch(r){C&&_.error("Unable to extract extra data from the Error object:",r)}return null}function xy(e,t){let n=0;for(let r=e.length-1;r>=0;r--){const s=e[r];s==="."?e.splice(r,1):s===".."?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}const My=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function Ny(e){const t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,n=My.exec(t);return n?n.slice(1):[]}function Cu(...e){let t="",n=!1;for(let r=e.length-1;r>=-1&&!n;r--){const s=r>=0?e[r]:"/";s&&(t=`${s}/${t}`,n=s.charAt(0)==="/")}return t=xy(t.split("/").filter(r=>!!r),!n).join("/"),(n?"/":"")+t||"."}function Ru(e){let t=0;for(;t<e.length&&e[t]==="";t++);let n=e.length-1;for(;n>=0&&e[n]==="";n--);return t>n?[]:e.slice(t,n-t+1)}function Oy(e,t){e=Cu(e).slice(1),t=Cu(t).slice(1);const n=Ru(e.split("/")),r=Ru(t.split("/")),s=Math.min(n.length,r.length);let o=s;for(let a=0;a<s;a++)if(n[a]!==r[a]){o=a;break}let i=[];for(let a=o;a<n.length;a++)i.push("..");return i=i.concat(r.slice(o)),i.join("/")}function Ly(e,t){return Ny(e)[2]||""}const Py="RewriteFrames",NA=(e={})=>{const t=e.root,n=e.prefix||"app:///",r="window"in F&&!!F.window,s=e.iteratee||Dy({isBrowser:r,root:t,prefix:n});function o(a){try{return{...a,exception:{...a.exception,values:a.exception.values.map(c=>({...c,...c.stacktrace&&{stacktrace:i(c.stacktrace)}}))}}}catch{return a}}function i(a){var c;return{...a,frames:(c=a==null?void 0:a.frames)==null?void 0:c.map(u=>s(u))}}return{name:Py,processEvent(a){let c=a;return a.exception&&Array.isArray(a.exception.values)&&(c=o(c)),c}}};function Dy({isBrowser:e,root:t,prefix:n}){return r=>{if(!r.filename)return r;const s=/^[a-zA-Z]:\\/.test(r.filename)||r.filename.includes("\\")&&!r.filename.includes("/"),o=/^\//.test(r.filename);if(e){if(t){const i=r.filename;i.indexOf(t)===0&&(r.filename=i.replace(t,n))}}else if(s||o){const i=s?r.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):r.filename,a=t?Oy(t,i):Ly(i);r.filename=`${n}${a}`}return r}}const Fy=["reauthenticate","signInAnonymously","signInWithOAuth","signInWithIdToken","signInWithOtp","signInWithPassword","signInWithSSO","signOut","signUp","verifyOtp"],$y=["createUser","deleteUser","listUsers","getUserById","updateUserById","inviteUserByEmail"],By={eq:"eq",neq:"neq",gt:"gt",gte:"gte",lt:"lt",lte:"lte",like:"like","like(all)":"likeAllOf","like(any)":"likeAnyOf",ilike:"ilike","ilike(all)":"ilikeAllOf","ilike(any)":"ilikeAnyOf",is:"is",in:"in",cs:"contains",cd:"containedBy",sr:"rangeGt",nxl:"rangeGte",sl:"rangeLt",nxr:"rangeLte",adj:"rangeAdjacent",ov:"overlaps",fts:"",plfts:"plain",phfts:"phrase",wfts:"websearch",not:"not"},Cf=["select","insert","upsert","update","delete"];function xo(e){try{e.__SENTRY_INSTRUMENTED__=!0}catch{}}function Mo(e){try{return e.__SENTRY_INSTRUMENTED__}catch{return!1}}function Uy(e,t={}){var n;switch(e){case"GET":return"select";case"POST":return(n=t.Prefer)!=null&&n.includes("resolution=")?"upsert":"insert";case"PATCH":return"update";case"DELETE":return"delete";default:return"<unknown-op>"}}function Hy(e,t){if(t===""||t==="*")return"select(*)";if(e==="select")return`select(${t})`;if(e==="or"||e.endsWith(".or"))return`${e}${t}`;const[n,...r]=t.split(".");let s;return n!=null&&n.startsWith("fts")?s="textSearch":n!=null&&n.startsWith("plfts")?s="textSearch[plain]":n!=null&&n.startsWith("phfts")?s="textSearch[phrase]":n!=null&&n.startsWith("wfts")?s="textSearch[websearch]":s=n&&By[n]||"filter",`${s}(${e}, ${r.join(".")})`}function Au(e,t=!1){return new Proxy(e,{apply(n,r,s){return rn({name:`auth ${t?"(admin) ":""}${e.name}`,attributes:{[oe]:"auto.db.supabase",[we]:"db","db.system":"postgresql","db.operation":`auth.${t?"admin.":""}${e.name}`}},o=>Reflect.apply(n,r,s).then(i=>(i&&typeof i=="object"&&"error"in i&&i.error?(o.setStatus({code:ee}),_e(i.error,{mechanism:{handled:!1,type:"auto.db.supabase.auth"}})):o.setStatus({code:vo}),o.end(),i)).catch(i=>{throw o.setStatus({code:ee}),o.end(),_e(i,{mechanism:{handled:!1,type:"auto.db.supabase.auth"}}),i}).then(...s))}})}function Wy(e){const t=e.auth;if(!(!t||Mo(e.auth))){for(const n of Fy){const r=t[n];r&&typeof e.auth[n]=="function"&&(e.auth[n]=Au(r))}for(const n of $y){const r=t.admin[n];r&&typeof e.auth.admin[n]=="function"&&(e.auth.admin[n]=Au(r,!0))}xo(e.auth)}}function jy(e){Mo(e.prototype.from)||(e.prototype.from=new Proxy(e.prototype.from,{apply(t,n,r){const s=Reflect.apply(t,n,r),o=s.constructor;return qy(o),s}}),xo(e.prototype.from))}function zy(e){Mo(e.prototype.then)||(e.prototype.then=new Proxy(e.prototype.then,{apply(t,n,r){var p;const s=Cf,o=n,i=Uy(o.method,o.headers);if(!s.includes(i)||!((p=o==null?void 0:o.url)!=null&&p.pathname)||typeof o.url.pathname!="string")return Reflect.apply(t,n,r);const a=o.url.pathname.split("/"),c=a.length>0?a[a.length-1]:"",u=[];for(const[h,m]of o.url.searchParams.entries())u.push(Hy(h,m));const d=Object.create(null);if(Ve(o.body))for(const[h,m]of Object.entries(o.body))d[h]=m;const l=`${i==="select"?"":`${i}${d?"(...) ":""}`}${u.join(" ")} from(${c})`,f={"db.table":c,"db.schema":o.schema,"db.url":o.url.origin,"db.sdk":o.headers["X-Client-Info"],"db.system":"postgresql","db.operation":i,[oe]:"auto.db.supabase",[we]:"db"};return u.length&&(f["db.query"]=u),Object.keys(d).length&&(f["db.body"]=d),rn({name:l,attributes:f},h=>Reflect.apply(t,n,[]).then(m=>{if(h&&(m&&typeof m=="object"&&"status"in m&&Gs(h,m.status||500),h.end()),m.error){const S=new Error(m.error.message);m.error.code&&(S.code=m.error.code),m.error.details&&(S.details=m.error.details);const w={};u.length&&(w.query=u),Object.keys(d).length&&(w.body=d),_e(S,E=>(E.addEventProcessor(D=>(At(D,{handled:!1,type:"auto.db.supabase.postgres"}),D)),E.setContext("supabase",w),E))}const g={type:"supabase",category:`db.${i}`,message:l},y={};return u.length&&(y.query=u),Object.keys(d).length&&(y.body=d),Object.keys(y).length&&(g.data=y),Mt(g),m},m=>{throw h&&(Gs(h,500),h.end()),m}).then(...r))}}),xo(e.prototype.then))}function qy(e){for(const t of Cf)Mo(e.prototype[t])||(e.prototype[t]=new Proxy(e.prototype[t],{apply(n,r,s){const o=Reflect.apply(n,r,s),i=o.constructor;return C&&_.log(`Instrumenting ${t} operation's PostgRESTFilterBuilder`),zy(i),o}}),xo(e.prototype[t]))}const Gy=e=>{if(!e){C&&_.warn("Supabase integration was not installed because no Supabase client was provided.");return}const t=e.constructor===Function?e:e.constructor;jy(t),Wy(e)},Vy="Supabase",Jy=(e=>({setupOnce(){Gy(e)},name:Vy})),OA=e=>Jy(e.supabaseClient),Yy=10,Ky="ZodErrors";function Xy(e){return vt(e)&&e.name==="ZodError"&&Array.isArray(e.issues)}function Qy(e){return{...e,path:"path"in e&&Array.isArray(e.path)?e.path.join("."):void 0,keys:"keys"in e?JSON.stringify(e.keys):void 0,unionErrors:"unionErrors"in e?JSON.stringify(e.unionErrors):void 0}}function Zy(e){return e.map(t=>typeof t=="number"?"<array>":t).join(".")}function eS(e){const t=new Set;for(const r of e.issues){const s=Zy(r.path);s.length>0&&t.add(s)}const n=Array.from(t);if(n.length===0){let r="variable";if(e.issues.length>0){const s=e.issues[0];s!==void 0&&"expected"in s&&typeof s.expected=="string"&&(r=s.expected)}return`Failed to validate ${r}`}return`Failed to validate keys: ${Rr(n.join(", "),100)}`}function tS(e,t=!1,n,r){var s;if(!((s=n.exception)!=null&&s.values)||!r.originalException||!Xy(r.originalException)||r.originalException.issues.length===0)return n;try{const i=(t?r.originalException.issues:r.originalException.issues.slice(0,e)).map(Qy);return t&&(Array.isArray(r.attachments)||(r.attachments=[]),r.attachments.push({filename:"zod_issues.json",data:JSON.stringify({issues:i})})),{...n,exception:{...n.exception,values:[{...n.exception.values[0],value:eS(r.originalException)},...n.exception.values.slice(1)]},extra:{...n.extra,"zoderror.issues":i.slice(0,e)}}}catch(o){return{...n,extra:{...n.extra,"zoderrors sentry integration parse error":{message:"an exception was thrown while processing ZodError within applyZodErrorsToEvent()",error:o instanceof Error?`${o.name}: ${o.message}
${o.stack}`:"unknown"}}}}}const nS=((e={})=>{var n;const t=(n=e.limit)!=null?n:Yy;return{name:Ky,processEvent(r,s){return tS(t,e.saveZodIssuesAsAttachment,r,s)}}}),LA=nS,PA=e=>({name:"ThirdPartyErrorsFilter",setup(t){t.on("beforeEnvelope",n=>{gn(n,(r,s)=>{if(s==="event"){const o=Array.isArray(r)?r[1]:void 0;o&&(vf(o),r[1]=o)}})}),t.on("applyFrameMetadata",n=>{if(n.type)return;const r=t.getOptions().stackParser;Tf(r,n)})},processEvent(t){const n=sS(t,e.ignoreSentryInternalFrames);if(n){const r=e.behaviour==="drop-error-if-contains-third-party-frames"||e.behaviour==="apply-tag-if-contains-third-party-frames"?"some":"every";if(n[r](o=>!o.some(i=>e.filterKeys.includes(i)))){if(e.behaviour==="drop-error-if-contains-third-party-frames"||e.behaviour==="drop-error-if-exclusively-contains-third-party-frames")return null;t.tags={...t.tags,third_party_code:!0}}}return t}});function rS(e,t){var n;if(t!==0||!e.context_line||!e.filename||!e.filename.includes("sentry")||!e.filename.includes("helpers")||!e.context_line.includes(iS))return!1;if(e.pre_context){const r=e.pre_context.length;for(let s=0;s<r;s++)if((n=e.pre_context[s])!=null&&n.includes(oS))return!0}return!1}function sS(e,t){const n=Ni(e);if(n)return n.filter((r,s)=>!r.filename||r.lineno==null&&r.colno==null&&r.instruction_addr==null?!1:!t||!rS(r,s)).map(r=>r.module_metadata?Object.keys(r.module_metadata).filter(s=>s.startsWith(xu)).map(s=>s.slice(xu.length)):[])}const xu="_sentryBundlerPluginAppKey:",oS="Attempt to invoke user-land function",iS="fn.apply(this, wrappedArguments)",aS=100,cS=10,cs="flag.evaluation.";function cr(e){const n=G().getScopeData().contexts.flags,r=n?n.values:[];return r.length&&(e.contexts===void 0&&(e.contexts={}),e.contexts.flags={values:[...r]}),e}function _n(e,t,n=aS){const r=G().getScopeData().contexts;r.flags||(r.flags={values:[]});const s=r.flags.values;uS(s,e,t,n)}function uS(e,t,n,r){if(typeof n!="boolean")return;if(e.length>r){C&&_.error(`[Feature Flags] insertToFlagBuffer called on a buffer larger than maxSize=${r}`);return}const s=e.findIndex(o=>o.flag===t);s!==-1&&e.splice(s,1),e.length===r&&e.shift(),e.push({flag:t,result:n})}function yn(e,t,n=cS){if(typeof t!="boolean")return;const r=Te();if(!r)return;const s=q(r).data;if(`${cs}${e}`in s){r.setAttribute(`${cs}${e}`,t);return}Object.keys(s).filter(i=>i.startsWith(cs)).length<n&&r.setAttribute(`${cs}${e}`,t)}const DA=()=>({name:"FeatureFlags",processEvent(e,t,n){return cr(e)},addFeatureFlag(e,t){_n(e,t),yn(e,t)}}),lS=({growthbookClass:e})=>({name:"GrowthBook",setupOnce(){const t=e.prototype;typeof t.isOn=="function"&&Ce(t,"isOn",Mu),typeof t.getFeatureValue=="function"&&Ce(t,"getFeatureValue",Mu)},processEvent(t,n,r){return cr(t)}});function Mu(e){return function(...t){const n=t[0],r=e.apply(this,t);return typeof n=="string"&&typeof r=="boolean"&&(_n(n,r),yn(n,r)),r}}const dS="ConversationId",fS=(()=>({name:dS,setup(e){e.on("spanStart",t=>{const n=G().getScopeData(),r=ve().getScopeData(),s=n.conversationId||r.conversationId;s&&t.setAttribute(Rm,s)})}})),pS=fS;function hS(e,t,n,r,s){if(!e.fetchData)return;const{method:o,url:i}=e.fetchData,a=tt()&&t(i);if(e.endTimestamp&&a){const p=e.fetchData.__span;if(!p)return;const h=r[p];h&&(_S(h,e),mS(h,e,s),delete r[p]);return}const{spanOrigin:c="auto.http.browser",propagateTraceparent:u=!1}=typeof s=="object"?s:{spanOrigin:s},d=!!Te(),l=a&&d?ar(SS(i,o,c)):new xt;if(e.fetchData.__span=l.spanContext().spanId,r[l.spanContext().spanId]=l,n(e.fetchData.url)){const p=e.args[0],h={...e.args[1]||{}},m=gS(p,h,tt()&&d?l:void 0,u);m&&(e.args[1]=h,h.headers=m)}const f=x();if(f){const p={input:e.args,response:e.response,startTimestamp:e.startTimestamp,endTimestamp:e.endTimestamp};f.emit("beforeOutgoingRequestSpan",l,p)}return l}function mS(e,t,n){var s;const r=typeof n=="object"&&n!==null?n.onRequestSpanEnd:void 0;r==null||r(e,{headers:(s=t.response)==null?void 0:s.headers,error:t.error})}function gS(e,t,n,r){const s=Sf({span:n,propagateTraceparent:r}),o=s["sentry-trace"],i=s.baggage,a=s.traceparent;if(!o)return;const c=t.headers||(ba(e)?e.headers:void 0);if(c)if(yS(c)){const u=new Headers(c);if(u.get("sentry-trace")||u.set("sentry-trace",o),r&&a&&!u.get("traceparent")&&u.set("traceparent",a),i){const d=u.get("baggage");d?us(d)||u.set("baggage",`${d},${i}`):u.set("baggage",i)}return u}else if(Array.isArray(c)){const u=[...c];c.find(l=>l[0]==="sentry-trace")||u.push(["sentry-trace",o]),r&&a&&!c.find(l=>l[0]==="traceparent")&&u.push(["traceparent",a]);const d=c.find(l=>l[0]==="baggage"&&us(l[1]));return i&&!d&&u.push(["baggage",i]),u}else{const u="sentry-trace"in c?c["sentry-trace"]:void 0,d="traceparent"in c?c.traceparent:void 0,l="baggage"in c?c.baggage:void 0,f=l?Array.isArray(l)?[...l]:[l]:[],p=l&&(Array.isArray(l)?l.find(m=>us(m)):us(l));i&&!p&&f.push(i);const h={...c,"sentry-trace":u!=null?u:o,baggage:f.length>0?f.join(","):void 0};return r&&a&&!d&&(h.traceparent=a),h}else return{...s}}function _S(e,t){var n,r;if(t.response){Gs(e,t.response.status);const s=(r=(n=t.response)==null?void 0:n.headers)==null?void 0:r.get("content-length");if(s){const o=parseInt(s);o>0&&e.setAttribute("http.response_content_length",o)}}else t.error&&e.setStatus({code:ee,message:"internal_error"});e.end()}function us(e){return e.split(",").some(t=>t.trim().startsWith(wa))}function yS(e){return typeof Headers<"u"&&Rt(e,Headers)}function SS(e,t,n){if(e.startsWith("data:")){const o=qt(e);return{name:`${t} ${o}`,attributes:Nu(e,void 0,t,n)}}const r=Ha(e),s=r?j_(r):e;return{name:`${t} ${s}`,attributes:Nu(e,r,t,n)}}function Nu(e,t,n,r){const s={url:qt(e),type:"fetch","http.method":n,[oe]:r,[we]:"http.client"};return t&&(Ua(t)||(s["http.url"]=qt(t.href),s["server.address"]=t.host),t.search&&(s["http.query"]=t.search),t.hash&&(s["http.fragment"]=t.hash)),s}function bS(e,t={},n=G()){const{message:r,name:s,email:o,url:i,source:a,associatedEventId:c,tags:u}=e,d={contexts:{feedback:{contact_email:o,name:s,message:r,url:i,source:a,associated_event_id:c}},type:"feedback",level:"info",tags:u},l=(n==null?void 0:n.getClient())||x();return l&&l.emit("beforeSendFeedback",d,t),n.captureEvent(d,t)}function ur(e,t,n,r,s){Zs({level:e,message:t,attributes:n,severityNumber:s},r)}function ES(e,t,{scope:n}={}){ur("trace",e,t,n)}function TS(e,t,{scope:n}={}){ur("debug",e,t,n)}function vS(e,t,{scope:n}={}){ur("info",e,t,n)}function IS(e,t,{scope:n}={}){ur("warn",e,t,n)}function wS(e,t,{scope:n}={}){ur("error",e,t,n)}function kS(e,t,{scope:n}={}){ur("fatal",e,t,n)}const FA=Object.freeze(Object.defineProperty({__proto__:null,debug:TS,error:wS,fatal:kS,fmt:V_,info:vS,trace:ES,warn:IS},Symbol.toStringTag,{value:"Module"}));function ji(e,t,n){return"util"in F&&typeof F.util.format=="function"?F.util.format(...e):CS(e,t,n)}function CS(e,t,n){return e.map(r=>Yt(r)?String(r):JSON.stringify(ze(r,t,n))).join(" ")}function RS(e){return/%[sdifocO]/.test(e)}function AS(e,t){const n={},r=new Array(t.length).fill("{}").join(" ");return n["sentry.message.template"]=`${e} ${r}`,t.forEach((s,o)=>{n[`sentry.message.parameter.${o}`]=s}),n}const xS="ConsoleLogs",Ou={[oe]:"auto.log.console"},MS=((e={})=>{const t=e.levels||_a;return{name:xS,setup(n){const{enableLogs:r,normalizeDepth:s=3,normalizeMaxBreadth:o=1e3}=n.getOptions();if(!r){C&&_.warn("`enableLogs` is not enabled, ConsoleLogs integration disabled");return}Wa(({args:i,level:a})=>{if(x()!==n||!t.includes(a))return;const c=i[0],u=i.slice(1);if(a==="assert"){if(!c){const p=u.length>0?`Assertion failed: ${ji(u,s,o)}`:"Assertion failed";Zs({level:"error",message:p,attributes:Ou})}return}const d=a==="log",l=i.length>1&&typeof i[0]=="string"&&!RS(i[0]),f={...Ou,...l?AS(c,u):{}};Zs({level:d?"info":a,message:ji(i,s,o),severityNumber:d?10:void 0,attributes:f})})}}}),$A=MS;function ja(e,t,n,r){T_({type:e,name:t,value:n,unit:r==null?void 0:r.unit,attributes:r==null?void 0:r.attributes},{scope:r==null?void 0:r.scope})}function NS(e,t=1,n){ja("counter",e,t,n)}function OS(e,t,n){ja("gauge",e,t,n)}function LS(e,t,n){ja("distribution",e,t,n)}const BA=Object.freeze(Object.defineProperty({__proto__:null,count:NS,distribution:LS,gauge:OS},Symbol.toStringTag,{value:"Module"})),PS=["trace","debug","info","warn","error","fatal"];function UA(e={}){var r;const t=new Set((r=e.levels)!=null?r:PS),n=e.client;return{log(s){const{type:o,level:i,message:a,args:c,tag:u,date:d,...l}=s,f=n||x();if(!f)return;const p=$S(o,i);if(!t.has(p))return;const{normalizeDepth:h=3,normalizeMaxBreadth:m=1e3}=f.getOptions(),g=[];a&&g.push(a),c&&c.length>0&&g.push(ji(c,h,m));const y=g.join(" ");l["sentry.origin"]="auto.log.consola",u&&(l["consola.tag"]=u),o&&(l["consola.type"]=o),i!=null&&typeof i=="number"&&(l["consola.level"]=i),Zs({level:p,message:y,attributes:l})}}}const DS={silent:"trace",fatal:"fatal",error:"error",warn:"warn",log:"info",info:"info",success:"info",fail:"error",ready:"info",start:"info",box:"info",debug:"debug",trace:"trace",verbose:"debug",critical:"fatal",notice:"info"},FS={0:"fatal",1:"warn",2:"info",3:"info",4:"debug",5:"trace"};function $S(e,t){if(e==="verbose")return"debug";if(e==="silent")return"trace";if(e){const n=DS[e];if(n)return n}if(typeof t=="number"){const n=FS[t];if(n)return n}return"info"}const BS="gen_ai.prompt",No="gen_ai.system",He="gen_ai.request.model",za="gen_ai.request.stream",Oo="gen_ai.request.temperature",qa="gen_ai.request.max_tokens",Lo="gen_ai.request.frequency_penalty",Ga="gen_ai.request.presence_penalty",Po="gen_ai.request.top_p",Rf="gen_ai.request.top_k",US="gen_ai.request.encoding_format",HS="gen_ai.request.dimensions",sn="gen_ai.response.finish_reasons",Pt="gen_ai.response.model",Cn="gen_ai.response.id",WS="gen_ai.response.stop_reason",Sn="gen_ai.usage.input_tokens",bn="gen_ai.usage.output_tokens",En="gen_ai.usage.total_tokens",Kt="gen_ai.operation.name",Tn="sentry.sdk_meta.gen_ai.input.messages.original_length",lr="gen_ai.input.messages",qr="gen_ai.system_instructions",nt="gen_ai.response.text",Do="gen_ai.request.available_tools",Fo="gen_ai.response.streaming",yt="gen_ai.response.tool_calls",Af="gen_ai.agent.name",jS="gen_ai.pipeline.name",Va="gen_ai.conversation.id",zS="gen_ai.usage.cache_creation_input_tokens",qS="gen_ai.usage.cache_read_input_tokens",GS="gen_ai.invoke_agent",VS="gen_ai.embeddings.input",JS="gen_ai.tool.name",YS="gen_ai.tool.input",KS="gen_ai.tool.output",xf="openai.response.id",Mf="openai.response.model",Nf="openai.response.timestamp",XS="openai.usage.completion_tokens",QS="openai.usage.prompt_tokens",yr={CHAT:"chat",EMBEDDINGS:"embeddings"},Lu="anthropic.response.timestamp",Of=2e4,no=e=>new TextEncoder().encode(e).length,Ja=e=>no(JSON.stringify(e));function $o(e,t){if(no(e)<=t)return e;let n=0,r=e.length,s="";for(;n<=r;){const o=Math.floor((n+r)/2),i=e.slice(0,o);no(i)<=t?(s=i,n=o+1):r=o-1}return s}function ZS(e){return typeof e=="string"?e:"text"in e?e.text:""}function Pu(e,t){return typeof e=="string"?t:{...e,text:t}}function eb(e){return e!==null&&typeof e=="object"&&"content"in e&&typeof e.content=="string"}function tb(e){return e!==null&&typeof e=="object"&&"content"in e&&Array.isArray(e.content)}function vr(e){return!e||typeof e!="object"?!1:nb(e)||Lf(e)||"media_type"in e&&typeof e.media_type=="string"&&"data"in e||"image_url"in e&&typeof e.image_url=="string"&&e.image_url.startsWith("data:")||"type"in e&&(e.type==="blob"||e.type==="base64")||"b64_json"in e||"type"in e&&"result"in e&&e.type==="image_generation"||"uri"in e&&typeof e.uri=="string"&&e.uri.startsWith("data:")}function nb(e){return"type"in e&&typeof e.type=="string"&&"source"in e&&vr(e.source)}function Lf(e){return"inlineData"in e&&!!e.inlineData&&typeof e.inlineData=="object"&&"data"in e.inlineData&&typeof e.inlineData.data=="string"}function Pf(e){return e!==null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)&&e.parts.length>0}function rb(e,t){const n={...e,content:""},r=Ja(n),s=t-r;if(s<=0)return[];const o=$o(e.content,s);return[{...e,content:o}]}function sb(e,t){const{parts:n}=e,r=n.map(a=>Pu(a,"")),s=Ja({...e,parts:r});let o=t-s;if(o<=0)return[];const i=[];for(const a of n){const c=ZS(a),u=no(c);if(u<=o)i.push(a),o-=u;else if(i.length===0){const d=$o(c,o);d&&i.push(Pu(a,d));break}else break}return i.length<=0?[]:[{...e,parts:i}]}function ob(e,t){if(!e)return[];if(typeof e=="string"){const n=$o(e,t);return n?[n]:[]}return typeof e!="object"?[]:eb(e)?rb(e,t):Pf(e)?sb(e,t):[]}const Du="[Filtered]",ib=["image_url","data","content","b64_json","result","uri"];function xs(e){const t={...e};vr(t.source)&&(t.source=xs(t.source)),Lf(e)&&(t.inlineData={...e.inlineData,data:Du});for(const n of ib)typeof t[n]=="string"&&(t[n]=Du);return t}function zi(e){return e.map(n=>{let r;return n&&typeof n=="object"&&(tb(n)?r={...n,content:zi(n.content)}:"content"in n&&vr(n.content)&&(r={...n,content:xs(n.content)}),Pf(n)&&(r={...r!=null?r:n,parts:zi(n.parts)}),vr(r)?r=xs(r):vr(n)&&(r=xs(n))),r!=null?r:n})}function ab(e,t){if(!Array.isArray(e)||e.length===0)return e;const n=e[e.length-1],r=zi([n]),s=r[0];return Ja(s)<=t?r:ob(s,t)}function Bo(e){return ab(e,Of)}function cb(e){return $o(e,Of)}function Gr(e){return e.includes("messages")?"chat":e.includes("completions")?"text_completion":e.includes("generateContent")?"generate_content":e.includes("models")?"models":e.includes("chat")?"chat":e.split(".").pop()||"unknown"}function ro(e){return`gen_ai.${Gr(e)}`}function Df(e,t){return e?`${e}.${t}`:t}function Ya(e,t,n,r,s){if(t!==void 0&&e.setAttributes({[Sn]:t}),n!==void 0&&e.setAttributes({[bn]:n}),t!==void 0||n!==void 0||r!==void 0||s!==void 0){const o=(t!=null?t:0)+(n!=null?n:0)+(r!=null?r:0)+(s!=null?s:0);e.setAttributes({[En]:o})}}function Ff(e){if(typeof e=="string")return cb(e);if(Array.isArray(e)){const t=Bo(e);return JSON.stringify(t)}return JSON.stringify(e)}function Vr(e){if(!Array.isArray(e))return{systemInstructions:void 0,filteredMessages:e};const t=e.findIndex(i=>i&&typeof i=="object"&&"role"in i&&i.role==="system");if(t===-1)return{systemInstructions:void 0,filteredMessages:e};const n=e[t],r=typeof n.content=="string"?n.content:n.content!==void 0?JSON.stringify(n.content):void 0;if(!r)return{systemInstructions:void 0,filteredMessages:e};const s=JSON.stringify([{type:"text",content:r}]),o=[...e.slice(0,t),...e.slice(t+1)];return{systemInstructions:s,filteredMessages:o}}const ub=["responses.create","chat.completions.create","embeddings.create","conversations.create"],lb=["response.output_item.added","response.function_call_arguments.delta","response.function_call_arguments.done","response.output_item.done"],db=["response.created","response.in_progress","response.failed","response.completed","response.incomplete","response.queued","response.output_text.delta",...lb];function Ka(e){return e.includes("chat.completions")||e.includes("responses")?yr.CHAT:e.includes("embeddings")?yr.EMBEDDINGS:e.includes("conversations")?yr.CHAT:e.split(".").pop()||"unknown"}function Fu(e){return`gen_ai.${Ka(e)}`}function fb(e){return ub.includes(e)}function pb(e,t){return e?`${e}.${t}`:t}function hb(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="chat.completion"}function mb(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="response"}function gb(e){if(e===null||typeof e!="object"||!("object"in e))return!1;const t=e;return t.object==="list"&&typeof t.model=="string"&&t.model.toLowerCase().includes("embedding")}function _b(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="conversation"}function yb(e){return e!==null&&typeof e=="object"&&"type"in e&&typeof e.type=="string"&&e.type.startsWith("response.")}function Sb(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="chat.completion.chunk"}function bb(e,t,n){if(Xa(e,t.id,t.model,t.created),t.usage&&Uo(e,t.usage.prompt_tokens,t.usage.completion_tokens,t.usage.total_tokens),Array.isArray(t.choices)){const r=t.choices.map(s=>s.finish_reason).filter(s=>s!==null);if(r.length>0&&e.setAttributes({[sn]:JSON.stringify(r)}),n){const s=t.choices.map(o=>{var i;return(i=o.message)==null?void 0:i.tool_calls}).filter(o=>Array.isArray(o)&&o.length>0).flat();s.length>0&&e.setAttributes({[yt]:JSON.stringify(s)})}}}function Eb(e,t,n){if(Xa(e,t.id,t.model,t.created_at),t.status&&e.setAttributes({[sn]:JSON.stringify([t.status])}),t.usage&&Uo(e,t.usage.input_tokens,t.usage.output_tokens,t.usage.total_tokens),n){const r=t;if(Array.isArray(r.output)&&r.output.length>0){const s=r.output.filter(o=>typeof o=="object"&&o!==null&&o.type==="function_call");s.length>0&&e.setAttributes({[yt]:JSON.stringify(s)})}}}function Tb(e,t){e.setAttributes({[Mf]:t.model,[Pt]:t.model}),t.usage&&Uo(e,t.usage.prompt_tokens,void 0,t.usage.total_tokens)}function vb(e,t){const{id:n,created_at:r}=t;e.setAttributes({[xf]:n,[Cn]:n,[Va]:n}),r&&e.setAttributes({[Nf]:new Date(r*1e3).toISOString()})}function Uo(e,t,n,r){t!==void 0&&e.setAttributes({[QS]:t,[Sn]:t}),n!==void 0&&e.setAttributes({[XS]:n,[bn]:n}),r!==void 0&&e.setAttributes({[En]:r})}function Xa(e,t,n,r){e.setAttributes({[xf]:t,[Cn]:t}),e.setAttributes({[Mf]:n,[Pt]:n}),e.setAttributes({[Nf]:new Date(r*1e3).toISOString()})}function Ib(e){if("conversation"in e&&typeof e.conversation=="string")return e.conversation;if("previous_response_id"in e&&typeof e.previous_response_id=="string")return e.previous_response_id}function wb(e){var r;const t={[He]:(r=e.model)!=null?r:"unknown"};"temperature"in e&&(t[Oo]=e.temperature),"top_p"in e&&(t[Po]=e.top_p),"frequency_penalty"in e&&(t[Lo]=e.frequency_penalty),"presence_penalty"in e&&(t[Ga]=e.presence_penalty),"stream"in e&&(t[za]=e.stream),"encoding_format"in e&&(t[US]=e.encoding_format),"dimensions"in e&&(t[HS]=e.dimensions);const n=Ib(e);return n&&(t[Va]=n),t}function kb(e,t){for(const n of e){const r=n.index;if(!(r===void 0||!n.function))if(!(r in t.chatCompletionToolCalls))t.chatCompletionToolCalls[r]={...n,function:{name:n.function.name,arguments:n.function.arguments||""}};else{const s=t.chatCompletionToolCalls[r];n.function.arguments&&(s!=null&&s.function)&&(s.function.arguments+=n.function.arguments)}}}function Cb(e,t,n){var r,s,o,i,a,c;t.responseId=(r=e.id)!=null?r:t.responseId,t.responseModel=(s=e.model)!=null?s:t.responseModel,t.responseTimestamp=(o=e.created)!=null?o:t.responseTimestamp,e.usage&&(t.promptTokens=e.usage.prompt_tokens,t.completionTokens=e.usage.completion_tokens,t.totalTokens=e.usage.total_tokens);for(const u of(i=e.choices)!=null?i:[])n&&((a=u.delta)!=null&&a.content&&t.responseTexts.push(u.delta.content),(c=u.delta)!=null&&c.tool_calls&&kb(u.delta.tool_calls,t)),u.finish_reason&&t.finishReasons.push(u.finish_reason)}function Rb(e,t,n,r){var o,i,a;if(!(e&&typeof e=="object")){t.eventTypes.push("unknown:non-object");return}if(e instanceof Error){r.setStatus({code:ee,message:"internal_error"}),_e(e,{mechanism:{handled:!1,type:"auto.ai.openai.stream-response"}});return}if(!("type"in e))return;const s=e;if(!db.includes(s.type)){t.eventTypes.push(s.type);return}if(n&&(s.type==="response.output_item.done"&&"item"in s&&t.responsesApiToolCalls.push(s.item),s.type==="response.output_text.delta"&&"delta"in s&&s.delta)){t.responseTexts.push(s.delta);return}if("response"in s){const{response:c}=s;t.responseId=(o=c.id)!=null?o:t.responseId,t.responseModel=(i=c.model)!=null?i:t.responseModel,t.responseTimestamp=(a=c.created_at)!=null?a:t.responseTimestamp,c.usage&&(t.promptTokens=c.usage.input_tokens,t.completionTokens=c.usage.output_tokens,t.totalTokens=c.usage.total_tokens),c.status&&t.finishReasons.push(c.status),n&&c.output_text&&t.responseTexts.push(c.output_text)}}async function*Ab(e,t,n){const r={eventTypes:[],responseTexts:[],finishReasons:[],responseId:"",responseModel:"",responseTimestamp:0,promptTokens:void 0,completionTokens:void 0,totalTokens:void 0,chatCompletionToolCalls:{},responsesApiToolCalls:[]};try{for await(const s of e)Sb(s)?Cb(s,r,n):yb(s)&&Rb(s,r,n,t),yield s}finally{Xa(t,r.responseId,r.responseModel,r.responseTimestamp),Uo(t,r.promptTokens,r.completionTokens,r.totalTokens),t.setAttributes({[Fo]:!0}),r.finishReasons.length&&t.setAttributes({[sn]:JSON.stringify(r.finishReasons)}),n&&r.responseTexts.length&&t.setAttributes({[nt]:r.responseTexts.join("")});const o=[...Object.values(r.chatCompletionToolCalls),...r.responsesApiToolCalls];o.length>0&&t.setAttributes({[yt]:JSON.stringify(o)}),t.end()}}function xb(e){const t=Array.isArray(e.tools)?e.tools:[],r=e.web_search_options&&typeof e.web_search_options=="object"?[{type:"web_search_options",...e.web_search_options}]:[],s=[...t,...r];return s.length>0?JSON.stringify(s):void 0}function Mb(e,t){const n={[No]:"openai",[Kt]:Ka(t),[oe]:"auto.ai.openai"};if(e.length>0&&typeof e[0]=="object"&&e[0]!==null){const r=e[0],s=xb(r);s&&(n[Do]=s),Object.assign(n,wb(r))}else n[He]="unknown";return n}function Nb(e,t,n){var s;if(!t||typeof t!="object")return;const r=t;if(hb(r)){if(bb(e,r,n),n&&((s=r.choices)!=null&&s.length)){const o=r.choices.map(i=>{var a;return((a=i.message)==null?void 0:a.content)||""});e.setAttributes({[nt]:JSON.stringify(o)})}}else mb(r)?(Eb(e,r,n),n&&r.output_text&&e.setAttributes({[nt]:r.output_text})):gb(r)?Tb(e,r):_b(r)&&vb(e,r)}function $u(e,t,n){if(n===yr.EMBEDDINGS&&"input"in t){const a=t.input;if(a==null||typeof a=="string"&&a.length===0||Array.isArray(a)&&a.length===0)return;e.setAttribute(VS,typeof a=="string"?a:JSON.stringify(a));return}const r="input"in t?t.input:"messages"in t?t.messages:void 0;if(!r||Array.isArray(r)&&r.length===0)return;const{systemInstructions:s,filteredMessages:o}=Vr(r);s&&e.setAttribute(qr,s);const i=Ff(o);e.setAttribute(lr,i),Array.isArray(o)?e.setAttribute(Tn,o.length):e.setAttribute(Tn,1)}function Ob(e,t,n,r){return async function(...o){const i=Mb(o,t),a=i[He]||"unknown",c=Ka(t),u=o[0];return u&&typeof u=="object"&&u.stream===!0?Wt({name:`${c} ${a} stream-response`,op:Fu(t),attributes:i},async l=>{var f;try{r.recordInputs&&u&&$u(l,u,c);const p=await e.apply(n,o);return Ab(p,l,(f=r.recordOutputs)!=null?f:!1)}catch(p){throw l.setStatus({code:ee,message:"internal_error"}),_e(p,{mechanism:{handled:!1,type:"auto.ai.openai.stream",data:{function:t}}}),l.end(),p}}):rn({name:`${c} ${a}`,op:Fu(t),attributes:i},async l=>{try{r.recordInputs&&u&&$u(l,u,c);const f=await e.apply(n,o);return Nb(l,f,r.recordOutputs),f}catch(f){throw _e(f,{mechanism:{handled:!1,type:"auto.ai.openai",data:{function:t}}}),f}})}}function $f(e,t="",n){return new Proxy(e,{get(r,s){const o=r[s],i=pb(t,String(s));return typeof o=="function"&&fb(i)?Ob(o,i,r,n):typeof o=="function"?o.bind(r):o&&typeof o=="object"?$f(o,i,n):o}})}function HA(e,t){var s;const n=!!((s=x())!=null&&s.getOptions().sendDefaultPii),r={recordInputs:n,recordOutputs:n,...t};return $f(e,"",r)}function Lb(e,t){var n,r;return"type"in e&&typeof e.type=="string"&&e.type==="error"?(t.setStatus({code:ee,message:(r=(n=e.error)==null?void 0:n.type)!=null?r:"internal_error"}),_e(e.error,{mechanism:{handled:!1,type:"auto.ai.anthropic.anthropic_error"}}),!0):!1}function Pb(e,t){if(e.type==="message_delta"&&e.usage&&"output_tokens"in e.usage&&typeof e.usage.output_tokens=="number"&&(t.completionTokens=e.usage.output_tokens),e.message){const n=e.message;n.id&&(t.responseId=n.id),n.model&&(t.responseModel=n.model),n.stop_reason&&t.finishReasons.push(n.stop_reason),n.usage&&(typeof n.usage.input_tokens=="number"&&(t.promptTokens=n.usage.input_tokens),typeof n.usage.cache_creation_input_tokens=="number"&&(t.cacheCreationInputTokens=n.usage.cache_creation_input_tokens),typeof n.usage.cache_read_input_tokens=="number"&&(t.cacheReadInputTokens=n.usage.cache_read_input_tokens))}}function Db(e,t){e.type!=="content_block_start"||typeof e.index!="number"||!e.content_block||(e.content_block.type==="tool_use"||e.content_block.type==="server_tool_use")&&(t.activeToolBlocks[e.index]={id:e.content_block.id,name:e.content_block.name,inputJsonParts:[]})}function Fb(e,t,n){if(!(e.type!=="content_block_delta"||!e.delta)){if(typeof e.index=="number"&&"partial_json"in e.delta&&typeof e.delta.partial_json=="string"){const r=t.activeToolBlocks[e.index];r&&r.inputJsonParts.push(e.delta.partial_json)}n&&typeof e.delta.text=="string"&&t.responseTexts.push(e.delta.text)}}function $b(e,t){if(e.type!=="content_block_stop"||typeof e.index!="number")return;const n=t.activeToolBlocks[e.index];if(!n)return;const r=n.inputJsonParts.join("");let s;try{s=r?JSON.parse(r):{}}catch{s={__unparsed:r}}t.toolCalls.push({type:"tool_use",id:n.id,name:n.name,input:s}),delete t.activeToolBlocks[e.index]}function Bf(e,t,n,r){!(e&&typeof e=="object")||Lb(e,r)||(Pb(e,t),Db(e,t),Fb(e,t,n),$b(e,t))}function Bb(e,t,n){t.isRecording()&&(e.responseId&&t.setAttributes({[Cn]:e.responseId}),e.responseModel&&t.setAttributes({[Pt]:e.responseModel}),Ya(t,e.promptTokens,e.completionTokens,e.cacheCreationInputTokens,e.cacheReadInputTokens),t.setAttributes({[Fo]:!0}),e.finishReasons.length>0&&t.setAttributes({[sn]:JSON.stringify(e.finishReasons)}),n&&e.responseTexts.length>0&&t.setAttributes({[nt]:e.responseTexts.join("")}),n&&e.toolCalls.length>0&&t.setAttributes({[yt]:JSON.stringify(e.toolCalls)}),t.end())}async function*Ub(e,t,n){const r={responseTexts:[],finishReasons:[],responseId:"",responseModel:"",promptTokens:void 0,completionTokens:void 0,cacheCreationInputTokens:void 0,cacheReadInputTokens:void 0,toolCalls:[],activeToolBlocks:{}};try{for await(const s of e)Bf(s,r,n,t),yield s}finally{r.responseId&&t.setAttributes({[Cn]:r.responseId}),r.responseModel&&t.setAttributes({[Pt]:r.responseModel}),Ya(t,r.promptTokens,r.completionTokens,r.cacheCreationInputTokens,r.cacheReadInputTokens),t.setAttributes({[Fo]:!0}),r.finishReasons.length>0&&t.setAttributes({[sn]:JSON.stringify(r.finishReasons)}),n&&r.responseTexts.length>0&&t.setAttributes({[nt]:r.responseTexts.join("")}),n&&r.toolCalls.length>0&&t.setAttributes({[yt]:JSON.stringify(r.toolCalls)}),t.end()}}function Hb(e,t,n){const r={responseTexts:[],finishReasons:[],responseId:"",responseModel:"",promptTokens:void 0,completionTokens:void 0,cacheCreationInputTokens:void 0,cacheReadInputTokens:void 0,toolCalls:[],activeToolBlocks:{}};return e.on("streamEvent",s=>{Bf(s,r,n,t)}),e.on("message",()=>{Bb(r,t,n)}),e.on("error",s=>{_e(s,{mechanism:{handled:!1,type:"auto.ai.anthropic.stream_error"}}),t.isRecording()&&(t.setStatus({code:ee,message:"stream_error"}),t.end())}),e}const Wb=["messages.create","messages.stream","messages.countTokens","models.get","completions.create","models.retrieve","beta.messages.create"];function jb(e){return Wb.includes(e)}function zb(e,t){if(Array.isArray(t)&&t.length===0)return;const{systemInstructions:n,filteredMessages:r}=Vr(t);n&&e.setAttributes({[qr]:n});const s=Array.isArray(r)?r.length:1;e.setAttributes({[lr]:Ff(r),[Tn]:s})}function qb(e,t){t.error&&(e.setStatus({code:ee,message:t.error.type||"internal_error"}),_e(t.error,{mechanism:{handled:!1,type:"auto.ai.anthropic.anthropic_error"}}))}function Gb(e){const{system:t,messages:n,input:r}=e,s=typeof t=="string"?[{role:"system",content:e.system}]:[],o=Array.isArray(r)?r:r!=null?[r]:void 0,i=Array.isArray(n)?n:n!=null?[n]:[],a=o!=null?o:i;return[...s,...a]}function Vb(e,t){var r;const n={[No]:"anthropic",[Kt]:Gr(t),[oe]:"auto.ai.anthropic"};if(e.length>0&&typeof e[0]=="object"&&e[0]!==null){const s=e[0];s.tools&&Array.isArray(s.tools)&&(n[Do]=JSON.stringify(s.tools)),n[He]=(r=s.model)!=null?r:"unknown","temperature"in s&&(n[Oo]=s.temperature),"top_p"in s&&(n[Po]=s.top_p),"stream"in s&&(n[za]=s.stream),"top_k"in s&&(n[Rf]=s.top_k),"frequency_penalty"in s&&(n[Lo]=s.frequency_penalty),"max_tokens"in s&&(n[qa]=s.max_tokens)}else t==="models.retrieve"||t==="models.get"?n[He]=e[0]:n[He]="unknown";return n}function qi(e,t){const n=Gb(t);zb(e,n),"prompt"in t&&e.setAttributes({[BS]:JSON.stringify(t.prompt)})}function Jb(e,t){if("content"in t&&Array.isArray(t.content)){e.setAttributes({[nt]:t.content.map(r=>r.text).filter(r=>!!r).join("")});const n=[];for(const r of t.content)(r.type==="tool_use"||r.type==="server_tool_use")&&n.push(r);n.length>0&&e.setAttributes({[yt]:JSON.stringify(n)})}"completion"in t&&e.setAttributes({[nt]:t.completion}),"input_tokens"in t&&e.setAttributes({[nt]:JSON.stringify(t.input_tokens)})}function Yb(e,t){"id"in t&&"model"in t&&(e.setAttributes({[Cn]:t.id,[Pt]:t.model}),"created"in t&&typeof t.created=="number"&&e.setAttributes({[Lu]:new Date(t.created*1e3).toISOString()}),"created_at"in t&&typeof t.created_at=="number"&&e.setAttributes({[Lu]:new Date(t.created_at*1e3).toISOString()}),"usage"in t&&t.usage&&Ya(e,t.usage.input_tokens,t.usage.output_tokens,t.usage.cache_creation_input_tokens,t.usage.cache_read_input_tokens))}function Kb(e,t,n){if(!(!t||typeof t!="object")){if("type"in t&&t.type==="error"){qb(e,t);return}n&&Jb(e,t),Yb(e,t)}}function Bu(e,t,n){throw _e(e,{mechanism:{handled:!1,type:"auto.ai.anthropic",data:{function:n}}}),t.isRecording()&&(t.setStatus({code:ee,message:"internal_error"}),t.end()),e}function Xb(e,t,n,r,s,o,i,a,c,u,d){var p;const l=(p=s[He])!=null?p:"unknown",f={name:`${o} ${l} stream-response`,op:ro(i),attributes:s};return u&&!d?Wt(f,async h=>{var m;try{c.recordInputs&&a&&qi(h,a);const g=await e.apply(n,r);return Ub(g,h,(m=c.recordOutputs)!=null?m:!1)}catch(g){return Bu(g,h,i)}}):Wt(f,h=>{var m;try{c.recordInputs&&a&&qi(h,a);const g=t.apply(n,r);return Hb(g,h,(m=c.recordOutputs)!=null?m:!1)}catch(g){return Bu(g,h,i)}})}function Qb(e,t,n,r){return new Proxy(e,{apply(s,o,i){var p;const a=Vb(i,t),c=(p=a[He])!=null?p:"unknown",u=Gr(t),d=typeof i[0]=="object"?i[0]:void 0,l=!!(d!=null&&d.stream),f=t==="messages.stream";return l||f?Xb(e,s,n,i,a,u,t,d,r,l,f):rn({name:`${u} ${c}`,op:ro(t),attributes:a},h=>(r.recordInputs&&d&&qi(h,d),Co(()=>s.apply(n,i),m=>{_e(m,{mechanism:{handled:!1,type:"auto.ai.anthropic",data:{function:t}}})},()=>{},m=>Kb(h,m,r.recordOutputs))))}})}function Uf(e,t="",n){return new Proxy(e,{get(r,s){const o=r[s],i=Df(t,String(s));return typeof o=="function"&&jb(i)?Qb(o,i,r,n):typeof o=="function"?o.bind(r):o&&typeof o=="object"?Uf(o,i,n):o}})}function WA(e,t){var s;const n=!!((s=x())!=null&&s.getOptions().sendDefaultPii),r={recordInputs:n,recordOutputs:n,...t};return Uf(e,"",r)}const Uu=["models.generateContent","models.generateContentStream","chats.create","sendMessage","sendMessageStream"],Zb="google_genai",Hf="chats.create",eE="chat";function tE(e,t){var r;const n=e==null?void 0:e.promptFeedback;if(n!=null&&n.blockReason){const s=(r=n.blockReasonMessage)!=null?r:n.blockReason;return t.setStatus({code:ee,message:`Content blocked: ${s}`}),_e(`Content blocked: ${s}`,{mechanism:{handled:!1,type:"auto.ai.google_genai"}}),!0}return!1}function nE(e,t){typeof e.responseId=="string"&&(t.responseId=e.responseId),typeof e.modelVersion=="string"&&(t.responseModel=e.modelVersion);const n=e.usageMetadata;n&&(typeof n.promptTokenCount=="number"&&(t.promptTokens=n.promptTokenCount),typeof n.candidatesTokenCount=="number"&&(t.completionTokens=n.candidatesTokenCount),typeof n.totalTokenCount=="number"&&(t.totalTokens=n.totalTokenCount))}function rE(e,t,n){var r,s,o;Array.isArray(e.functionCalls)&&t.toolCalls.push(...e.functionCalls);for(const i of(r=e.candidates)!=null?r:[]){i!=null&&i.finishReason&&!t.finishReasons.includes(i.finishReason)&&t.finishReasons.push(i.finishReason);for(const a of(o=(s=i==null?void 0:i.content)==null?void 0:s.parts)!=null?o:[])n&&a.text&&t.responseTexts.push(a.text),a.functionCall&&t.toolCalls.push({type:"function",id:a.functionCall.id,name:a.functionCall.name,arguments:a.functionCall.args})}}function sE(e,t,n,r){!e||tE(e,r)||(nE(e,t),rE(e,t,n))}async function*oE(e,t,n){const r={responseTexts:[],finishReasons:[],toolCalls:[]};try{for await(const s of e)sE(s,r,n,t),yield s}finally{const s={[Fo]:!0};r.responseId&&(s[Cn]=r.responseId),r.responseModel&&(s[Pt]=r.responseModel),r.promptTokens!==void 0&&(s[Sn]=r.promptTokens),r.completionTokens!==void 0&&(s[bn]=r.completionTokens),r.totalTokens!==void 0&&(s[En]=r.totalTokens),r.finishReasons.length&&(s[sn]=JSON.stringify(r.finishReasons)),n&&r.responseTexts.length&&(s[nt]=r.responseTexts.join("")),n&&r.toolCalls.length&&(s[yt]=JSON.stringify(r.toolCalls)),t.setAttributes(s),t.end()}}function iE(e){if(Uu.includes(e))return!0;const t=e.split(".").pop();return Uu.includes(t)}function aE(e){return e.includes("Stream")}function Sr(e,t="user"){return typeof e=="string"?[{role:t,content:e}]:Array.isArray(e)?e.flatMap(n=>Sr(n,t)):typeof e!="object"||!e?[]:"role"in e&&typeof e.role=="string"?[e]:"parts"in e?[{...e,role:t}]:[{role:t,content:e}]}function Hu(e,t){if("model"in e&&typeof e.model=="string")return e.model;if(t&&typeof t=="object"){const n=t;if("model"in n&&typeof n.model=="string")return n.model;if("modelVersion"in n&&typeof n.modelVersion=="string")return n.modelVersion}return"unknown"}function cE(e){const t={};return"temperature"in e&&typeof e.temperature=="number"&&(t[Oo]=e.temperature),"topP"in e&&typeof e.topP=="number"&&(t[Po]=e.topP),"topK"in e&&typeof e.topK=="number"&&(t[Rf]=e.topK),"maxOutputTokens"in e&&typeof e.maxOutputTokens=="number"&&(t[qa]=e.maxOutputTokens),"frequencyPenalty"in e&&typeof e.frequencyPenalty=="number"&&(t[Lo]=e.frequencyPenalty),"presencePenalty"in e&&typeof e.presencePenalty=="number"&&(t[Ga]=e.presencePenalty),t}function uE(e,t,n){const r={[No]:Zb,[Kt]:Gr(e),[oe]:"auto.ai.google_genai"};if(t){if(r[He]=Hu(t,n),"config"in t&&typeof t.config=="object"&&t.config){const s=t.config;if(Object.assign(r,cE(s)),"tools"in s&&Array.isArray(s.tools)){const o=s.tools.flatMap(i=>i.functionDeclarations);r[Do]=JSON.stringify(o)}}}else r[He]=Hu({},n);return r}function Wu(e,t){const n=[];if("config"in t&&t.config&&typeof t.config=="object"&&"systemInstruction"in t.config&&t.config.systemInstruction&&n.push(...Sr(t.config.systemInstruction,"system")),"history"in t&&n.push(...Sr(t.history,"user")),"contents"in t&&n.push(...Sr(t.contents,"user")),"message"in t&&n.push(...Sr(t.message,"user")),Array.isArray(n)&&n.length){const{systemInstructions:r,filteredMessages:s}=Vr(n);r&&e.setAttribute(qr,r);const o=Array.isArray(s)?s.length:0;e.setAttributes({[Tn]:o,[lr]:JSON.stringify(Bo(s))})}}function lE(e,t,n){if(!(!t||typeof t!="object")){if(t.modelVersion&&e.setAttribute(Pt,t.modelVersion),t.usageMetadata&&typeof t.usageMetadata=="object"){const r=t.usageMetadata;typeof r.promptTokenCount=="number"&&e.setAttributes({[Sn]:r.promptTokenCount}),typeof r.candidatesTokenCount=="number"&&e.setAttributes({[bn]:r.candidatesTokenCount}),typeof r.totalTokenCount=="number"&&e.setAttributes({[En]:r.totalTokenCount})}if(n&&Array.isArray(t.candidates)&&t.candidates.length>0){const r=t.candidates.map(s=>{var o;return(o=s.content)!=null&&o.parts&&Array.isArray(s.content.parts)?s.content.parts.map(i=>typeof i.text=="string"?i.text:"").filter(i=>i.length>0).join(""):""}).filter(s=>s.length>0);r.length>0&&e.setAttributes({[nt]:r.join("")})}if(n&&t.functionCalls){const r=t.functionCalls;Array.isArray(r)&&r.length>0&&e.setAttributes({[yt]:JSON.stringify(r)})}}}function ju(e,t,n,r){const s=t===Hf;return new Proxy(e,{apply(o,i,a){var f;const c=a[0],u=uE(t,c,n),d=(f=u[He])!=null?f:"unknown",l=Gr(t);return aE(t)?Wt({name:`${l} ${d} stream-response`,op:ro(t),attributes:u},async p=>{try{r.recordInputs&&c&&Wu(p,c);const h=await o.apply(n,a);return oE(h,p,!!r.recordOutputs)}catch(h){throw p.setStatus({code:ee,message:"internal_error"}),_e(h,{mechanism:{handled:!1,type:"auto.ai.google_genai",data:{function:t}}}),p.end(),h}}):rn({name:s?`${l} ${d} create`:`${l} ${d}`,op:ro(t),attributes:u},p=>(r.recordInputs&&c&&Wu(p,c),Co(()=>o.apply(n,a),h=>{_e(h,{mechanism:{handled:!1,type:"auto.ai.google_genai",data:{function:t}}})},()=>{},h=>{s||lE(p,h,r.recordOutputs)})))}})}function Gi(e,t="",n){return new Proxy(e,{get:(r,s,o)=>{const i=Reflect.get(r,s,o),a=Df(t,String(s));if(typeof i=="function"&&iE(a)){if(a===Hf){const c=ju(i,a,r,n);return function(...d){const l=c(...d);return l&&typeof l=="object"?Gi(l,eE,n):l}}return ju(i,a,r,n)}return typeof i=="function"?i.bind(r):i&&typeof i=="object"?Gi(i,a,n):i}})}function jA(e,t){var s;const n=!!((s=x())!=null&&s.getOptions().sendDefaultPii),r={recordInputs:n,recordOutputs:n,...t};return Gi(e,"",r)}const br="auto.ai.langchain",dE={human:"user",ai:"assistant",assistant:"assistant",system:"system",function:"function",tool:"tool"},Qe=(e,t,n)=>{n!=null&&(e[t]=n)},je=(e,t,n)=>{const r=Number(n);Number.isNaN(r)||(e[t]=r)};function Ue(e){if(typeof e=="string")return e;try{return JSON.stringify(e)}catch{return String(e)}}function gr(e){var n;const t=e.toLowerCase();return(n=dE[t])!=null?n:t}function zu(e){return e.includes("System")?"system":e.includes("Human")?"user":e.includes("AI")||e.includes("Assistant")?"assistant":e.includes("Function")?"function":e.includes("Tool")?"tool":"user"}function qu(e){if(!(!e||Array.isArray(e)))return e.invocation_params}function Qa(e){return e.map(t=>{var s,o;const n=t._getType;if(typeof n=="function"){const i=n.call(t);return{role:gr(i),content:Ue(t.content)}}if(t.lc===1&&t.kwargs){const i=t.id,a=Array.isArray(i)&&i.length>0?i[i.length-1]:"",c=typeof a=="string"?zu(a):"user";return{role:gr(c),content:Ue((s=t.kwargs)==null?void 0:s.content)}}if(t.type){const i=String(t.type).toLowerCase();return{role:gr(i),content:Ue(t.content)}}if(t.role)return{role:gr(String(t.role)),content:Ue(t.content)};const r=(o=t.constructor)==null?void 0:o.name;return r&&r!=="Object"?{role:gr(zu(r)),content:Ue(t.content)}:{role:"user",content:Ue(t.content)}})}function fE(e,t,n){var d,l,f,p,h;const r={},s="kwargs"in e?e.kwargs:void 0,o=(l=(d=t==null?void 0:t.temperature)!=null?d:n==null?void 0:n.ls_temperature)!=null?l:s==null?void 0:s.temperature;je(r,Oo,o);const i=(p=(f=t==null?void 0:t.max_tokens)!=null?f:n==null?void 0:n.ls_max_tokens)!=null?p:s==null?void 0:s.max_tokens;je(r,qa,i);const a=(h=t==null?void 0:t.top_p)!=null?h:s==null?void 0:s.top_p;je(r,Po,a);const c=t==null?void 0:t.frequency_penalty;je(r,Lo,c);const u=t==null?void 0:t.presence_penalty;return je(r,Ga,u),t&&"stream"in t&&Qe(r,za,!!t.stream),r}function Wf(e,t,n,r,s){return{[No]:Ue(e!=null?e:"langchain"),[Kt]:"chat",[He]:Ue(t),[oe]:br,...fE(n,r,s)}}function pE(e,t,n,r,s){var c,u;const o=s==null?void 0:s.ls_provider,i=(u=(c=r==null?void 0:r.model)!=null?c:s==null?void 0:s.ls_model_name)!=null?u:"unknown",a=Wf(o,i,e,r,s);if(n&&Array.isArray(t)&&t.length>0){Qe(a,Tn,t.length);const d=t.map(l=>({role:"user",content:l}));Qe(a,lr,Ue(d))}return a}function hE(e,t,n,r,s){var c,u,d,l;const o=(u=s==null?void 0:s.ls_provider)!=null?u:(c=e.id)==null?void 0:c[2],i=(l=(d=r==null?void 0:r.model)!=null?d:s==null?void 0:s.ls_model_name)!=null?l:"unknown",a=Wf(o,i,e,r,s);if(n&&Array.isArray(t)&&t.length>0){const f=Qa(t.flat()),{systemInstructions:p,filteredMessages:h}=Vr(f);p&&Qe(a,qr,p);const m=Array.isArray(h)?h.length:0;Qe(a,Tn,m);const g=Bo(h);Qe(a,lr,Ue(g))}return a}function mE(e,t){var s;const n=[],r=e.flat();for(const o of r){const i=(s=o.message)==null?void 0:s.content;if(Array.isArray(i))for(const a of i){const c=a;c.type==="tool_use"&&n.push(c)}}n.length>0&&Qe(t,yt,Ue(n))}function gE(e,t){if(!e)return;const n=e.tokenUsage,r=e.usage;if(n)je(t,Sn,n.promptTokens),je(t,bn,n.completionTokens),je(t,En,n.totalTokens);else if(r){je(t,Sn,r.input_tokens),je(t,bn,r.output_tokens);const s=Number(r.input_tokens),o=Number(r.output_tokens),i=(Number.isNaN(s)?0:s)+(Number.isNaN(o)?0:o);i>0&&je(t,En,i),r.cache_creation_input_tokens!==void 0&&je(t,zS,r.cache_creation_input_tokens),r.cache_read_input_tokens!==void 0&&je(t,qS,r.cache_read_input_tokens)}}function _E(e,t){var u,d,l,f,p,h,m,g;if(!e)return;const n={};if(Array.isArray(e.generations)){const y=e.generations.flat().map(S=>{var w,E;return(w=S.generationInfo)!=null&&w.finish_reason?S.generationInfo.finish_reason:(E=S.generation_info)!=null&&E.finish_reason?S.generation_info.finish_reason:null}).filter(S=>typeof S=="string");if(y.length>0&&Qe(n,sn,Ue(y)),mE(e.generations,n),t){const S=e.generations.flat().map(w=>{var E,D;return(D=w.text)!=null?D:(E=w.message)==null?void 0:E.content}).filter(w=>typeof w=="string");S.length>0&&Qe(n,nt,Ue(S))}}gE(e.llmOutput,n);const r=e.llmOutput,s=(d=(u=e.generations)==null?void 0:u[0])==null?void 0:d[0],o=s==null?void 0:s.message,i=(p=(l=r==null?void 0:r.model_name)!=null?l:r==null?void 0:r.model)!=null?p:(f=o==null?void 0:o.response_metadata)==null?void 0:f.model_name;i&&Qe(n,Pt,i);const a=(h=r==null?void 0:r.id)!=null?h:o==null?void 0:o.id;a&&Qe(n,Cn,a);const c=(g=r==null?void 0:r.stop_reason)!=null?g:(m=o==null?void 0:o.response_metadata)==null?void 0:m.finish_reason;return c&&Qe(n,WS,Ue(c)),n}function zA(e={}){var i,a;const t=(i=e.recordInputs)!=null?i:!1,n=(a=e.recordOutputs)!=null?a:!1,r=new Map,s=c=>{const u=r.get(c);u!=null&&u.isRecording()&&(u.end(),r.delete(c))},o={lc_serializable:!1,lc_namespace:["langchain_core","callbacks","sentry"],lc_secrets:void 0,lc_attributes:void 0,lc_aliases:void 0,lc_serializable_keys:void 0,lc_id:["langchain_core","callbacks","sentry"],lc_kwargs:{},name:"SentryCallbackHandler",ignoreLLM:!1,ignoreChain:!1,ignoreAgent:!1,ignoreRetriever:!1,ignoreCustomEvent:!1,raiseError:!1,awaitHandlers:!0,handleLLMStart(c,u,d,l,f,p,h,m){const g=qu(p),y=pE(c,u,t,g,h),S=y[He],w=y[Kt];Wt({name:`${w} ${S}`,op:"gen_ai.chat",attributes:{...y,[we]:"gen_ai.chat"}},E=>(r.set(d,E),E))},handleChatModelStart(c,u,d,l,f,p,h,m){const g=qu(p),y=hE(c,u,t,g,h),S=y[He],w=y[Kt];Wt({name:`${w} ${S}`,op:"gen_ai.chat",attributes:{...y,[we]:"gen_ai.chat"}},E=>(r.set(d,E),E))},handleLLMEnd(c,u,d,l,f){const p=r.get(u);if(p!=null&&p.isRecording()){const h=_E(c,n);h&&p.setAttributes(h),s(u)}},handleLLMError(c,u){const d=r.get(u);d!=null&&d.isRecording()&&(d.setStatus({code:ee,message:"llm_error"}),s(u)),_e(c,{mechanism:{handled:!1,type:`${br}.llm_error_handler`}})},handleChainStart(c,u,d,l){const f=c.name||"unknown_chain",p={[oe]:"auto.ai.langchain","langchain.chain.name":f};t&&(p["langchain.chain.inputs"]=JSON.stringify(u)),Wt({name:`chain ${f}`,op:"gen_ai.invoke_agent",attributes:{...p,[we]:"gen_ai.invoke_agent"}},h=>(r.set(d,h),h))},handleChainEnd(c,u){const d=r.get(u);d!=null&&d.isRecording()&&(n&&d.setAttributes({"langchain.chain.outputs":JSON.stringify(c)}),s(u))},handleChainError(c,u){const d=r.get(u);d!=null&&d.isRecording()&&(d.setStatus({code:ee,message:"chain_error"}),s(u)),_e(c,{mechanism:{handled:!1,type:`${br}.chain_error_handler`}})},handleToolStart(c,u,d,l){const f=c.name||"unknown_tool",p={[oe]:br,[JS]:f};t&&(p[YS]=u),Wt({name:`execute_tool ${f}`,op:"gen_ai.execute_tool",attributes:{...p,[we]:"gen_ai.execute_tool"}},h=>(r.set(d,h),h))},handleToolEnd(c,u){const d=r.get(u);d!=null&&d.isRecording()&&(n&&d.setAttributes({[KS]:JSON.stringify(c)}),s(u))},handleToolError(c,u){const d=r.get(u);d!=null&&d.isRecording()&&(d.setStatus({code:ee,message:"tool_error"}),s(u)),_e(c,{mechanism:{handled:!1,type:`${br}.tool_error_handler`}})},copy(){return o},toJSON(){return{lc:1,type:"not_implemented",id:o.lc_id}},toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:o.lc_id}}};return o}const jf="auto.ai.langgraph";function yE(e){if(!e||e.length===0)return null;const t=[];for(const n of e)if(n&&typeof n=="object"){const r=n.tool_calls;r&&Array.isArray(r)&&t.push(...r)}return t.length>0?t:null}function SE(e){const t=e;let n=0,r=0,s=0;if(t.usage_metadata&&typeof t.usage_metadata=="object"){const o=t.usage_metadata;return typeof o.input_tokens=="number"&&(n=o.input_tokens),typeof o.output_tokens=="number"&&(r=o.output_tokens),typeof o.total_tokens=="number"&&(s=o.total_tokens),{inputTokens:n,outputTokens:r,totalTokens:s}}if(t.response_metadata&&typeof t.response_metadata=="object"){const o=t.response_metadata;if(o.tokenUsage&&typeof o.tokenUsage=="object"){const i=o.tokenUsage;typeof i.promptTokens=="number"&&(n=i.promptTokens),typeof i.completionTokens=="number"&&(r=i.completionTokens),typeof i.totalTokens=="number"&&(s=i.totalTokens)}}return{inputTokens:n,outputTokens:r,totalTokens:s}}function bE(e,t){const n=t;if(n.response_metadata&&typeof n.response_metadata=="object"){const r=n.response_metadata;r.model_name&&typeof r.model_name=="string"&&e.setAttribute(Pt,r.model_name),r.finish_reason&&typeof r.finish_reason=="string"&&e.setAttribute(sn,[r.finish_reason])}}function EE(e){var n,r,s,o,i,a,c,u;if(!((o=(s=(r=(n=e.builder)==null?void 0:n.nodes)==null?void 0:r.tools)==null?void 0:s.runnable)!=null&&o.tools))return null;const t=(u=(c=(a=(i=e.builder)==null?void 0:i.nodes)==null?void 0:a.tools)==null?void 0:c.runnable)==null?void 0:u.tools;return!t||!Array.isArray(t)||t.length===0?null:t.map(d=>{var l,f,p;return{name:(l=d.lc_kwargs)==null?void 0:l.name,description:(f=d.lc_kwargs)==null?void 0:f.description,schema:(p=d.lc_kwargs)==null?void 0:p.schema}})}function TE(e,t,n){var f;const r=n,s=r==null?void 0:r.messages;if(!s||!Array.isArray(s))return;const o=(f=t==null?void 0:t.length)!=null?f:0,i=s.length>o?s.slice(o):[];if(i.length===0)return;const a=yE(i);a&&e.setAttribute(yt,JSON.stringify(a));const c=Qa(i);e.setAttribute(nt,JSON.stringify(c));let u=0,d=0,l=0;for(const p of i){const h=SE(p);u+=h.inputTokens,d+=h.outputTokens,l+=h.totalTokens,bE(e,p)}u>0&&e.setAttribute(Sn,u),d>0&&e.setAttribute(bn,d),l>0&&e.setAttribute(En,l)}function vE(e,t){return new Proxy(e,{apply(n,r,s){return rn({op:"gen_ai.create_agent",name:"create_agent",attributes:{[oe]:jf,[we]:"gen_ai.create_agent",[Kt]:"create_agent"}},o=>{try{const i=Reflect.apply(n,r,s),a=s.length>0?s[0]:{};a!=null&&a.name&&typeof a.name=="string"&&(o.setAttribute(Af,a.name),o.updateName(`create_agent ${a.name}`));const c=i.invoke;return c&&typeof c=="function"&&(i.invoke=IE(c.bind(i),i,a,t)),i}catch(i){throw o.setStatus({code:ee,message:"internal_error"}),_e(i,{mechanism:{handled:!1,type:"auto.ai.langgraph.error"}}),i}})}})}function IE(e,t,n,r){return new Proxy(e,{apply(s,o,i){return rn({op:"gen_ai.invoke_agent",name:"invoke_agent",attributes:{[oe]:jf,[we]:GS,[Kt]:"invoke_agent"}},async a=>{var c;try{const u=n==null?void 0:n.name;u&&typeof u=="string"&&(a.setAttribute(jS,u),a.setAttribute(Af,u),a.updateName(`invoke_agent ${u}`));const d=i.length>1?i[1]:void 0,l=d==null?void 0:d.configurable,f=l==null?void 0:l.thread_id;f&&typeof f=="string"&&a.setAttribute(Va,f);const p=EE(t);p&&a.setAttribute(Do,JSON.stringify(p));const h=r.recordInputs,m=r.recordOutputs,g=i.length>0?(c=i[0].messages)!=null?c:[]:[];if(g&&h){const S=Qa(g),{systemInstructions:w,filteredMessages:E}=Vr(S);w&&a.setAttribute(qr,w);const D=Bo(E),L=Array.isArray(E)?E.length:0;a.setAttributes({[lr]:JSON.stringify(D),[Tn]:L})}const y=await Reflect.apply(s,o,i);return m&&TE(a,g!=null?g:null,y),y}catch(u){throw a.setStatus({code:ee,message:"internal_error"}),_e(u,{mechanism:{handled:!1,type:"auto.ai.langgraph.error"}}),u}})}})}function qA(e,t){const n=t||{};return e.compile=vE(e.compile.bind(e),n),e}function zf(e){if(e!==void 0)return e>=400&&e<500?"warning":e>=500?"error":void 0}const Vn=F;function wE(){return"history"in Vn&&!!Vn.history}function kE(){if(!("fetch"in Vn))return!1;try{return new Headers,new Request("data:,"),new Response,!0}catch{return!1}}function Vi(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function qf(){var n;if(typeof EdgeRuntime=="string")return!0;if(!kE())return!1;if(Vi(Vn.fetch))return!0;let e=!1;const t=Vn.document;if(t&&typeof t.createElement=="function")try{const r=t.createElement("iframe");r.hidden=!0,t.head.appendChild(r),(n=r.contentWindow)!=null&&n.fetch&&(e=Vi(r.contentWindow.fetch)),t.head.removeChild(r)}catch(r){C&&_.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",r)}return e}function CE(){return"ReportingObserver"in Vn}function Za(e,t){const n="fetch";Zt(n,e),en(n,()=>Gf(void 0,t))}function RE(e){const t="fetch-body-resolved";Zt(t,e),en(t,()=>Gf(xE))}function Gf(e,t=!1){t&&!qf()||Ce(F,"fetch",function(n){return function(...r){const s=new Error,{method:o,url:i}=ME(r),a={args:r,fetchData:{method:o,url:i},startTimestamp:me()*1e3,virtualError:s,headers:NE(r)};return e||et("fetch",{...a}),n.apply(F,r).then(async c=>(e?e(c):et("fetch",{...a,endTimestamp:me()*1e3,response:c}),c),c=>{var f;et("fetch",{...a,endTimestamp:me()*1e3,error:c}),vt(c)&&c.stack===void 0&&(c.stack=s.stack,Pe(c,"framesToPop",1));const u=x(),d=(f=u==null?void 0:u.getOptions().enhanceFetchErrorMessages)!=null?f:"always";if(d!==!1&&c instanceof TypeError&&(c.message==="Failed to fetch"||c.message==="Load failed"||c.message==="NetworkError when attempting to fetch resource."))try{const h=new URL(a.fetchData.url).host;d==="always"?c.message=`${c.message} (${h})`:Pe(c,"__sentry_fetch_url_host__",h)}catch{}throw c})}})}async function AE(e,t){if(e!=null&&e.body){const n=e.body,r=n.getReader(),s=setTimeout(()=>{n.cancel().then(null,()=>{})},90*1e3);let o=!0;for(;o;){let i;try{i=setTimeout(()=>{n.cancel().then(null,()=>{})},5e3);const{done:a}=await r.read();clearTimeout(i),a&&(t(),o=!1)}catch{o=!1}finally{clearTimeout(i)}}clearTimeout(s),r.releaseLock(),n.cancel().then(null,()=>{})}}function xE(e){let t;try{t=e.clone()}catch{return}AE(t,()=>{et("fetch-body-resolved",{endTimestamp:me()*1e3,response:e})})}function Ms(e,t){return!!e&&typeof e=="object"&&!!e[t]}function Gu(e){return typeof e=="string"?e:e?Ms(e,"url")?e.url:e.toString?e.toString():"":""}function ME(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){const[n,r]=e;return{url:Gu(n),method:Ms(r,"method")?String(r.method).toUpperCase():ba(n)&&Ms(n,"method")?String(n.method).toUpperCase():"GET"}}const t=e[0];return{url:Gu(t),method:Ms(t,"method")?String(t.method).toUpperCase():"GET"}}function NE(e){const[t,n]=e;try{if(typeof n=="object"&&n!==null&&"headers"in n&&n.headers)return new Headers(n.headers);if(ba(t))return new Headers(t.headers)}catch{}}function OE(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function LE(){return"npm"}function PE(){return!OE()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function so(){return typeof window<"u"&&(!PE()||DE())}function DE(){const e=F.process;return(e==null?void 0:e.type)==="renderer"}const ot=F,ae=ot.document,Er=ot.navigator,Vf="Report a Bug",FE="Cancel",$E="Send Bug Report",BE="Confirm",UE="Report a Bug",HE="your.email@example.org",WE="Email",jE="What's the bug? What did you expect?",zE="Description",qE="Your Name",GE="Name",VE="Thank you for your report!",JE="(required)",YE="Add a screenshot",KE="Remove screenshot",XE="Highlight",QE="Hide",ZE="Remove",eT="widget",tT="api",nT=5e3,rT=(e,t={includeReplay:!0})=>{if(!e.message)throw new Error("Unable to submit feedback with empty message");const n=x();if(!n)throw new Error("No client setup, cannot send feedback.");e.tags&&Object.keys(e.tags).length&&G().setTags(e.tags);const r=bS({source:tT,url:wn(),...e},t);return new Promise((s,o)=>{const i=setTimeout(()=>o("Unable to determine if Feedback was correctly sent."),3e4),a=n.on("afterSendEvent",(c,u)=>{if(c.event_id===r)return clearTimeout(i),a(),u!=null&&u.statusCode&&u.statusCode>=200&&u.statusCode<300?s(r):(u==null?void 0:u.statusCode)===403?o("Unable to send feedback. This could be because this domain is not in your list of allowed domains."):o("Unable to send feedback. This could be because of network issues, or because you are using an ad-blocker.")})})},Ns=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function sT(){return!(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(Er.userAgent)||/Macintosh/i.test(Er.userAgent)&&Er.maxTouchPoints&&Er.maxTouchPoints>1||!isSecureContext)}function ls(e,t){return{...e,...t,tags:{...e.tags,...t.tags},onFormOpen:()=>{var n,r;(n=t.onFormOpen)==null||n.call(t),(r=e.onFormOpen)==null||r.call(e)},onFormClose:()=>{var n,r;(n=t.onFormClose)==null||n.call(t),(r=e.onFormClose)==null||r.call(e)},onSubmitSuccess:(n,r)=>{var s,o;(s=t.onSubmitSuccess)==null||s.call(t,n,r),(o=e.onSubmitSuccess)==null||o.call(e,n,r)},onSubmitError:n=>{var r,s;(r=t.onSubmitError)==null||r.call(t,n),(s=e.onSubmitError)==null||s.call(e,n)},onFormSubmitted:()=>{var n,r;(n=t.onFormSubmitted)==null||n.call(t),(r=e.onFormSubmitted)==null||r.call(e)},themeDark:{...e.themeDark,...t.themeDark},themeLight:{...e.themeLight,...t.themeLight}}}function oT(e){const t=ae.createElement("style");return t.textContent=`
.widget__actor {
  position: fixed;
  z-index: var(--z-index);
  margin: var(--page-margin);
  inset: var(--actor-inset);

  display: flex;
  align-items: center;
  gap: 8px;
  padding: 16px;

  font-family: inherit;
  font-size: var(--font-size);
  font-weight: 600;
  line-height: 1.14em;
  text-decoration: none;

  background: var(--actor-background, var(--background));
  border-radius: var(--actor-border-radius, 1.7em/50%);
  border: var(--actor-border, var(--border));
  box-shadow: var(--actor-box-shadow, var(--box-shadow));
  color: var(--actor-color, var(--foreground));
  fill: var(--actor-color, var(--foreground));
  cursor: pointer;
  opacity: 1;
  transition: transform 0.2s ease-in-out;
  transform: translate(0, 0) scale(1);
}
.widget__actor[aria-hidden="true"] {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
  transform: translate(0, 16px) scale(0.98);
}

.widget__actor:hover {
  background: var(--actor-hover-background, var(--background));
  filter: var(--interactive-filter);
}

.widget__actor svg {
  width: 1.14em;
  height: 1.14em;
}

@media (max-width: 600px) {
  .widget__actor span {
    display: none;
  }
}
`,e&&t.setAttribute("nonce",e),t}function Ge(e,t){return Object.entries(t).forEach(([n,r])=>{e.setAttributeNS(null,n,r)}),e}const xn=20,iT="http://www.w3.org/2000/svg";function aT(){const e=a=>ot.document.createElementNS(iT,a),t=Ge(e("svg"),{width:`${xn}`,height:`${xn}`,viewBox:`0 0 ${xn} ${xn}`,fill:"var(--actor-color, var(--foreground))"}),n=Ge(e("g"),{clipPath:"url(#clip0_57_80)"}),r=Ge(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});t.appendChild(n).appendChild(r);const s=e("defs"),o=Ge(e("clipPath"),{id:"clip0_57_80"}),i=Ge(e("rect"),{width:`${xn}`,height:`${xn}`,fill:"white"});return o.appendChild(i),s.appendChild(o),t.appendChild(s).appendChild(o).appendChild(i),t}function cT({triggerLabel:e,triggerAriaLabel:t,shadow:n,styleNonce:r}){const s=ae.createElement("button");if(s.type="button",s.className="widget__actor",s.ariaHidden="false",s.ariaLabel=t||e||Vf,s.appendChild(aT()),e){const i=ae.createElement("span");i.appendChild(ae.createTextNode(e)),s.appendChild(i)}const o=oT(r);return{el:s,appendToDom(){n.appendChild(o),n.appendChild(s)},removeFromDom(){s.remove(),o.remove()},show(){s.ariaHidden="false"},hide(){s.ariaHidden="true"}}}const Jf="rgba(88, 74, 192, 1)",uT={foreground:"#2b2233",background:"#ffffff",accentForeground:"white",accentBackground:Jf,successColor:"#268d75",errorColor:"#df3338",border:"1.5px solid rgba(41, 35, 47, 0.13)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(95%)"},Vu={foreground:"#ebe6ef",background:"#29232f",accentForeground:"white",accentBackground:Jf,successColor:"#2da98c",errorColor:"#f55459",border:"1.5px solid rgba(235, 230, 239, 0.15)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(150%)"};function Ju(e){return`
  --foreground: ${e.foreground};
  --background: ${e.background};
  --accent-foreground: ${e.accentForeground};
  --accent-background: ${e.accentBackground};
  --success-color: ${e.successColor};
  --error-color: ${e.errorColor};
  --border: ${e.border};
  --box-shadow: ${e.boxShadow};
  --outline: ${e.outline};
  --interactive-filter: ${e.interactiveFilter};
  `}function lT({colorScheme:e,themeDark:t,themeLight:n,styleNonce:r}){const s=ae.createElement("style");return s.textContent=`
:host {
  --font-family: system-ui, 'Helvetica Neue', Arial, sans-serif;
  --font-size: 14px;
  --z-index: 100000;

  --page-margin: 16px;
  --inset: auto 0 0 auto;
  --actor-inset: var(--inset);

  font-family: var(--font-family);
  font-size: var(--font-size);

  ${e!=="system"?`color-scheme: only ${e};`:""}

  ${Ju(e==="dark"?{...Vu,...t}:{...uT,...n})}
}

${e==="system"?`
@media (prefers-color-scheme: dark) {
  :host {
    color-scheme: only dark;

    ${Ju({...Vu,...t})}
  }
}`:""}
`,r&&s.setAttribute("nonce",r),s}const Yf=({lazyLoadIntegration:e,getModalIntegration:t,getScreenshotIntegration:n})=>(({id:s="sentry-feedback",autoInject:o=!0,showBranding:i=!0,isEmailRequired:a=!1,isNameRequired:c=!1,showEmail:u=!0,showName:d=!0,enableScreenshot:l=!0,useSentryUser:f={email:"email",name:"username"},tags:p,styleNonce:h,scriptNonce:m,colorScheme:g="system",themeLight:y={},themeDark:S={},addScreenshotButtonLabel:w=YE,cancelButtonLabel:E=FE,confirmButtonLabel:D=BE,emailLabel:L=WE,emailPlaceholder:b=HE,formTitle:A=UE,isRequiredLabel:$=JE,messageLabel:T=zE,messagePlaceholder:M=jE,nameLabel:R=GE,namePlaceholder:N=qE,removeScreenshotButtonLabel:O=KE,submitButtonLabel:V=$E,successMessageText:K=VE,triggerLabel:X=Vf,triggerAriaLabel:v="",highlightToolText:W=XE,hideToolText:k=QE,removeHighlightText:z=ZE,onFormOpen:se,onFormClose:re,onSubmitSuccess:Se,onSubmitError:Me,onFormSubmitted:Dt}={})=>{const Ne={id:s,autoInject:o,showBranding:i,isEmailRequired:a,isNameRequired:c,showEmail:u,showName:d,enableScreenshot:l,useSentryUser:f,tags:p,styleNonce:h,scriptNonce:m,colorScheme:g,themeDark:S,themeLight:y,triggerLabel:X,triggerAriaLabel:v,cancelButtonLabel:E,submitButtonLabel:V,confirmButtonLabel:D,formTitle:A,emailLabel:L,emailPlaceholder:b,messageLabel:T,messagePlaceholder:M,nameLabel:R,namePlaceholder:N,successMessageText:K,isRequiredLabel:$,addScreenshotButtonLabel:w,removeScreenshotButtonLabel:O,highlightToolText:W,hideToolText:k,removeHighlightText:z,onFormClose:re,onFormOpen:se,onSubmitError:Me,onSubmitSuccess:Se,onFormSubmitted:Dt};let De=null,dt=[];const Ft=te=>{if(!De){const fe=ae.createElement("div");fe.id=String(te.id),ae.body.appendChild(fe),De=fe.attachShadow({mode:"open"}),De.appendChild(lT(te))}return De},pr=async te=>{const fe=te.enableScreenshot&&sT();let Fe,ke;try{Fe=(t?t():await e("feedbackModalIntegration",m))(),lu(Fe)}catch{throw Ns&&_.error("[Feedback] Error when trying to load feedback integrations. Try using `feedbackSyncIntegration` in your `Sentry.init`."),new Error("[Feedback] Missing feedback modal integration!")}try{const Re=fe?n?n():await e("feedbackScreenshotIntegration",m):void 0;Re&&(ke=Re(),lu(ke))}catch{Ns&&_.error("[Feedback] Missing feedback screenshot integration. Proceeding without screenshots.")}const pe=Fe.createDialog({options:{...te,onFormClose:()=>{var Re;pe==null||pe.close(),(Re=te.onFormClose)==null||Re.call(te)},onFormSubmitted:()=>{var Re;pe==null||pe.close(),(Re=te.onFormSubmitted)==null||Re.call(te)}},screenshotIntegration:ke,sendFeedback:rT,shadow:Ft(te)});return pe},os=(te,fe={})=>{const Fe=ls(Ne,fe),ke=typeof te=="string"?ae.querySelector(te):typeof te.addEventListener=="function"?te:null;if(!ke)throw Ns&&_.error("[Feedback] Unable to attach to target element"),new Error("Unable to attach to target element");let pe=null;const Re=async()=>{pe||(pe=await pr({...Fe,onFormSubmitted:()=>{var Ae;pe==null||pe.removeFromDom(),(Ae=Fe.onFormSubmitted)==null||Ae.call(Fe)}})),pe.appendToDom(),pe.open()};ke.addEventListener("click",Re);const Q=()=>{dt=dt.filter(Ae=>Ae!==Q),pe==null||pe.removeFromDom(),pe=null,ke.removeEventListener("click",Re)};return dt.push(Q),Q},hr=(te={})=>{const fe=ls(Ne,te),Fe=Ft(fe),ke=cT({triggerLabel:fe.triggerLabel,triggerAriaLabel:fe.triggerAriaLabel,shadow:Fe,styleNonce:h});return os(ke.el,{...fe,onFormOpen(){ke.hide()},onFormClose(){ke.show()},onFormSubmitted(){ke.show()}}),ke};return{name:"Feedback",setupOnce(){!so()||!Ne.autoInject||(ae.readyState==="loading"?ae.addEventListener("DOMContentLoaded",()=>hr().appendToDom()):hr().appendToDom())},attachTo:os,createWidget(te={}){const fe=hr(ls(Ne,te));return fe.appendToDom(),fe},async createForm(te={}){return pr(ls(Ne,te))},remove(){var te;De&&((te=De.parentElement)==null||te.remove(),De=null),dt.forEach(fe=>fe()),dt=[]}}});function GA(){const e=x();return e==null?void 0:e.getIntegrationByName("Feedback")}var Ho,ue,Kf,cn,Yu,Xf,Ji,Mr={},ec=[],dT=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,tc=Array.isArray;function jt(e,t){for(var n in t)e[n]=t[n];return e}function Qf(e){var t=e.parentNode;t&&t.removeChild(e)}function Y(e,t,n){var r,s,o,i={};for(o in t)o=="key"?r=t[o]:o=="ref"?s=t[o]:i[o]=t[o];if(arguments.length>2&&(i.children=arguments.length>3?Ho.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(o in e.defaultProps)i[o]===void 0&&(i[o]=e.defaultProps[o]);return Os(e,i,r,s,null)}function Os(e,t,n,r,s){var o={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:s==null?++Kf:s,__i:-1,__u:0};return s==null&&ue.vnode!=null&&ue.vnode(o),o}function Jr(e){return e.children}function Ls(e,t){this.props=e,this.context=t}function Jn(e,t){if(t==null)return e.__?Jn(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?Jn(e):null}function fT(e,t,n){var r,s=e.__v,o=s.__e,i=e.__P;if(i)return(r=jt({},s)).__v=s.__v+1,ue.vnode&&ue.vnode(r),nc(i,r,s,e.__n,i.ownerSVGElement!==void 0,32&s.__u?[o]:null,t,o==null?Jn(s):o,!!(32&s.__u),n),r.__.__k[r.__i]=r,r.__d=void 0,r.__e!=o&&Zf(r),r}function Zf(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Zf(e)}}function Ku(e){(!e.__d&&(e.__d=!0)&&cn.push(e)&&!oo.__r++||Yu!==ue.debounceRendering)&&((Yu=ue.debounceRendering)||Xf)(oo)}function oo(){var e,t,n,r=[],s=[];for(cn.sort(Ji);e=cn.shift();)e.__d&&(n=cn.length,t=fT(e,r,s)||t,n===0||cn.length>n?(Yi(r,t,s),s.length=r.length=0,t=void 0,cn.sort(Ji)):t&&ue.__c&&ue.__c(t,ec));t&&Yi(r,t,s),oo.__r=0}function ep(e,t,n,r,s,o,i,a,c,u,d){var l,f,p,h,m,g=r&&r.__k||ec,y=t.length;for(n.__d=c,pT(n,t,g),c=n.__d,l=0;l<y;l++)(p=n.__k[l])!=null&&typeof p!="boolean"&&typeof p!="function"&&(f=p.__i===-1?Mr:g[p.__i]||Mr,p.__i=l,nc(e,p,f,s,o,i,a,c,u,d),h=p.__e,p.ref&&f.ref!=p.ref&&(f.ref&&rc(f.ref,null,p),d.push(p.ref,p.__c||h,p)),m==null&&h!=null&&(m=h),65536&p.__u||f.__k===p.__k?c=tp(p,c,e):typeof p.type=="function"&&p.__d!==void 0?c=p.__d:h&&(c=h.nextSibling),p.__d=void 0,p.__u&=-196609);n.__d=c,n.__e=m}function pT(e,t,n){var r,s,o,i,a,c=t.length,u=n.length,d=u,l=0;for(e.__k=[],r=0;r<c;r++)(s=e.__k[r]=(s=t[r])==null||typeof s=="boolean"||typeof s=="function"?null:typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?Os(null,s,null,null,s):tc(s)?Os(Jr,{children:s},null,null,null):s.constructor===void 0&&s.__b>0?Os(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s)!=null?(s.__=e,s.__b=e.__b+1,a=hT(s,n,i=r+l,d),s.__i=a,o=null,a!==-1&&(d--,(o=n[a])&&(o.__u|=131072)),o==null||o.__v===null?(a==-1&&l--,typeof s.type!="function"&&(s.__u|=65536)):a!==i&&(a===i+1?l++:a>i?d>c-i?l+=a-i:l--:l=a<i&&a==i-1?a-i:0,a!==r+l&&(s.__u|=65536))):(o=n[r])&&o.key==null&&o.__e&&(o.__e==e.__d&&(e.__d=Jn(o)),Ki(o,o,!1),n[r]=null,d--);if(d)for(r=0;r<u;r++)(o=n[r])!=null&&(131072&o.__u)==0&&(o.__e==e.__d&&(e.__d=Jn(o)),Ki(o,o))}function tp(e,t,n){var r,s;if(typeof e.type=="function"){for(r=e.__k,s=0;r&&s<r.length;s++)r[s]&&(r[s].__=e,t=tp(r[s],t,n));return t}e.__e!=t&&(n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType===8);return t}function hT(e,t,n,r){var s=e.key,o=e.type,i=n-1,a=n+1,c=t[n];if(c===null||c&&s==c.key&&o===c.type)return n;if(r>(c!=null&&(131072&c.__u)==0?1:0))for(;i>=0||a<t.length;){if(i>=0){if((c=t[i])&&(131072&c.__u)==0&&s==c.key&&o===c.type)return i;i--}if(a<t.length){if((c=t[a])&&(131072&c.__u)==0&&s==c.key&&o===c.type)return a;a++}}return-1}function Xu(e,t,n){t[0]==="-"?e.setProperty(t,n==null?"":n):e[t]=n==null?"":typeof n!="number"||dT.test(t)?n:n+"px"}function ds(e,t,n,r,s){var o;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||Xu(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||Xu(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")o=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?r?n.u=r.u:(n.u=Date.now(),e.addEventListener(t,o?Zu:Qu,o)):e.removeEventListener(t,o?Zu:Qu,o);else{if(s)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="width"&&t!=="height"&&t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t!=="rowSpan"&&t!=="colSpan"&&t!=="role"&&t in e)try{e[t]=n==null?"":n;break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,n))}}function Qu(e){if(this.l){var t=this.l[e.type+!1];if(e.t){if(e.t<=t.u)return}else e.t=Date.now();return t(ue.event?ue.event(e):e)}}function Zu(e){if(this.l)return this.l[e.type+!0](ue.event?ue.event(e):e)}function nc(e,t,n,r,s,o,i,a,c,u){var d,l,f,p,h,m,g,y,S,w,E,D,L,b,A,$=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(c=!!(32&n.__u),o=[a=t.__e=n.__e]),(d=ue.__b)&&d(t);e:if(typeof $=="function")try{if(y=t.props,S=(d=$.contextType)&&r[d.__c],w=d?S?S.props.value:d.__:r,n.__c?g=(l=t.__c=n.__c).__=l.__E:("prototype"in $&&$.prototype.render?t.__c=l=new $(y,w):(t.__c=l=new Ls(y,w),l.constructor=$,l.render=gT),S&&S.sub(l),l.props=y,l.state||(l.state={}),l.context=w,l.__n=r,f=l.__d=!0,l.__h=[],l._sb=[]),l.__s==null&&(l.__s=l.state),$.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=jt({},l.__s)),jt(l.__s,$.getDerivedStateFromProps(y,l.__s))),p=l.props,h=l.state,l.__v=t,f)$.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if($.getDerivedStateFromProps==null&&y!==p&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(y,w),!l.__e&&(l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(y,l.__s,w)===!1||t.__v===n.__v)){for(t.__v!==n.__v&&(l.props=y,l.state=l.__s,l.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(T){T&&(T.__=t)}),E=0;E<l._sb.length;E++)l.__h.push(l._sb[E]);l._sb=[],l.__h.length&&i.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(y,l.__s,w),l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(p,h,m)})}if(l.context=w,l.props=y,l.__P=e,l.__e=!1,D=ue.__r,L=0,"prototype"in $&&$.prototype.render){for(l.state=l.__s,l.__d=!1,D&&D(t),d=l.render(l.props,l.state,l.context),b=0;b<l._sb.length;b++)l.__h.push(l._sb[b]);l._sb=[]}else do l.__d=!1,D&&D(t),d=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++L<25);l.state=l.__s,l.getChildContext!=null&&(r=jt(jt({},r),l.getChildContext())),f||l.getSnapshotBeforeUpdate==null||(m=l.getSnapshotBeforeUpdate(p,h)),ep(e,tc(A=d!=null&&d.type===Jr&&d.key==null?d.props.children:d)?A:[A],t,n,r,s,o,i,a,c,u),l.base=t.__e,t.__u&=-161,l.__h.length&&i.push(l),g&&(l.__E=l.__=null)}catch(T){t.__v=null,c||o!=null?(t.__e=a,t.__u|=c?160:32,o[o.indexOf(a)]=null):(t.__e=n.__e,t.__k=n.__k),ue.__e(T,t,n)}else o==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=mT(n.__e,t,n,r,s,o,i,c,u);(d=ue.diffed)&&d(t)}function Yi(e,t,n){for(var r=0;r<n.length;r++)rc(n[r],n[++r],n[++r]);ue.__c&&ue.__c(t,e),e.some(function(s){try{e=s.__h,s.__h=[],e.some(function(o){o.call(s)})}catch(o){ue.__e(o,s.__v)}})}function mT(e,t,n,r,s,o,i,a,c){var u,d,l,f,p,h,m,g=n.props,y=t.props,S=t.type;if(S==="svg"&&(s=!0),o!=null){for(u=0;u<o.length;u++)if((p=o[u])&&"setAttribute"in p==!!S&&(S?p.localName===S:p.nodeType===3)){e=p,o[u]=null;break}}if(e==null){if(S===null)return document.createTextNode(y);e=s?document.createElementNS("http://www.w3.org/2000/svg",S):document.createElement(S,y.is&&y),o=null,a=!1}if(S===null)g===y||a&&e.data===y||(e.data=y);else{if(o=o&&Ho.call(e.childNodes),g=n.props||Mr,!a&&o!=null)for(g={},u=0;u<e.attributes.length;u++)g[(p=e.attributes[u]).name]=p.value;for(u in g)p=g[u],u=="children"||(u=="dangerouslySetInnerHTML"?l=p:u==="key"||u in y||ds(e,u,null,p,s));for(u in y)p=y[u],u=="children"?f=p:u=="dangerouslySetInnerHTML"?d=p:u=="value"?h=p:u=="checked"?m=p:u==="key"||a&&typeof p!="function"||g[u]===p||ds(e,u,p,g[u],s);if(d)a||l&&(d.__html===l.__html||d.__html===e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(l&&(e.innerHTML=""),ep(e,tc(f)?f:[f],t,n,r,s&&S!=="foreignObject",o,i,o?o[0]:n.__k&&Jn(n,0),a,c),o!=null)for(u=o.length;u--;)o[u]!=null&&Qf(o[u]);a||(u="value",h!==void 0&&(h!==e[u]||S==="progress"&&!h||S==="option"&&h!==g[u])&&ds(e,u,h,g[u],!1),u="checked",m!==void 0&&m!==e[u]&&ds(e,u,m,g[u],!1))}return e}function rc(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(r){ue.__e(r,n)}}function Ki(e,t,n){var r,s;if(ue.unmount&&ue.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||rc(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){ue.__e(o,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(s=0;s<r.length;s++)r[s]&&Ki(r[s],t,n||typeof e.type!="function");n||e.__e==null||Qf(e.__e),e.__=e.__e=e.__d=void 0}function gT(e,t,n){return this.constructor(e,n)}function _T(e,t,n){var r,s,o,i;ue.__&&ue.__(e,t),s=(r=!1)?null:t.__k,o=[],i=[],nc(t,e=t.__k=Y(Jr,null,[e]),s||Mr,Mr,t.ownerSVGElement!==void 0,s?null:t.firstChild?Ho.call(t.childNodes):null,o,s?s.__e:t.firstChild,r,i),e.__d=void 0,Yi(o,e,i)}Ho=ec.slice,ue={__e:function(e,t,n,r){for(var s,o,i;t=t.__;)if((s=t.__c)&&!s.__)try{if((o=s.constructor)&&o.getDerivedStateFromError!=null&&(s.setState(o.getDerivedStateFromError(e)),i=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(e,r||{}),i=s.__d),i)return s.__E=s}catch(a){e=a}throw e}},Kf=0,Ls.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=jt({},this.state),typeof e=="function"&&(e=e(jt({},n),this.props)),e&&jt(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),Ku(this))},Ls.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Ku(this))},Ls.prototype.render=Jr,cn=[],Xf=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ji=function(e,t){return e.__v.__b-t.__v.__b},oo.__r=0;var Nt,ce,pi,el,Yn=0,np=[],Ps=[],he=ue,tl=he.__b,nl=he.__r,rl=he.diffed,sl=he.__c,ol=he.unmount,il=he.__;function Rn(e,t){he.__h&&he.__h(ce,e,Yn||t),Yn=0;var n=ce.__H||(ce.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:Ps}),n.__[e]}function un(e){return Yn=1,rp(op,e)}function rp(e,t,n){var r=Rn(Nt++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):op(void 0,t),function(a){var c=r.__N?r.__N[0]:r.__[0],u=r.t(c,a);c!==u&&(r.__N=[u,r.__[1]],r.__c.setState({}))}],r.__c=ce,!ce.u)){var s=function(a,c,u){if(!r.__c.__H)return!0;var d=r.__c.__H.__.filter(function(f){return!!f.__c});if(d.every(function(f){return!f.__N}))return!o||o.call(this,a,c,u);var l=!1;return d.forEach(function(f){if(f.__N){var p=f.__[0];f.__=f.__N,f.__N=void 0,p!==f.__[0]&&(l=!0)}}),!(!l&&r.__c.props===a)&&(!o||o.call(this,a,c,u))};ce.u=!0;var o=ce.shouldComponentUpdate,i=ce.componentWillUpdate;ce.componentWillUpdate=function(a,c,u){if(this.__e){var d=o;o=void 0,s(a,c,u),o=d}i&&i.call(this,a,c,u)},ce.shouldComponentUpdate=s}return r.__N||r.__}function yT(e,t){var n=Rn(Nt++,3);!he.__s&&sc(n.__H,t)&&(n.__=e,n.i=t,ce.__H.__h.push(n))}function sp(e,t){var n=Rn(Nt++,4);!he.__s&&sc(n.__H,t)&&(n.__=e,n.i=t,ce.__h.push(n))}function ST(e){return Yn=5,Yr(function(){return{current:e}},[])}function bT(e,t,n){Yn=6,sp(function(){return typeof e=="function"?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0},n==null?n:n.concat(e))}function Yr(e,t){var n=Rn(Nt++,7);return sc(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function Wn(e,t){return Yn=8,Yr(function(){return e},t)}function ET(e){var t=ce.context[e.__c],n=Rn(Nt++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(ce)),t.props.value):e.__}function TT(e,t){he.useDebugValue&&he.useDebugValue(t?t(e):e)}function vT(e){var t=Rn(Nt++,10),n=un();return t.__=e,ce.componentDidCatch||(ce.componentDidCatch=function(r,s){t.__&&t.__(r,s),n[1](r)}),[n[0],function(){n[1](void 0)}]}function IT(){var e=Rn(Nt++,11);if(!e.__){for(var t=ce.__v;t!==null&&!t.__m&&t.__!==null;)t=t.__;var n=t.__m||(t.__m=[0,0]);e.__="P"+n[0]+"-"+n[1]++}return e.__}function wT(){for(var e;e=np.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Ds),e.__H.__h.forEach(Xi),e.__H.__h=[]}catch(t){e.__H.__h=[],he.__e(t,e.__v)}}he.__b=function(e){ce=null,tl&&tl(e)},he.__=function(e,t){t.__k&&t.__k.__m&&(e.__m=t.__k.__m),il&&il(e,t)},he.__r=function(e){nl&&nl(e),Nt=0;var t=(ce=e.__c).__H;t&&(pi===ce?(t.__h=[],ce.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=Ps,n.__N=n.i=void 0})):(t.__h.forEach(Ds),t.__h.forEach(Xi),t.__h=[],Nt=0)),pi=ce},he.diffed=function(e){rl&&rl(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(np.push(t)!==1&&el===he.requestAnimationFrame||((el=he.requestAnimationFrame)||kT)(wT)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==Ps&&(n.__=n.__V),n.i=void 0,n.__V=Ps})),pi=ce=null},he.__c=function(e,t){t.some(function(n){try{n.__h.forEach(Ds),n.__h=n.__h.filter(function(r){return!r.__||Xi(r)})}catch(r){t.some(function(s){s.__h&&(s.__h=[])}),t=[],he.__e(r,n.__v)}}),sl&&sl(e,t)},he.unmount=function(e){ol&&ol(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{Ds(r)}catch(s){t=s}}),n.__H=void 0,t&&he.__e(t,n.__v))};var al=typeof requestAnimationFrame=="function";function kT(e){var t,n=function(){clearTimeout(r),al&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);al&&(t=requestAnimationFrame(n))}function Ds(e){var t=ce,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),ce=t}function Xi(e){var t=ce;e.__c=e.__(),ce=t}function sc(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function op(e,t){return typeof t=="function"?t(e):t}const CT=Object.defineProperty({__proto__:null,useCallback:Wn,useContext:ET,useDebugValue:TT,useEffect:yT,useErrorBoundary:vT,useId:IT,useImperativeHandle:bT,useLayoutEffect:sp,useMemo:Yr,useReducer:rp,useRef:ST,useState:un},Symbol.toStringTag,{value:"Module"}),RT="http://www.w3.org/2000/svg";function AT(){const e=r=>ae.createElementNS(RT,r),t=Ge(e("svg"),{width:"32",height:"30",viewBox:"0 0 72 66",fill:"inherit"}),n=Ge(e("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});return t.appendChild(n),t}function xT({options:e}){const t=Yr(()=>({__html:AT().outerHTML}),[]);return Y("h2",{class:"dialog__header"},Y("span",{class:"dialog__title"},e.formTitle),e.showBranding?Y("a",{class:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer",dangerouslySetInnerHTML:t}):null)}function MT(e,t){const n=[];return t.isNameRequired&&!e.name&&n.push(t.nameLabel),t.isEmailRequired&&!e.email&&n.push(t.emailLabel),e.message||n.push(t.messageLabel),n}function hi(e,t){const n=e.get(t);return typeof n=="string"?n.trim():""}function NT({options:e,defaultEmail:t,defaultName:n,onFormClose:r,onSubmit:s,onSubmitSuccess:o,onSubmitError:i,showEmail:a,showName:c,screenshotInput:u}){const{tags:d,addScreenshotButtonLabel:l,removeScreenshotButtonLabel:f,cancelButtonLabel:p,emailLabel:h,emailPlaceholder:m,isEmailRequired:g,isNameRequired:y,messageLabel:S,messagePlaceholder:w,nameLabel:E,namePlaceholder:D,submitButtonLabel:L,isRequiredLabel:b}=e,[A,$]=un(!1),[T,M]=un(null),[R,N]=un(!1),O=u==null?void 0:u.input,[V,K]=un(null),X=Wn(k=>{K(k),N(!1)},[]),v=Wn(k=>{const z=MT(k,{emailLabel:h,isEmailRequired:g,isNameRequired:y,messageLabel:S,nameLabel:E});return z.length>0?M(`Please enter in the following required fields: ${z.join(", ")}`):M(null),z.length===0},[h,g,y,S,E]),W=Wn(async k=>{$(!0);try{if(k.preventDefault(),!(k.target instanceof HTMLFormElement))return;const z=new FormData(k.target),se=await(u&&R?u.value():void 0),re={name:hi(z,"name"),email:hi(z,"email"),message:hi(z,"message"),attachments:se?[se]:void 0};if(!v(re))return;try{const Se=await s({name:re.name,email:re.email,message:re.message,source:eT,tags:d},{attachments:re.attachments});o(re,Se)}catch(Se){Ns&&_.error(Se),M(Se),i(Se)}}finally{$(!1)}},[u&&R,o,i]);return Y("form",{class:"form",onSubmit:W},O&&R?Y(O,{onError:X}):null,Y("fieldset",{class:"form__right","data-sentry-feedback":!0,disabled:A},Y("div",{class:"form__top"},T?Y("div",{class:"form__error-container"},T):null,c?Y("label",{for:"name",class:"form__label"},Y(mi,{label:E,isRequiredLabel:b,isRequired:y}),Y("input",{class:"form__input",defaultValue:n,id:"name",name:"name",placeholder:D,required:y,type:"text"})):Y("input",{"aria-hidden":!0,value:n,name:"name",type:"hidden"}),a?Y("label",{for:"email",class:"form__label"},Y(mi,{label:h,isRequiredLabel:b,isRequired:g}),Y("input",{class:"form__input",defaultValue:t,id:"email",name:"email",placeholder:m,required:g,type:"email"})):Y("input",{"aria-hidden":!0,value:t,name:"email",type:"hidden"}),Y("label",{for:"message",class:"form__label"},Y(mi,{label:S,isRequiredLabel:b,isRequired:!0}),Y("textarea",{autoFocus:!0,class:"form__input form__input--textarea",id:"message",name:"message",placeholder:w,required:!0,rows:5})),O?Y("label",{for:"screenshot",class:"form__label"},Y("button",{class:"btn btn--default",disabled:A,type:"button",onClick:()=>{K(null),N(k=>!k)}},R?f:l),V?Y("div",{class:"form__error-container"},V.message):null):null),Y("div",{class:"btn-group"},Y("button",{class:"btn btn--primary",disabled:A,type:"submit"},L),Y("button",{class:"btn btn--default",disabled:A,type:"button",onClick:r},p))))}function mi({label:e,isRequired:t,isRequiredLabel:n}){return Y("span",{class:"form__label__text"},e,t&&Y("span",{class:"form__label__text--required"},n))}const fs=16,cl=17,OT="http://www.w3.org/2000/svg";function LT(){const e=c=>ot.document.createElementNS(OT,c),t=Ge(e("svg"),{width:`${fs}`,height:`${cl}`,viewBox:`0 0 ${fs} ${cl}`,fill:"inherit"}),n=Ge(e("g"),{clipPath:"url(#clip0_57_156)"}),r=Ge(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),s=Ge(e("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});t.appendChild(n).append(s,r);const o=e("defs"),i=Ge(e("clipPath"),{id:"clip0_57_156"}),a=Ge(e("rect"),{width:`${fs}`,height:`${fs}`,fill:"white",transform:"translate(0 0.5)"});return i.appendChild(a),o.appendChild(i),t.appendChild(o).appendChild(i).appendChild(a),t}function PT({open:e,onFormSubmitted:t,...n}){const r=n.options,s=Yr(()=>({__html:LT().outerHTML}),[]),[o,i]=un(null),a=Wn(()=>{o&&(clearTimeout(o),i(null)),t()},[o]),c=Wn((u,d)=>{n.onSubmitSuccess(u,d),i(setTimeout(()=>{t(),i(null)},nT))},[t]);return Y(Jr,null,o?Y("div",{class:"success__position",onClick:a},Y("div",{class:"success__content"},r.successMessageText,Y("span",{class:"success__icon",dangerouslySetInnerHTML:s}))):Y("dialog",{class:"dialog",onClick:r.onFormClose,open:e},Y("div",{class:"dialog__position"},Y("div",{class:"dialog__content",onClick:u=>{u.stopPropagation()}},Y(xT,{options:r}),Y(NT,{...n,onSubmitSuccess:c})))))}const DT=`
.dialog {
  position: fixed;
  z-index: var(--z-index);
  margin: 0;
  inset: 0;

  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  height: 100vh;
  width: 100vw;

  color: var(--dialog-color, var(--foreground));
  fill: var(--dialog-color, var(--foreground));
  line-height: 1.75em;

  background-color: rgba(0, 0, 0, 0.05);
  border: none;
  inset: 0;
  opacity: 1;
  transition: opacity 0.2s ease-in-out;
}

.dialog__position {
  position: fixed;
  z-index: var(--z-index);
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  display: flex;
  max-height: calc(100vh - (2 * var(--page-margin)));
}
@media (max-width: 600px) {
  .dialog__position {
    inset: var(--page-margin);
    padding: 0;
  }
}

.dialog__position:has(.editor) {
  inset: var(--page-margin);
  padding: 0;
}

.dialog:not([open]) {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
}
.dialog:not([open]) .dialog__content {
  transform: translate(0, -16px) scale(0.98);
}

.dialog__content {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: var(--dialog-padding, 24px);
  max-width: 100%;
  width: 100%;
  max-height: 100%;
  overflow: auto;

  background: var(--dialog-background, var(--background));
  border-radius: var(--dialog-border-radius, 20px);
  border: var(--dialog-border, var(--border));
  box-shadow: var(--dialog-box-shadow, var(--box-shadow));
  transform: translate(0, 0) scale(1);
  transition: transform 0.2s ease-in-out;
}

`,FT=`
.dialog__header {
  display: flex;
  gap: 4px;
  justify-content: space-between;
  font-weight: var(--dialog-header-weight, 600);
  margin: 0;
}
.dialog__title {
  align-self: center;
  width: var(--form-width, 272px);
}

@media (max-width: 600px) {
  .dialog__title {
    width: auto;
  }
}

.dialog__position:has(.editor) .dialog__title {
  width: auto;
}


.brand-link {
  display: inline-flex;
}
.brand-link:focus-visible {
  outline: var(--outline);
}
`,$T=`
.form {
  display: flex;
  overflow: auto;
  flex-direction: row;
  gap: 16px;
  flex: 1 0;
}

.form fieldset {
  border: none;
  margin: 0;
  padding: 0;
}

.form__right {
  flex: 0 0 auto;
  display: flex;
  overflow: auto;
  flex-direction: column;
  justify-content: space-between;
  gap: 20px;
  width: var(--form-width, 100%);
}

.dialog__position:has(.editor) .form__right {
  width: var(--form-width, 272px);
}

.form__top {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.form__error-container {
  color: var(--error-color);
  fill: var(--error-color);
}

.form__label {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin: 0px;
}

.form__label__text {
  display: flex;
  gap: 4px;
  align-items: center;
}

.form__label__text--required {
  font-size: 0.85em;
}

.form__input {
  font-family: inherit;
  line-height: inherit;
  background: transparent;
  box-sizing: border-box;
  border: var(--input-border, var(--border));
  border-radius: var(--input-border-radius, 6px);
  color: var(--input-color, inherit);
  fill: var(--input-color, inherit);
  font-size: var(--input-font-size, inherit);
  font-weight: var(--input-font-weight, 500);
  padding: 6px 12px;
}

.form__input::placeholder {
  opacity: 0.65;
  color: var(--input-placeholder-color, inherit);
  filter: var(--interactive-filter);
}

.form__input:focus-visible {
  outline: var(--input-focus-outline, var(--outline));
}

.form__input--textarea {
  font-family: inherit;
  resize: vertical;
}

.error {
  color: var(--error-color);
  fill: var(--error-color);
}
`,BT=`
.btn-group {
  display: grid;
  gap: 8px;
}

.btn {
  line-height: inherit;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  cursor: pointer;
  font-family: inherit;
  font-size: var(--button-font-size, inherit);
  font-weight: var(--button-font-weight, 600);
  padding: var(--button-padding, 6px 16px);
}
.btn[disabled] {
  opacity: 0.6;
  pointer-events: none;
}

.btn--primary {
  color: var(--button-primary-color, var(--accent-foreground));
  fill: var(--button-primary-color, var(--accent-foreground));
  background: var(--button-primary-background, var(--accent-background));
  border: var(--button-primary-border, var(--border));
  border-radius: var(--button-primary-border-radius, 6px);
  font-weight: var(--button-primary-font-weight, 500);
}
.btn--primary:hover {
  color: var(--button-primary-hover-color, var(--accent-foreground));
  fill: var(--button-primary-hover-color, var(--accent-foreground));
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
}
.btn--primary:focus-visible {
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
  outline: var(--button-primary-focus-outline, var(--outline));
}

.btn--default {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-background, var(--background));
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  font-weight: var(--button-font-weight, 500);
}
.btn--default:hover {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
}
.btn--default:focus-visible {
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
  outline: var(--button-focus-outline, var(--outline));
}
`,UT=`
.success__position {
  position: fixed;
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  z-index: var(--z-index);
}
.success__content {
  background: var(--success-background, var(--background));
  border: var(--success-border, var(--border));
  border-radius: var(--success-border-radius, 1.7em/50%);
  box-shadow: var(--success-box-shadow, var(--box-shadow));
  font-weight: var(--success-font-weight, 600);
  color: var(--success-color);
  fill: var(--success-color);
  padding: 12px 24px;
  line-height: 1.75em;

  display: grid;
  align-items: center;
  grid-auto-flow: column;
  gap: 6px;
  cursor: default;
}

.success__icon {
  display: flex;
}
`;function HT(e){const t=ae.createElement("style");return t.textContent=`
:host {
  --dialog-inset: var(--inset);
}

${DT}
${FT}
${$T}
${BT}
${UT}
`,e&&t.setAttribute("nonce",e),t}function WT(){const e=G().getUser(),t=ve().getUser(),n=Tr().getUser();return e&&Object.keys(e).length?e:t&&Object.keys(t).length?t:n}const jT=(()=>({name:"FeedbackModal",setupOnce(){},createDialog:({options:e,screenshotIntegration:t,sendFeedback:n,shadow:r})=>{const s=r,o=e.useSentryUser,i=WT(),a=ae.createElement("div"),c=HT(e.styleNonce);let u="";const d={get el(){return a},appendToDom(){!s.contains(c)&&!s.contains(a)&&(s.appendChild(c),s.appendChild(a))},removeFromDom(){a.remove(),c.remove(),ae.body.style.overflow=u},open(){var p,h;f(!0),(p=e.onFormOpen)==null||p.call(e),(h=x())==null||h.emit("openFeedbackWidget"),u=ae.body.style.overflow,ae.body.style.overflow="hidden"},close(){f(!1),ae.body.style.overflow=u}},l=t==null?void 0:t.createInput({h:Y,hooks:CT,dialog:d,options:e}),f=p=>{_T(Y(PT,{options:e,screenshotInput:l,showName:e.showName||e.isNameRequired,showEmail:e.showEmail||e.isEmailRequired,defaultName:String(o&&(i==null?void 0:i[o.name])||""),defaultEmail:String(o&&(i==null?void 0:i[o.email])||""),onFormClose:()=>{var h;f(!1),(h=e.onFormClose)==null||h.call(e)},onSubmit:n,onSubmitSuccess:(h,m)=>{var g;f(!1),(g=e.onSubmitSuccess)==null||g.call(e,h,m)},onSubmitError:h=>{var m;(m=e.onSubmitError)==null||m.call(e,h)},onFormSubmitted:()=>{var h;(h=e.onFormSubmitted)==null||h.call(e)},open:p}),a)};return d}}));function zT({h:e}){return function(){return e("svg",{"data-test-id":"icon-close",viewBox:"0 0 16 16",fill:"#2B2233",height:"25px",width:"25px"},e("circle",{r:"7",cx:"8",cy:"8",fill:"white"}),e("path",{strokeWidth:"1.5",d:"M8,16a8,8,0,1,1,8-8A8,8,0,0,1,8,16ZM8,1.53A6.47,6.47,0,1,0,14.47,8,6.47,6.47,0,0,0,8,1.53Z"}),e("path",{strokeWidth:"1.5",d:"M5.34,11.41a.71.71,0,0,1-.53-.22.74.74,0,0,1,0-1.06l5.32-5.32a.75.75,0,0,1,1.06,1.06L5.87,11.19A.74.74,0,0,1,5.34,11.41Z"}),e("path",{strokeWidth:"1.5",d:"M10.66,11.41a.74.74,0,0,1-.53-.22L4.81,5.87A.75.75,0,0,1,5.87,4.81l5.32,5.32a.74.74,0,0,1,0,1.06A.71.71,0,0,1,10.66,11.41Z"}))}}function qT(e){const t=ae.createElement("style"),n="#1A141F",r="#302735";return t.textContent=`
.editor {
  display: flex;
  flex-grow: 1;
  flex-direction: column;
}

.editor__image-container {
  justify-items: center;
  padding: 15px;
  position: relative;
  height: 100%;
  border-radius: var(--menu-border-radius, 6px);

  background-color: ${n};
  background-image: repeating-linear-gradient(
      -145deg,
      transparent,
      transparent 8px,
      ${n} 8px,
      ${n} 11px
    ),
    repeating-linear-gradient(
      -45deg,
      transparent,
      transparent 15px,
      ${r} 15px,
      ${r} 16px
    );
}

.editor__canvas-container {
  width: 100%;
  height: 100%;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}

.editor__canvas-container > * {
  object-fit: contain;
  position: absolute;
}

.editor__tool-container {
  padding-top: 8px;
  display: flex;
  justify-content: center;
}

.editor__tool-bar {
  display: flex;
  gap: 8px;
}

.editor__tool {
  display: flex;
  padding: 8px 12px;
  justify-content: center;
  align-items: center;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  background: var(--button-background, var(--background));
  color: var(--button-color, var(--foreground));
}

.editor__tool--active {
  background: var(--button-primary-background, var(--accent-background));
  color: var(--button-primary-color, var(--accent-foreground));
}

.editor__rect {
  position: absolute;
  z-index: 2;
}

.editor__rect button {
  opacity: 0;
  position: absolute;
  top: -12px;
  right: -12px;
  cursor: pointer;
  padding: 0;
  z-index: 3;
  border: none;
  background: none;
}

.editor__rect:hover button {
  opacity: 1;
}
`,e&&t.setAttribute("nonce",e),t}function GT({h:e}){return function({action:n,setAction:r,options:s}){return e("div",{class:"editor__tool-container"},e("div",{class:"editor__tool-bar"},e("button",{type:"button",class:`editor__tool ${n==="highlight"?"editor__tool--active":""}`,onClick:()=>{r(n==="highlight"?"":"highlight")}},s.highlightToolText),e("button",{type:"button",class:`editor__tool ${n==="hide"?"editor__tool--active":""}`,onClick:()=>{r(n==="hide"?"":"hide")}},s.hideToolText)))}}function VT({hooks:e}){function t(){var s;const[n,r]=e.useState((s=ot.devicePixelRatio)!=null?s:1);return e.useEffect(()=>{const o=()=>{r(ot.devicePixelRatio)},i=matchMedia(`(resolution: ${ot.devicePixelRatio}dppx)`);return i.addEventListener("change",o),()=>{i.removeEventListener("change",o)}},[]),n}return function({onBeforeScreenshot:r,onScreenshot:s,onAfterScreenshot:o,onError:i}){const a=t();e.useEffect(()=>{(async()=>{r();const u=await Er.mediaDevices.getDisplayMedia({video:{width:ot.innerWidth*a,height:ot.innerHeight*a},audio:!1,monitorTypeSurfaces:"exclude",preferCurrentTab:!0,selfBrowserSurface:"include",surfaceSwitching:"exclude"}),d=ae.createElement("video");await new Promise((l,f)=>{d.srcObject=u,d.onloadedmetadata=()=>{s(d,a),u.getTracks().forEach(p=>p.stop()),l()},d.play().catch(f)}),o()})().catch(i)},[])}}function JT(e,t,n){switch(e.type){case"highlight":{t.shadowColor="rgba(0, 0, 0, 0.7)",t.shadowBlur=50,t.fillStyle=n,t.fillRect(e.x-1,e.y-1,e.w+2,e.h+2),t.clearRect(e.x,e.y,e.w,e.h);break}case"hide":t.fillStyle="rgb(0, 0, 0)",t.fillRect(e.x,e.y,e.w,e.h);break}}function Bt(e,t,n){if(!e)return;const r=e.getContext("2d",t);r&&n(e,r)}function gi(e,t){Bt(e,{alpha:!0},(n,r)=>{r.drawImage(t,0,0,t.width,t.height,0,0,n.width,n.height)})}function _i(e,t,n){Bt(e,{alpha:!0},(r,s)=>{n.length&&(s.fillStyle="rgba(0, 0, 0, 0.25)",s.fillRect(0,0,r.width,r.height)),n.forEach(o=>{JT(o,s,t)})})}function YT({h:e,hooks:t,outputBuffer:n,dialog:r,options:s}){const o=VT({hooks:t}),i=GT({h:e}),a=zT({h:e}),c={__html:qT(s.styleNonce).innerText},u=r.el.style,d=({screenshot:l})=>{const[f,p]=t.useState("highlight"),[h,m]=t.useState([]),g=t.useRef(null),y=t.useRef(null),S=t.useRef(null),w=t.useRef(null),[E,D]=t.useState(1),L=t.useMemo(()=>{const R=ae.getElementById(s.id);if(!R)return"white";const N=getComputedStyle(R);return N.getPropertyValue("--button-primary-background")||N.getPropertyValue("--accent-background")},[s.id]);t.useLayoutEffect(()=>{const R=()=>{const N=g.current;N&&(Bt(l.canvas,{alpha:!1},O=>{const V=Math.min(N.clientWidth/O.width,N.clientHeight/O.height);D(V)}),(N.clientHeight===0||N.clientWidth===0)&&setTimeout(R,0))};return R(),ot.addEventListener("resize",R),()=>{ot.removeEventListener("resize",R)}},[l]);const b=t.useCallback((R,N)=>{Bt(R,{alpha:!0},(O,V)=>{V.scale(N,N),O.width=l.canvas.width,O.height=l.canvas.height})},[l]);t.useEffect(()=>{b(y.current,l.dpi),gi(y.current,l.canvas)},[l]),t.useEffect(()=>{b(S.current,l.dpi),Bt(S.current,{alpha:!0},(R,N)=>{N.clearRect(0,0,R.width,R.height)}),_i(S.current,L,h)},[h,L]),t.useEffect(()=>{b(n,l.dpi),gi(n,l.canvas),Bt(ae.createElement("canvas"),{alpha:!0},(R,N)=>{N.scale(l.dpi,l.dpi),R.width=l.canvas.width,R.height=l.canvas.height,_i(R,L,h),gi(n,R)})},[h,l,L]);const A=R=>{if(!f||!w.current)return;const N=w.current.getBoundingClientRect(),O={type:f,x:R.offsetX/E,y:R.offsetY/E},V=(v,W)=>{const k=(W.clientX-N.x)/E,z=(W.clientY-N.y)/E;return{type:v.type,x:Math.min(v.x,k),y:Math.min(v.y,z),w:Math.abs(k-v.x),h:Math.abs(z-v.y)}},K=v=>{Bt(S.current,{alpha:!0},(W,k)=>{k.clearRect(0,0,W.width,W.height)}),_i(S.current,L,[...h,V(O,v)])},X=v=>{const W=V(O,v);W.w*E>=1&&W.h*E>=1&&m(k=>[...k,W]),ae.removeEventListener("mousemove",K),ae.removeEventListener("mouseup",X)};ae.addEventListener("mousemove",K),ae.addEventListener("mouseup",X)},$=t.useCallback(R=>N=>{N.preventDefault(),N.stopPropagation(),m(O=>{const V=[...O];return V.splice(R,1),V})},[]),T={width:`${l.canvas.width*E}px`,height:`${l.canvas.height*E}px`},M=R=>{R.stopPropagation()};return e("div",{class:"editor"},e("style",{nonce:s.styleNonce,dangerouslySetInnerHTML:c}),e("div",{class:"editor__image-container"},e("div",{class:"editor__canvas-container",ref:g},e("canvas",{ref:y,id:"background",style:T}),e("canvas",{ref:S,id:"foreground",style:T}),e("div",{ref:w,onMouseDown:A,style:T},h.map((R,N)=>e("div",{key:N,class:"editor__rect",style:{top:`${R.y*E}px`,left:`${R.x*E}px`,width:`${R.w*E}px`,height:`${R.h*E}px`}},e("button",{"aria-label":s.removeHighlightText,onClick:$(N),onMouseDown:M,onMouseUp:M,type:"button"},e(a,null))))))),e(i,{options:s,action:f,setAction:p}))};return function({onError:f}){const[p,h]=t.useState();return o({onBeforeScreenshot:t.useCallback(()=>{u.display="none"},[]),onScreenshot:t.useCallback((m,g)=>{Bt(ae.createElement("canvas"),{alpha:!1},(y,S)=>{S.scale(g,g),y.width=m.videoWidth,y.height=m.videoHeight,S.drawImage(m,0,0,y.width,y.height),h({canvas:y,dpi:g})}),n.width=m.videoWidth,n.height=m.videoHeight},[]),onAfterScreenshot:t.useCallback(()=>{u.display="block"},[]),onError:t.useCallback(m=>{u.display="block",f(m)},[])}),p?e(d,{screenshot:p}):e("div",null)}}const KT=(()=>({name:"FeedbackScreenshot",setupOnce(){},createInput:({h:e,hooks:t,dialog:n,options:r})=>{const s=ae.createElement("canvas");return{input:YT({h:e,hooks:t,outputBuffer:s,dialog:n,options:r}),value:async()=>{const o=await new Promise(i=>{s.toBlob(i,"image/png")});if(o)return{data:new Uint8Array(await o.arrayBuffer()),filename:"screenshot.png",contentType:"application/png"}}}}})),P=F;let Qi=0;function ip(){return Qi>0}function XT(){Qi++,setTimeout(()=>{Qi--})}function Kn(e,t={}){function n(s){return typeof s=="function"}if(!n(e))return e;try{const s=e.__sentry_wrapped__;if(s)return typeof s=="function"?s:e;if(Ta(e))return e}catch{return e}const r=function(...s){try{const o=s.map(i=>Kn(i,t));return e.apply(this,o)}catch(o){throw XT(),ut(i=>{i.addEventProcessor(a=>(t.mechanism&&(Oi(a,void 0),At(a,t.mechanism)),a.extra={...a.extra,arguments:s},a)),_e(o)}),o}};try{for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s])}catch{}Td(r,e),Pe(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return e.name}})}catch{}return r}function oc(){const e=wn(),{referrer:t}=P.document||{},{userAgent:n}=P.navigator||{},r={...t&&{Referer:t},...n&&{"User-Agent":n}};return{url:e,headers:r}}const QT={replayIntegration:"replay",replayCanvasIntegration:"replay-canvas",feedbackIntegration:"feedback",feedbackModalIntegration:"feedback-modal",feedbackScreenshotIntegration:"feedback-screenshot",captureConsoleIntegration:"captureconsole",contextLinesIntegration:"contextlines",linkedErrorsIntegration:"linkederrors",dedupeIntegration:"dedupe",extraErrorDataIntegration:"extraerrordata",graphqlClientIntegration:"graphqlclient",httpClientIntegration:"httpclient",reportingObserverIntegration:"reportingobserver",rewriteFramesIntegration:"rewriteframes",browserProfilingIntegration:"browserprofiling",moduleMetadataIntegration:"modulemetadata",instrumentAnthropicAiClient:"instrumentanthropicaiclient",instrumentOpenAiClient:"instrumentopenaiclient",instrumentGoogleGenAIClient:"instrumentgooglegenaiclient",instrumentLangGraph:"instrumentlanggraph",createLangChainCallbackHandler:"createlangchaincallbackhandler"},ul=P;async function ZT(e,t){const n=QT[e],r=ul.Sentry=ul.Sentry||{};if(!n)throw new Error(`Cannot lazy load integration: ${e}`);const s=r[e];if(typeof s=="function"&&!("_isShim"in s))return s;const o=e0(n),i=P.document.createElement("script");i.src=o,i.crossOrigin="anonymous",i.referrerPolicy="strict-origin",t&&i.setAttribute("nonce",t);const a=new Promise((l,f)=>{i.addEventListener("load",()=>l()),i.addEventListener("error",f)}),c=P.document.currentScript,u=P.document.body||P.document.head||(c==null?void 0:c.parentElement);if(u)u.appendChild(i);else throw new Error(`Could not find parent element to insert lazy-loaded ${e} script`);try{await a}catch{throw new Error(`Error when loading integration: ${e}`)}const d=r[e];if(typeof d!="function")throw new Error(`Could not load integration: ${e}`);return d}function e0(e){var r;const t=x(),n=((r=t==null?void 0:t.getOptions())==null?void 0:r.cdnBaseUrl)||"https://browser.sentry-cdn.com";return new URL(`/${zt}/${e}.min.js`,n).toString()}const VA=Yf({lazyLoadIntegration:ZT}),JA=Yf({getModalIntegration:()=>jT,getScreenshotIntegration:()=>KT});function ic(e,t){const n=ac(e,t),r={type:o0(t),value:i0(t)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function t0(e,t,n,r){const s=x(),o=s==null?void 0:s.getOptions().normalizeDepth,i=d0(t),a={__serialized__:Gd(t,o)};if(i)return{exception:{values:[ic(e,i)]},extra:a};const c={exception:{values:[{type:To(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:u0(t,{isUnhandledRejection:r})}]},extra:a};if(n){const u=ac(e,n);u.length&&(c.exception.values[0].stacktrace={frames:u})}return c}function yi(e,t){return{exception:{values:[ic(e,t)]}}}function ac(e,t){const n=t.stacktrace||t.stack||"",r=r0(t),s=s0(t);try{return e(n,r,s)}catch{}return[]}const n0=/Minified React error #\d+;/i;function r0(e){return e&&n0.test(e.message)?1:0}function s0(e){return typeof e.framesToPop=="number"?e.framesToPop:0}function ap(e){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?e instanceof WebAssembly.Exception:!1}function o0(e){const t=e==null?void 0:e.name;return!t&&ap(e)?e.message&&Array.isArray(e.message)&&e.message.length==2?e.message[0]:"WebAssembly.Exception":t}function i0(e){const t=e==null?void 0:e.message;return ap(e)?Array.isArray(e.message)&&e.message.length==2?e.message[1]:"wasm exception":t?t.error&&typeof t.error.message=="string"?yu(t.error):yu(e):"No error message"}function a0(e,t,n,r){const s=(n==null?void 0:n.syntheticException)||void 0,o=Wo(e,t,s,r);return At(o),o.level="error",n!=null&&n.event_id&&(o.event_id=n.event_id),Ao(o)}function c0(e,t,n="info",r,s){const o=(r==null?void 0:r.syntheticException)||void 0,i=Zi(e,t,o,s);return i.level=n,r!=null&&r.event_id&&(i.event_id=r.event_id),Ao(i)}function Wo(e,t,n,r,s){let o;if(Sd(t)&&t.error)return yi(e,t.error);if(Bc(t)||nm(t)){const i=t;if("stack"in t)o=yi(e,t);else{const a=i.name||(Bc(i)?"DOMError":"DOMException"),c=i.message?`${a}: ${i.message}`:a;o=Zi(e,c,n,r),Oi(o,c)}return"code"in i&&(o.tags={...o.tags,"DOMException.code":`${i.code}`}),o}return vt(t)?yi(e,t):Ve(t)||To(t)?(o=t0(e,t,n,s),At(o,{synthetic:!0}),o):(o=Zi(e,t,n,r),Oi(o,`${t}`),At(o,{synthetic:!0}),o)}function Zi(e,t,n,r){const s={};if(r&&n){const o=ac(e,n);o.length&&(s.exception={values:[{value:t,stacktrace:{frames:o}}]}),At(s,{synthetic:!0})}if(Eo(t)){const{__sentry_template_string__:o,__sentry_template_values__:i}=t;return s.logentry={message:o,params:i},s}return s.message=t,s}function u0(e,{isUnhandledRejection:t}){const n=cm(e),r=t?"promise rejection":"exception";return Sd(e)?`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``:To(e)?`Event \`${l0(e)}\` (type=${e.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}function l0(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}function d0(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];if(n instanceof Error)return n}}class f0 extends x_{constructor(t){var d,l;const n=p0(t),r=P.SENTRY_SDK_SOURCE||LE();Y_(n,"browser",["browser"],r),(d=n._metadata)!=null&&d.sdk&&(n._metadata.sdk.settings={infer_ip:n.sendDefaultPii?"auto":"never",...n._metadata.sdk.settings}),super(n);const{sendDefaultPii:s,sendClientReports:o,enableLogs:i,_experiments:a,enableMetrics:c}=this._options,u=(l=c!=null?c:a==null?void 0:a.enableMetrics)!=null?l:!0;P.document&&(o||i||u)&&P.document.addEventListener("visibilitychange",()=>{P.document.visibilityState==="hidden"&&(o&&this._flushOutcomes(),i&&La(this),u&&Da(this))}),s&&this.on("beforeSendSession",J_)}eventFromException(t,n){return a0(this._options.stackParser,t,n,this._options.attachStacktrace)}eventFromMessage(t,n="info",r){return c0(this._options.stackParser,t,n,r,this._options.attachStacktrace)}_prepareEvent(t,n,r,s){return t.platform=t.platform||"javascript",super._prepareEvent(t,n,r,s)}}function p0(e){var t;return{release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:(t=P.SENTRY_RELEASE)==null?void 0:t.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0,...e}}const vn=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,H=F,h0=(e,t)=>e>t[1]?"poor":e>t[0]?"needs-improvement":"good",Kr=(e,t,n,r)=>{let s,o;return i=>{t.value>=0&&(i||r)&&(o=t.value-(s!=null?s:0),(o||s===void 0)&&(s=t.value,t.delta=o,t.rating=h0(t.value,n),e(t)))}},Xr=(e=!0)=>{var n,r;const t=(r=(n=H.performance)==null?void 0:n.getEntriesByType)==null?void 0:r.call(n,"navigation")[0];if(!e||t&&t.responseStart>0&&t.responseStart<performance.now())return t},dr=()=>{var t;const e=Xr();return(t=e==null?void 0:e.activationStart)!=null?t:0};function Gt(e,t,n){H.document&&H.addEventListener(e,t,n)}function io(e,t,n){H.document&&H.removeEventListener(e,t,n)}let jn=-1;const cp=new Set,m0=()=>{var e,t;return((e=H.document)==null?void 0:e.visibilityState)==="hidden"&&!((t=H.document)!=null&&t.prerendering)?0:1/0},Fs=e=>{if(g0(e)&&jn>-1){if(e.type==="visibilitychange"||e.type==="pagehide")for(const t of cp)t();isFinite(jn)||(jn=e.type==="visibilitychange"?e.timeStamp:0,io("prerenderingchange",Fs,!0))}},Qr=()=>{var e;if(H.document&&jn<0){const t=dr(),n=H.document.prerendering||(e=globalThis.performance.getEntriesByType("visibility-state").filter(r=>r.name==="hidden"&&r.startTime>t)[0])==null?void 0:e.startTime;jn=n!=null?n:m0(),Gt("visibilitychange",Fs,!0),Gt("pagehide",Fs,!0),Gt("prerenderingchange",Fs,!0)}return{get firstHiddenTime(){return jn},onHidden(t){cp.add(t)}}};function g0(e){var t;return e.type==="pagehide"||((t=H.document)==null?void 0:t.visibilityState)==="hidden"}const _0=()=>`v5-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,Zr=(e,t=-1)=>{var o,i;const n=Xr();let r="navigate";return n&&((o=H.document)!=null&&o.prerendering||dr()>0?r="prerender":(i=H.document)!=null&&i.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:t,rating:"good",delta:0,entries:[],id:_0(),navigationType:r}},Si=new WeakMap;function cc(e,t){try{return Si.get(e)||Si.set(e,new t),Si.get(e)}catch{return new t}}class ao{constructor(){ao.prototype.__init.call(this),ao.prototype.__init2.call(this)}__init(){this._sessionValue=0}__init2(){this._sessionEntries=[]}_processEntry(t){var s;if(t.hadRecentInput)return;const n=this._sessionEntries[0],r=this._sessionEntries[this._sessionEntries.length-1];this._sessionValue&&n&&r&&t.startTime-r.startTime<1e3&&t.startTime-n.startTime<5e3?(this._sessionValue+=t.value,this._sessionEntries.push(t)):(this._sessionValue=t.value,this._sessionEntries=[t]),(s=this._onAfterProcessingUnexpectedShift)==null||s.call(this,t)}}const fr=(e,t,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver(s=>{Promise.resolve().then(()=>{t(s.getEntries())})});return r.observe({type:e,buffered:!0,...n}),r}}catch{}},uc=e=>{let t=!1;return()=>{t||(e(),t=!0)}},jo=e=>{var t;(t=H.document)!=null&&t.prerendering?addEventListener("prerenderingchange",()=>e(),!0):e()},y0=[1800,3e3],S0=(e,t={})=>{jo(()=>{const n=Qr(),r=Zr("FCP");let s;const i=fr("paint",a=>{for(const c of a)c.name==="first-contentful-paint"&&(i.disconnect(),c.startTime<n.firstHiddenTime&&(r.value=Math.max(c.startTime-dr(),0),r.entries.push(c),s(!0)))});i&&(s=Kr(e,r,y0,t.reportAllChanges))})},b0=[.1,.25],E0=(e,t={})=>{S0(uc(()=>{var c;const n=Zr("CLS",0);let r;const s=Qr(),o=cc(t,ao),i=u=>{for(const d of u)o._processEntry(d);o._sessionValue>n.value&&(n.value=o._sessionValue,n.entries=o._sessionEntries,r())},a=fr("layout-shift",i);a&&(r=Kr(e,n,b0,t.reportAllChanges),s.onHidden(()=>{i(a.takeRecords()),r(!0)}),(c=H==null?void 0:H.setTimeout)==null||c.call(H,r))}))};let up=0,bi=1/0,ps=0;const T0=e=>{e.forEach(t=>{t.interactionId&&(bi=Math.min(bi,t.interactionId),ps=Math.max(ps,t.interactionId),up=ps?(ps-bi)/7+1:0)})};let ea;const lp=()=>ea?up:performance.interactionCount||0,v0=()=>{"interactionCount"in performance||ea||(ea=fr("event",T0,{type:"event",buffered:!0,durationThreshold:0}))},Ei=10;let dp=0;const I0=()=>lp()-dp;class co{constructor(){co.prototype.__init.call(this),co.prototype.__init2.call(this)}__init(){this._longestInteractionList=[]}__init2(){this._longestInteractionMap=new Map}_resetInteractions(){dp=lp(),this._longestInteractionList.length=0,this._longestInteractionMap.clear()}_estimateP98LongestInteraction(){const t=Math.min(this._longestInteractionList.length-1,Math.floor(I0()/50));return this._longestInteractionList[t]}_processEntry(t){var s,o;if((s=this._onBeforeProcessingEntry)==null||s.call(this,t),!(t.interactionId||t.entryType==="first-input"))return;const n=this._longestInteractionList.at(-1);let r=this._longestInteractionMap.get(t.interactionId);if(r||this._longestInteractionList.length<Ei||t.duration>n._latency){if(r?t.duration>r._latency?(r.entries=[t],r._latency=t.duration):t.duration===r._latency&&t.startTime===r.entries[0].startTime&&r.entries.push(t):(r={id:t.interactionId,entries:[t],_latency:t.duration},this._longestInteractionMap.set(r.id,r),this._longestInteractionList.push(r)),this._longestInteractionList.sort((i,a)=>a._latency-i._latency),this._longestInteractionList.length>Ei){const i=this._longestInteractionList.splice(Ei);for(const a of i)this._longestInteractionMap.delete(a.id)}(o=this._onAfterProcessingINPCandidate)==null||o.call(this,r)}}}const fp=e=>{var n;const t=H.requestIdleCallback||H.setTimeout;((n=H.document)==null?void 0:n.visibilityState)==="hidden"?e():(e=uc(e),Gt("visibilitychange",e,{once:!0,capture:!0}),Gt("pagehide",e,{once:!0,capture:!0}),t(()=>{e(),io("visibilitychange",e,{capture:!0}),io("pagehide",e,{capture:!0})}))},w0=[200,500],k0=40,C0=(e,t={})=>{if(!(globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype))return;const n=Qr();jo(()=>{var c;v0();const r=Zr("INP");let s;const o=cc(t,co),i=u=>{fp(()=>{for(const l of u)o._processEntry(l);const d=o._estimateP98LongestInteraction();d&&d._latency!==r.value&&(r.value=d._latency,r.entries=d.entries,s())})},a=fr("event",i,{durationThreshold:(c=t.durationThreshold)!=null?c:k0});s=Kr(e,r,w0,t.reportAllChanges),a&&(a.observe({type:"first-input",buffered:!0}),n.onHidden(()=>{i(a.takeRecords()),s(!0)}))})};class R0{_processEntry(t){var n;(n=this._onBeforeProcessingEntry)==null||n.call(this,t)}}const A0=[2500,4e3],x0=(e,t={})=>{jo(()=>{const n=Qr(),r=Zr("LCP");let s;const o=cc(t,R0),i=c=>{t.reportAllChanges||(c=c.slice(-1));for(const u of c)o._processEntry(u),u.startTime<n.firstHiddenTime&&(r.value=Math.max(u.startTime-dr(),0),r.entries=[u],s())},a=fr("largest-contentful-paint",i);if(a){s=Kr(e,r,A0,t.reportAllChanges);const c=uc(()=>{i(a.takeRecords()),a.disconnect(),s(!0)}),u=d=>{d.isTrusted&&(fp(c),io(d.type,u,{capture:!0}))};for(const d of["keydown","click","visibilitychange"])Gt(d,u,{capture:!0})}})},M0=[800,1800],ta=e=>{var t,n;(t=H.document)!=null&&t.prerendering?jo(()=>ta(e)):((n=H.document)==null?void 0:n.readyState)!=="complete"?addEventListener("load",()=>ta(e),!0):setTimeout(e)},N0=(e,t={})=>{const n=Zr("TTFB"),r=Kr(e,n,M0,t.reportAllChanges);ta(()=>{const s=Xr();s&&(n.value=Math.max(s.responseStart-dr(),0),n.entries=[s],r(!0))})},Ir={},uo={};let pp,hp,mp,gp;function lc(e,t=!1){return zo("cls",e,L0,pp,t)}function dc(e,t=!1){return zo("lcp",e,P0,hp,t)}function O0(e){return zo("ttfb",e,D0,mp)}function _p(e){return zo("inp",e,F0,gp)}function In(e,t){return yp(e,t),uo[e]||($0(e),uo[e]=!0),Sp(e,t)}function es(e,t){const n=Ir[e];if(n!=null&&n.length)for(const r of n)try{r(t)}catch(s){vn&&_.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${Ct(r)}
Error:`,s)}}function L0(){return E0(e=>{es("cls",{metric:e}),pp=e},{reportAllChanges:!0})}function P0(){return x0(e=>{es("lcp",{metric:e}),hp=e},{reportAllChanges:!0})}function D0(){return N0(e=>{es("ttfb",{metric:e}),mp=e})}function F0(){return C0(e=>{es("inp",{metric:e}),gp=e})}function zo(e,t,n,r,s=!1){yp(e,t);let o;return uo[e]||(o=n(),uo[e]=!0),r&&t({metric:r}),Sp(e,t,s?o:void 0)}function $0(e){const t={};e==="event"&&(t.durationThreshold=0),fr(e,n=>{es(e,{entries:n})},t)}function yp(e,t){Ir[e]=Ir[e]||[],Ir[e].push(t)}function Sp(e,t,n){return()=>{n&&n();const r=Ir[e];if(!r)return;const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}function B0(e){return"duration"in e}const U0=e=>{const t=n=>{var r;(n.type==="pagehide"||((r=H.document)==null?void 0:r.visibilityState)==="hidden")&&e(n)};Gt("visibilitychange",t,{capture:!0,once:!0}),Gt("pagehide",t,{capture:!0,once:!0})};function Ti(e){return typeof e=="number"&&isFinite(e)}function Xt(e,t,n,{...r}){const s=q(e).start_timestamp;return s&&s>t&&typeof e.updateStartTime=="function"&&e.updateStartTime(t),Ro(e,()=>{const o=ar({startTime:t,...r});return o&&o.end(n),o})}function fc(e){var g;const t=x();if(!t)return;const{name:n,transaction:r,attributes:s,startTime:o}=e,{release:i,environment:a,sendDefaultPii:c}=t.getOptions(),u=t.getIntegrationByName("Replay"),d=u==null?void 0:u.getReplayId(),l=G(),f=l.getUser(),p=f!==void 0?f.email||f.id||f.ip_address:void 0;let h;try{h=l.getScopeData().contexts.profile.profile_id}catch{}const m={release:i,environment:a,user:p||void 0,profile_id:h||void 0,replay_id:d||void 0,transaction:r,"user_agent.original":(g=H.navigator)==null?void 0:g.userAgent,"client.address":c?"{{auto}}":void 0,...s};return ar({name:n,attributes:m,startTime:o,experimental:{standalone:!0}})}function ts(){return H.addEventListener&&H.performance}function ye(e){return e/1e3}function H0(e){let t="unknown",n="unknown",r="";for(const s of e){if(s==="/"){[t,n]=e.split("/");break}if(!isNaN(Number(s))){t=r==="h"?"http":r,n=e.split(r)[1];break}r+=s}return r===e&&(t=r),{name:t,version:n}}function bp(e){try{return PerformanceObserver.supportedEntryTypes.includes(e)}catch{return!1}}function Ep(e,t){let n,r=!1;function s(a){!r&&n&&t(a,n),r=!0}U0(()=>{s("pagehide")});const o=e.on("beforeStartNavigationSpan",(a,c)=>{c!=null&&c.isRedirect||(s("navigation"),o(),i())}),i=e.on("afterStartPageLoadSpan",a=>{n=a.spanContext().spanId,i()})}function W0(e){let t=0,n;if(!bp("layout-shift"))return;const r=lc(({metric:s})=>{const o=s.entries[s.entries.length-1];o&&(t=s.value,n=o)},!0);Ep(e,(s,o)=>{j0(t,n,o,s),r()})}function j0(e,t,n,r){var u;vn&&_.log(`Sending CLS span (${e})`);const s=t?ye((xe()||0)+t.startTime):me(),o=G().getScopeData().transactionName,i=t?We((u=t.sources[0])==null?void 0:u.node):"Layout shift",a={[oe]:"auto.http.browser.cls",[we]:"ui.webvital.cls",[ir]:0,"sentry.pageload.span_id":n,"sentry.report_event":r};t!=null&&t.sources&&t.sources.forEach((d,l)=>{a[`cls.source.${l+1}`]=We(d.node)});const c=fc({name:i,transaction:o,attributes:a,startTime:s});c&&(c.addEvent("cls",{[Hr]:"",[Wr]:e}),c.end(s))}function z0(e){let t=0,n;if(!bp("largest-contentful-paint"))return;const r=dc(({metric:s})=>{const o=s.entries[s.entries.length-1];o&&(t=s.value,n=o)},!0);Ep(e,(s,o)=>{q0(t,n,o,s),r()})}function q0(e,t,n,r){vn&&_.log(`Sending LCP span (${e})`);const s=ye((xe()||0)+((t==null?void 0:t.startTime)||0)),o=G().getScopeData().transactionName,i=t?We(t.element):"Largest contentful paint",a={[oe]:"auto.http.browser.lcp",[we]:"ui.webvital.lcp",[ir]:0,"sentry.pageload.span_id":n,"sentry.report_event":r};t&&(t.element&&(a["lcp.element"]=We(t.element)),t.id&&(a["lcp.id"]=t.id),t.url&&(a["lcp.url"]=t.url),t.loadTime!=null&&(a["lcp.loadTime"]=t.loadTime),t.renderTime!=null&&(a["lcp.renderTime"]=t.renderTime),t.size!=null&&(a["lcp.size"]=t.size));const c=fc({name:i,transaction:o,attributes:a,startTime:s});c&&(c.addEvent("lcp",{[Hr]:"millisecond",[Wr]:e}),c.end(s))}function Ye(e){return e&&((xe()||performance.timeOrigin)+e)/1e3}function Tp(e){var n;const t={};if(e.nextHopProtocol!=null){const{name:r,version:s}=H0(e.nextHopProtocol);t["network.protocol.version"]=s,t["network.protocol.name"]=r}return xe()||(n=ts())!=null&&n.timeOrigin?G0({...t,"http.request.redirect_start":Ye(e.redirectStart),"http.request.redirect_end":Ye(e.redirectEnd),"http.request.worker_start":Ye(e.workerStart),"http.request.fetch_start":Ye(e.fetchStart),"http.request.domain_lookup_start":Ye(e.domainLookupStart),"http.request.domain_lookup_end":Ye(e.domainLookupEnd),"http.request.connect_start":Ye(e.connectStart),"http.request.secure_connection_start":Ye(e.secureConnectionStart),"http.request.connection_end":Ye(e.connectEnd),"http.request.request_start":Ye(e.requestStart),"http.request.response_start":Ye(e.responseStart),"http.request.response_end":Ye(e.responseEnd),"http.request.time_to_first_byte":e.responseStart!=null?e.responseStart/1e3:void 0}):t}function G0(e){return Object.fromEntries(Object.entries(e).filter(([,t])=>t!=null))}const V0=2147483647;let ll=0,st={},Be,Dn;function J0({recordClsStandaloneSpans:e,recordLcpStandaloneSpans:t,client:n}){const r=ts();if(r&&xe()){r.mark&&H.performance.mark("sentry-tracing-init");const s=t?z0(n):Z0(),o=ev(),i=e?W0(n):Q0();return()=>{s==null||s(),o(),i==null||i()}}return()=>{}}function Y0(){In("longtask",({entries:e})=>{const t=Te();if(!t)return;const{op:n,start_timestamp:r}=q(t);for(const s of e){const o=ye(xe()+s.startTime),i=ye(s.duration);n==="navigation"&&r&&o<r||Xt(t,o,o+i,{name:"Main UI thread blocked",op:"ui.long-task",attributes:{[oe]:"auto.ui.browser.metrics"}})}})}function K0(){new PerformanceObserver(t=>{const n=Te();if(n)for(const r of t.getEntries()){if(!r.scripts[0])continue;const s=ye(xe()+r.startTime),{start_timestamp:o,op:i}=q(n);if(i==="navigation"&&o&&s<o)continue;const a=ye(r.duration),c={[oe]:"auto.ui.browser.metrics"},u=r.scripts[0],{invoker:d,invokerType:l,sourceURL:f,sourceFunctionName:p,sourceCharPosition:h}=u;c["browser.script.invoker"]=d,c["browser.script.invoker_type"]=l,f&&(c["code.filepath"]=f),p&&(c["code.function"]=p),h!==-1&&(c["browser.script.source_char_position"]=h),Xt(n,s,s+a,{name:"Main UI thread blocked",op:"ui.long-animation-frame",attributes:c})}}).observe({type:"long-animation-frame",buffered:!0})}function X0(){In("event",({entries:e})=>{const t=Te();if(t){for(const n of e)if(n.name==="click"){const r=ye(xe()+n.startTime),s=ye(n.duration),o={name:We(n.target),op:`ui.interaction.${n.name}`,startTime:r,attributes:{[oe]:"auto.ui.browser.metrics"}},i=Ed(n.target);i&&(o.attributes["ui.component_name"]=i),Xt(t,r,r+s,o)}}})}function Q0(){return lc(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(st.cls={value:e.value,unit:""},Dn=t)},!0)}function Z0(){return dc(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(st.lcp={value:e.value,unit:"millisecond"},Be=t)},!0)}function ev(){return O0(({metric:e})=>{e.entries[e.entries.length-1]&&(st.ttfb={value:e.value,unit:"millisecond"})})}function tv(e,t){const n=ts(),r=xe();if(!(n!=null&&n.getEntries)||!r)return;const s=ye(r),o=n.getEntries(),{op:i,start_timestamp:a}=q(e);o.slice(ll).forEach(c=>{const u=ye(c.startTime),d=ye(Math.max(0,c.duration));if(!(i==="navigation"&&a&&s+u<a))switch(c.entryType){case"navigation":{ov(e,c,s);break}case"mark":case"paint":case"measure":{rv(e,c,u,d,s,t.ignorePerformanceApiSpans);const l=Qr(),f=c.startTime<l.firstHiddenTime;c.name==="first-paint"&&f&&(st.fp={value:c.startTime,unit:"millisecond"}),c.name==="first-contentful-paint"&&f&&(st.fcp={value:c.startTime,unit:"millisecond"});break}case"resource":{cv(e,c,c.name,u,d,s,t.ignoreResourceSpans);break}}}),ll=Math.max(o.length-1,0),uv(e),i==="pageload"&&(fv(st),t.recordClsOnPageloadSpan||delete st.cls,t.recordLcpOnPageloadSpan||delete st.lcp,Object.entries(st).forEach(([c,u])=>{Sg(c,u.value,u.unit)}),e.setAttribute("performance.timeOrigin",s),e.setAttribute("performance.activationStart",dr()),lv(e,t)),Be=void 0,Dn=void 0,st={}}function nv(e){if((e==null?void 0:e.entryType)==="measure")try{return e.detail.devtools.track==="Components "}catch{return}}function rv(e,t,n,r,s,o){if(nv(t)||["mark","measure"].includes(t.entryType)&&at(t.name,o))return;const i=Xr(!1),a=ye(i?i.requestStart:0),c=s+Math.max(n,a),u=s+n,d=u+r,l={[oe]:"auto.resource.browser.metrics"};c!==u&&(l["sentry.browser.measure_happened_before_request"]=!0,l["sentry.browser.measure_start_time"]=c),sv(l,t),c<=d&&Xt(e,c,d,{name:t.name,op:t.entryType,attributes:l})}function sv(e,t){try{const n=t.detail;if(!n)return;if(typeof n=="object"){for(const[r,s]of Object.entries(n))if(s&&Yt(s))e[`sentry.browser.measure.detail.${r}`]=s;else if(s!==void 0)try{e[`sentry.browser.measure.detail.${r}`]=JSON.stringify(s)}catch{}return}if(Yt(n)){e["sentry.browser.measure.detail"]=n;return}try{e["sentry.browser.measure.detail"]=JSON.stringify(n)}catch{}}catch{}}function ov(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{hs(e,t,r,n)}),hs(e,t,"secureConnection",n,"TLS/SSL"),hs(e,t,"fetch",n,"cache"),hs(e,t,"domainLookup",n,"DNS"),av(e,t,n)}function hs(e,t,n,r,s=n){const o=iv(n),i=t[o],a=t[`${n}Start`];!a||!i||Xt(e,r+ye(a),r+ye(i),{op:`browser.${s}`,name:t.name,attributes:{[oe]:"auto.ui.browser.metrics",...n==="redirect"&&t.redirectCount!=null?{"http.redirect_count":t.redirectCount}:{}}})}function iv(e){return e==="secureConnection"?"connectEnd":e==="fetch"?"domainLookupStart":`${e}End`}function av(e,t,n){const r=n+ye(t.requestStart),s=n+ye(t.responseEnd),o=n+ye(t.responseStart);t.responseEnd&&(Xt(e,r,s,{op:"browser.request",name:t.name,attributes:{[oe]:"auto.ui.browser.metrics"}}),Xt(e,o,s,{op:"browser.response",name:t.name,attributes:{[oe]:"auto.ui.browser.metrics"}}))}function cv(e,t,n,r,s,o,i){if(t.initiatorType==="xmlhttprequest"||t.initiatorType==="fetch")return;const a=t.initiatorType?`resource.${t.initiatorType}`:"resource.other";if(i!=null&&i.includes(a))return;const c={[oe]:"auto.resource.browser.metrics"},u=hn(n);u.protocol&&(c["url.scheme"]=u.protocol.split(":").pop()),u.host&&(c["server.address"]=u.host),c["url.same_origin"]=n.includes(H.location.origin),dv(t,c,[["responseStatus","http.response.status_code"],["transferSize","http.response_transfer_size"],["encodedBodySize","http.response_content_length"],["decodedBodySize","http.decoded_response_content_length"],["renderBlockingStatus","resource.render_blocking_status"],["deliveryType","http.response_delivery_type"]]);const d={...c,...Tp(t)},l=o+r,f=l+s;Xt(e,l,f,{name:n.replace(H.location.origin,""),op:a,attributes:d})}function uv(e){const t=H.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setAttribute("effectiveConnectionType",n.effectiveType),n.type&&e.setAttribute("connectionType",n.type),Ti(n.rtt)&&(st["connection.rtt"]={value:n.rtt,unit:"millisecond"})),Ti(t.deviceMemory)&&e.setAttribute("deviceMemory",`${t.deviceMemory} GB`),Ti(t.hardwareConcurrency)&&e.setAttribute("hardwareConcurrency",String(t.hardwareConcurrency))}function lv(e,t){Be&&t.recordLcpOnPageloadSpan&&(Be.element&&e.setAttribute("lcp.element",We(Be.element)),Be.id&&e.setAttribute("lcp.id",Be.id),Be.url&&e.setAttribute("lcp.url",Be.url.trim().slice(0,200)),Be.loadTime!=null&&e.setAttribute("lcp.loadTime",Be.loadTime),Be.renderTime!=null&&e.setAttribute("lcp.renderTime",Be.renderTime),e.setAttribute("lcp.size",Be.size)),Dn!=null&&Dn.sources&&t.recordClsOnPageloadSpan&&Dn.sources.forEach((n,r)=>e.setAttribute(`cls.source.${r+1}`,We(n.node)))}function dv(e,t,n){n.forEach(([r,s])=>{const o=e[r];o!=null&&(typeof o=="number"&&o<V0||typeof o=="string")&&(t[s]=o)})}function fv(e){const t=Xr(!1);if(!t)return;const{responseStart:n,requestStart:r}=t;r<=n&&(e["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}function pv(){return ts()&&xe()?In("element",hv):()=>{}}const hv=({entries:e})=>{const t=Te(),n=t?Ee(t):void 0,r=n?q(n).description:G().getScopeData().transactionName;e.forEach(s=>{var p,h;const o=s;if(!o.identifier)return;const i=o.name,a=o.renderTime,c=o.loadTime,[u,d]=c?[ye(c),"load-time"]:a?[ye(a),"render-time"]:[me(),"entry-emission"],l=i==="image-paint"?ye(Math.max(0,(a!=null?a:0)-(c!=null?c:0))):0,f={[oe]:"auto.ui.browser.elementtiming",[we]:"ui.elementtiming",[Ze]:"component","sentry.span_start_time_source":d,"sentry.transaction_name":r,"element.id":o.id,"element.type":((h=(p=o.element)==null?void 0:p.tagName)==null?void 0:h.toLowerCase())||"unknown","element.size":o.naturalWidth&&o.naturalHeight?`${o.naturalWidth}x${o.naturalHeight}`:void 0,"element.render_time":a,"element.load_time":c,"element.url":o.url||void 0,"element.identifier":o.identifier,"element.paint_type":i};rn({name:`element[${o.identifier}]`,attributes:f,startTime:u,onlyIfParent:!0},m=>{m.end(u+l)})})},mv=1e3;let dl,na,ra;function vp(e){Zt("dom",e),en("dom",gv)}function gv(){if(!H.document)return;const e=et.bind(null,"dom"),t=fl(e,!0);H.document.addEventListener("click",t,!1),H.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{var o,i;const s=(o=H[n])==null?void 0:o.prototype;(i=s==null?void 0:s.hasOwnProperty)!=null&&i.call(s,"addEventListener")&&(Ce(s,"addEventListener",function(a){return function(c,u,d){if(c==="click"||c=="keypress")try{const l=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},f=l[c]=l[c]||{refCount:0};if(!f.handler){const p=fl(e);f.handler=p,a.call(this,c,p,d)}f.refCount++}catch{}return a.call(this,c,u,d)}}),Ce(s,"removeEventListener",function(a){return function(c,u,d){if(c==="click"||c=="keypress")try{const l=this.__sentry_instrumentation_handlers__||{},f=l[c];f&&(f.refCount--,f.refCount<=0&&(a.call(this,c,f.handler,d),f.handler=void 0,delete l[c]),Object.keys(l).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return a.call(this,c,u,d)}}))})}function _v(e){if(e.type!==na)return!1;try{if(!e.target||e.target._sentryId!==ra)return!1}catch{}return!0}function yv(e,t){return e!=="keypress"?!1:t!=null&&t.tagName?!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable):!0}function fl(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=Sv(n);if(yv(n.type,r))return;Pe(n,"_sentryCaptured",!0),r&&!r._sentryId&&Pe(r,"_sentryId",Ie());const s=n.type==="keypress"?"input":n.type;_v(n)||(e({event:n,name:s,global:t}),na=n.type,ra=r?r._sentryId:void 0),clearTimeout(dl),dl=H.setTimeout(()=>{ra=void 0,na=void 0},mv)}}function Sv(e){try{return e.target}catch{return null}}let ms;function qo(e){const t="history";Zt(t,e),en(t,bv)}function bv(){if(H.addEventListener("popstate",()=>{const t=H.location.href,n=ms;if(ms=t,n===t)return;et("history",{from:n,to:t})}),!wE())return;function e(t){return function(...n){const r=n.length>2?n[2]:void 0;if(r){const s=ms,o=Ev(String(r));if(ms=o,s===o)return t.apply(this,n);et("history",{from:s,to:o})}return t.apply(this,n)}}Ce(H.history,"pushState",e),Ce(H.history,"replaceState",e)}function Ev(e){try{return new URL(e,H.location.origin).toString()}catch{return e}}const $s={};function pc(e){const t=$s[e];if(t)return t;let n=H[e];if(Vi(n))return $s[e]=n.bind(H);const r=H.document;if(r&&typeof r.createElement=="function")try{const s=r.createElement("iframe");s.hidden=!0,r.head.appendChild(s);const o=s.contentWindow;o!=null&&o[e]&&(n=o[e]),r.head.removeChild(s)}catch(s){vn&&_.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,s)}return n&&($s[e]=n.bind(H))}function Tv(e){$s[e]=void 0}function ns(...e){return pc("setTimeout")(...e)}const Tt="__sentry_xhr_v3__";function hc(e){Zt("xhr",e),en("xhr",vv)}function vv(){if(!H.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(t,n,r){const s=new Error,o=me()*1e3,i=it(r[0])?r[0].toUpperCase():void 0,a=Iv(r[1]);if(!i||!a)return t.apply(n,r);n[Tt]={method:i,url:a,request_headers:{}},i==="POST"&&a.match(/sentry_key/)&&(n.__sentry_own_request__=!0);const c=()=>{const u=n[Tt];if(u&&n.readyState===4){try{u.status_code=n.status}catch{}const d={endTimestamp:me()*1e3,startTimestamp:o,xhr:n,virtualError:s};et("xhr",d)}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply(u,d,l){return c(),u.apply(d,l)}}):n.addEventListener("readystatechange",c),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(u,d,l){const[f,p]=l,h=d[Tt];return h&&it(f)&&it(p)&&(h.request_headers[f.toLowerCase()]=p),u.apply(d,l)}}),t.apply(n,r)}}),e.send=new Proxy(e.send,{apply(t,n,r){const s=n[Tt];if(!s)return t.apply(n,r);r[0]!==void 0&&(s.body=r[0]);const o={startTimestamp:me()*1e3,xhr:n};return et("xhr",o),t.apply(n,r)}})}function Iv(e){if(it(e))return e;try{return e.toString()}catch{}}const wv=Symbol.for("sentry__originalRequestBody");function Ip(e){return new URLSearchParams(e).toString()}function lo(e,t=_){try{if(typeof e=="string")return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[Ip(e)];if(!e)return[void 0]}catch(n){return vn&&t.error(n,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return vn&&t.log("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function mc(e=[]){if(e.length>=2&&e[1]&&typeof e[1]=="object"&&"body"in e[1])return e[1].body;if(e.length>=1&&e[0]instanceof Request){const n=e[0][wv];return n!==void 0?n:void 0}}function wp(e){let t;try{t=e.getAllResponseHeaders()}catch(n){return vn&&_.error(n,"Failed to get xhr response headers",e),{}}return t?t.split(`\r
`).reduce((n,r)=>{const[s,o]=r.split(": ");return o&&(n[s.toLowerCase()]=o),n},{}):{}}const vi=[],Bs=new Map,Mn=new Map,kv=60;function Cv(){if(ts()&&xe()){const t=Rv();return()=>{t()}}return()=>{}}const sa={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function Rv(){return _p(Av)}const Av=({metric:e})=>{if(e.value==null)return;const t=ye(e.value);if(t>kv)return;const n=e.entries.find(h=>h.duration===e.value&&sa[h.name]);if(!n)return;const{interactionId:r}=n,s=sa[n.name],o=ye(xe()+n.startTime),i=Te(),a=i?Ee(i):void 0,c=r!=null?Bs.get(r):void 0,u=(c==null?void 0:c.span)||a,d=u?q(u).description:G().getScopeData().transactionName,l=(c==null?void 0:c.elementName)||We(n.target),f={[oe]:"auto.http.browser.inp",[we]:`ui.interaction.${s}`,[ir]:n.duration},p=fc({name:l,transaction:d,attributes:f,startTime:o});p&&(p.addEvent("inp",{[Hr]:"millisecond",[Wr]:e.value}),p.end(o+t))};function xv(){const e=Object.keys(sa);so()&&e.forEach(s=>{H.addEventListener(s,t,{capture:!0,passive:!0})});function t(s){const o=s.target;if(!o)return;const i=We(o),a=Math.round(s.timeStamp);if(Mn.set(a,i),Mn.size>50){const c=Mn.keys().next().value;c!==void 0&&Mn.delete(c)}}function n(s){const o=Math.round(s.startTime);let i=Mn.get(o);if(!i)for(let a=-5;a<=5;a++){const c=Mn.get(o+a);if(c){i=c;break}}return i||"<unknown>"}const r=({entries:s})=>{const o=Te(),i=o&&Ee(o);s.forEach(a=>{if(!B0(a))return;const c=a.interactionId;if(c==null||Bs.has(c))return;const u=a.target?We(a.target):n(a);if(vi.length>10){const d=vi.shift();Bs.delete(d)}vi.push(c),Bs.set(c,{span:i,elementName:u})})};In("event",r),In("first-input",r)}const Mv=40;function kp(e,t=pc("fetch")){let n=0,r=0;async function s(o){const i=o.body.length;n+=i,r++;const a={body:o.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};try{const c=await t(e.url,a);return{statusCode:c.status,headers:{"x-sentry-rate-limits":c.headers.get("X-Sentry-Rate-Limits"),"retry-after":c.headers.get("Retry-After")}}}catch(c){throw Tv("fetch"),c}finally{n-=i,r--}}return w_(e,s,Ba(e.bufferSize||Mv))}const I=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function Nv(){const e=x();if(!e){I&&_.warn("No Sentry client available, profiling is not started");return}if(!e.getIntegrationByName("BrowserProfiling")){I&&_.warn("BrowserProfiling integration is not available");return}e.emit("startUIProfiler")}function Ov(){const e=x();if(!e){I&&_.warn("No Sentry client available, profiling is not started");return}if(!e.getIntegrationByName("BrowserProfiling")){I&&_.warn("ProfilingIntegration is not available");return}e.emit("stopUIProfiler")}const YA={startProfiler:Nv,stopProfiler:Ov},Lv=10,Pv=20,Dv=30,Fv=40,$v=50;function Xn(e,t,n,r){const s={filename:e,function:t==="<anonymous>"?ht:t,in_app:!0};return n!==void 0&&(s.lineno=n),r!==void 0&&(s.colno=r),s}const Bv=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,Uv=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Hv=/\((\S*)(?::(\d+))(?::(\d+))\)/,Wv=/at (.+?) ?\(data:(.+?),/,jv=e=>{const t=e.match(Wv);if(t)return{filename:`<data:${t[2]}>`,function:t[1]};const n=Bv.exec(e);if(n){const[,s,o,i]=n;return Xn(s,ht,+o,+i)}const r=Uv.exec(e);if(r){if(r[2]&&r[2].indexOf("eval")===0){const a=Hv.exec(r[2]);a&&(r[2]=a[1],r[3]=a[2],r[4]=a[3])}const[o,i]=Cp(r[1]||ht,r[2]);return Xn(i,o,r[3]?+r[3]:void 0,r[4]?+r[4]:void 0)}},zv=[Dv,jv],qv=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Gv=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Vv=e=>{const t=qv.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const o=Gv.exec(t[3]);o&&(t[1]=t[1]||"eval",t[3]=o[1],t[4]=o[2],t[5]="")}let r=t[3],s=t[1]||ht;return[s,r]=Cp(s,r),Xn(r,s,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},Jv=[$v,Vv],Yv=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Kv=e=>{const t=Yv.exec(e);return t?Xn(t[2],t[1]||ht,+t[3],t[4]?+t[4]:void 0):void 0},KA=[Fv,Kv],Xv=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,Qv=e=>{const t=Xv.exec(e);return t?Xn(t[2],t[3]||ht,+t[1]):void 0},XA=[Lv,Qv],Zv=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,eI=e=>{const t=Zv.exec(e);return t?Xn(t[5],t[3]||t[4]||ht,+t[1],+t[2]):void 0},QA=[Pv,eI],tI=[zv,Jv],nI=hd(...tI),Cp=(e,t)=>{const n=e.indexOf("safari-extension")!==-1,r=e.indexOf("safari-web-extension")!==-1;return n||r?[e.indexOf("@")!==-1?e.split("@")[0]:ht,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};function ZA(e,{metadata:t,tunnel:n,dsn:r}){const s={event_id:e.event_id,sent_at:new Date().toISOString(),...(t==null?void 0:t.sdk)&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:Lt(r)}},o=rI(e);return lt(s,[o])}function rI(e){return[{type:"user_report"},e]}const gs=1024,sI="Breadcrumbs",oI=((e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:sI,setup(n){t.console&&Wa(uI(n)),t.dom&&vp(cI(n,t.dom)),t.xhr&&hc(lI(n)),t.fetch&&Za(dI(n)),t.history&&qo(fI(n)),t.sentry&&n.on("beforeSendEvent",aI(n))}}}),iI=oI;function aI(e){return function(n){x()===e&&Mt({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:an(n)},{event:n})}}function cI(e,t){return function(r){if(x()!==e)return;let s,o,i=typeof t=="object"?t.serializeAttribute:void 0,a=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;a&&a>gs&&(I&&_.warn(`\`dom.maxStringLength\` cannot exceed ${gs}, but a value of ${a} was configured. Sentry will use ${gs} instead.`),a=gs),typeof i=="string"&&(i=[i]);try{const u=r.event,d=pI(u)?u.target:u;s=We(d,{keyAttrs:i,maxStringLength:a}),o=Ed(d)}catch{s="<unknown>"}if(s.length===0)return;const c={category:`ui.${r.name}`,message:s};o&&(c.data={"ui.component_name":o}),Mt(c,{event:r.event,name:r.name,global:r.global})}}function uI(e){return function(n){if(x()!==e)return;const r={category:"console",data:{arguments:n.args,logger:"console"},level:to(n.level),message:qs(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)r.message=`Assertion failed: ${qs(n.args.slice(1)," ")||"console.assert"}`,r.data.arguments=n.args.slice(1);else return;Mt(r,{input:n.args,level:n.level})}}function lI(e){return function(n){if(x()!==e)return;const{startTimestamp:r,endTimestamp:s}=n,o=n.xhr[Tt];if(!r||!s||!o)return;const{method:i,url:a,status_code:c,body:u}=o,d={method:i,url:a,status_code:c},l={xhr:n.xhr,input:u,startTimestamp:r,endTimestamp:s},f={category:"xhr",data:d,type:"http",level:zf(c)};e.emit("beforeOutgoingRequestBreadcrumb",f,l),Mt(f,l)}}function dI(e){return function(n){if(x()!==e)return;const{startTimestamp:r,endTimestamp:s}=n;if(s&&!(n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"))if(n.fetchData.method,n.fetchData.url,n.error){const o=n.fetchData,i={data:n.error,input:n.args,startTimestamp:r,endTimestamp:s},a={category:"fetch",data:o,level:"error",type:"http"};e.emit("beforeOutgoingRequestBreadcrumb",a,i),Mt(a,i)}else{const o=n.response,i={...n.fetchData,status_code:o==null?void 0:o.status};n.fetchData.request_body_size,n.fetchData.response_body_size,o==null||o.status;const a={input:n.args,response:o,startTimestamp:r,endTimestamp:s},c={category:"fetch",data:i,type:"http",level:zf(i.status_code)};e.emit("beforeOutgoingRequestBreadcrumb",c,a),Mt(c,a)}}}function fI(e){return function(n){if(x()!==e)return;let r=n.from,s=n.to;const o=hn(P.location.href);let i=r?hn(r):void 0;const a=hn(s);i!=null&&i.path||(i=o),o.protocol===a.protocol&&o.host===a.host&&(s=a.relative),o.protocol===i.protocol&&o.host===i.host&&(r=i.relative),Mt({category:"navigation",data:{from:r,to:s}})}}function pI(e){return!!e&&!!e.target}const hI=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],mI="BrowserApiErrors",gI=((e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,unregisterOriginalCallbacks:!1,...e};return{name:mI,setupOnce(){t.setTimeout&&Ce(P,"setTimeout",pl),t.setInterval&&Ce(P,"setInterval",pl),t.requestAnimationFrame&&Ce(P,"requestAnimationFrame",yI),t.XMLHttpRequest&&"XMLHttpRequest"in P&&Ce(XMLHttpRequest.prototype,"send",SI);const n=t.eventTarget;n&&(Array.isArray(n)?n:hI).forEach(s=>bI(s,t))}}}),_I=gI;function pl(e){return function(...t){const n=t[0];return t[0]=Kn(n,{mechanism:{handled:!1,type:`auto.browser.browserapierrors.${Ct(e)}`}}),e.apply(this,t)}}function yI(e){return function(t){return e.apply(this,[Kn(t,{mechanism:{data:{handler:Ct(e)},handled:!1,type:"auto.browser.browserapierrors.requestAnimationFrame"}})])}}function SI(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(s=>{s in n&&typeof n[s]=="function"&&Ce(n,s,function(o){const i={mechanism:{data:{handler:Ct(o)},handled:!1,type:`auto.browser.browserapierrors.xhr.${s}`}},a=Ta(o);return a&&(i.mechanism.data.handler=Ct(a)),Kn(o,i)})}),e.apply(this,t)}}function bI(e,t){var s,o;const r=(s=P[e])==null?void 0:s.prototype;(o=r==null?void 0:r.hasOwnProperty)!=null&&o.call(r,"addEventListener")&&(Ce(r,"addEventListener",function(i){return function(a,c,u){try{EI(c)&&(c.handleEvent=Kn(c.handleEvent,{mechanism:{data:{handler:Ct(c),target:e},handled:!1,type:"auto.browser.browserapierrors.handleEvent"}}))}catch{}return t.unregisterOriginalCallbacks&&TI(this,a,c),i.apply(this,[a,Kn(c,{mechanism:{data:{handler:Ct(c),target:e},handled:!1,type:"auto.browser.browserapierrors.addEventListener"}}),u])}}),Ce(r,"removeEventListener",function(i){return function(a,c,u){try{const d=c.__sentry_wrapped__;d&&i.call(this,a,d,u)}catch{}return i.call(this,a,c,u)}}))}function EI(e){return typeof e.handleEvent=="function"}function TI(e,t,n){e&&typeof e=="object"&&"removeEventListener"in e&&typeof e.removeEventListener=="function"&&e.removeEventListener(t,n)}const vI=()=>({name:"BrowserSession",setupOnce(){if(typeof P.document>"u"){I&&_.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}iu({ignoreDuration:!0}),au(),qo(({from:e,to:t})=>{e!==void 0&&e!==t&&(iu({ignoreDuration:!0}),au())})}}),II="GlobalHandlers",wI=((e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:II,setupOnce(){Error.stackTraceLimit=50},setup(n){t.onerror&&(CI(n),hl("onerror")),t.onunhandledrejection&&(RI(n),hl("onunhandledrejection"))}}}),kI=wI;function CI(e){gd(t=>{const{stackParser:n,attachStacktrace:r}=xp();if(x()!==e||ip())return;const{msg:s,url:o,line:i,column:a,error:c}=t,u=AI(Wo(n,c||s,void 0,r,!1),o,i,a);u.level="error",zr(u,{originalException:c,mechanism:{handled:!1,type:"auto.browser.global_handlers.onerror"}})})}function RI(e){_d(t=>{const{stackParser:n,attachStacktrace:r}=xp();if(x()!==e||ip())return;const s=Rp(t),o=Yt(s)?Ap(s):Wo(n,s,void 0,r,!0);o.level="error",zr(o,{originalException:s,mechanism:{handled:!1,type:"auto.browser.global_handlers.onunhandledrejection"}})})}function Rp(e){if(Yt(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}function Ap(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function AI(e,t,n,r){var f;const s=e.exception=e.exception||{},o=s.values=s.values||[],i=o[0]=o[0]||{},a=i.stacktrace=i.stacktrace||{},c=a.frames=a.frames||[],u=r,d=n,l=(f=xI(t))!=null?f:wn();return c.length===0&&c.push({colno:u,filename:l,function:ht,in_app:!0,lineno:d}),e}function hl(e){I&&_.log(`Global Handler attached: ${e}`)}function xp(){const e=x();return(e==null?void 0:e.getOptions())||{stackParser:()=>[],attachStacktrace:!1}}function xI(e){if(!(!it(e)||e.length===0))return e.startsWith("data:")?`<${qt(e,!1)}>`:e}const MI=()=>({name:"HttpContext",preprocessEvent(e){var r;if(!P.navigator&&!P.location&&!P.document)return;const t=oc(),n={...t.headers,...(r=e.request)==null?void 0:r.headers};e.request={...t,...e.request,headers:n}}}),NI="cause",OI=5,LI="LinkedErrors",PI=((e={})=>{const t=e.limit||OI,n=e.key||NI;return{name:LI,preprocessEvent(r,s,o){const i=o.getOptions();hy(ic,i.stackParser,n,t,r,s)}}}),DI=PI,FI="SpotlightBrowser",$I=((e={})=>{const t=e.sidecarUrl||"http://localhost:8969/stream";return{name:FI,setup:()=>{I&&_.log("Using Sidecar URL",t)},processEvent:n=>UI(n)?null:n,afterAllSetup:n=>{BI(n,t)}}});function BI(e,t){const n=pc("fetch");let r=0;e.on("beforeEnvelope",s=>{if(r>3){_.warn("[Spotlight] Disabled Sentry -> Spotlight integration due to too many failed requests:",r);return}n(t,{method:"POST",body:Ks(s),headers:{"Content-Type":"application/x-sentry-envelope"},mode:"cors"}).then(o=>{o.status>=200&&o.status<400&&(r=0)},o=>{r++,_.error("Sentry SDK can't connect to Sidecar is it running? See: https://spotlightjs.com/sidecar/npx/",o)})})}const ex=$I;function UI(e){var t;return!!(e.type==="transaction"&&e.spans&&((t=e.contexts)!=null&&t.trace)&&e.contexts.trace.op==="ui.action.click"&&e.spans.some(({description:n})=>n==null?void 0:n.includes("#sentry-spotlight")))}function HI(){return WI()?(I&&Qt(()=>{console.error("[Sentry] You cannot use Sentry.init() in a browser extension, see: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")}),!0):!1}function WI(){var o;if(typeof P.window>"u")return!1;const e=P;if(e.nw)return!1;const t=e.chrome||e.browser;if(!((o=t==null?void 0:t.runtime)!=null&&o.id))return!1;const n=wn(),r=["chrome-extension","moz-extension","ms-browser-extension","safari-web-extension"];return!(P===P.top&&r.some(i=>n.startsWith(`${i}://`)))}function jI(e){return[iy(),ny(),pS(),_I(),iI(),kI(),DI(),vy(),MI(),vI()]}function tx(e={}){const t=!e.skipBrowserExtensionCheck&&HI();let n=e.defaultIntegrations==null?jI():e.defaultIntegrations;const r={...e,enabled:t?!1:e.enabled,stackParser:Xh(e.stackParser||nI),integrations:i_({integrations:e.integrations,defaultIntegrations:n}),transport:e.transport||kp};return D_(f0,r)}function nx(){}function rx(e){e()}function sx(e={}){const t=P.document,n=(t==null?void 0:t.head)||(t==null?void 0:t.body);if(!n){I&&_.error("[showReportDialog] Global document not defined");return}const r=G(),s=x(),o=s==null?void 0:s.getDsn();if(!o){I&&_.error("[showReportDialog] DSN not configured");return}const i={...e,user:{...r.getUser(),...e.user},eventId:e.eventId||Qg()},a=P.document.createElement("script");a.async=!0,a.crossOrigin="anonymous",a.src=s_(o,i);const{onLoad:c,onClose:u}=i;if(c&&(a.onload=c),u){const d=l=>{if(l.data==="__sentry_reportdialog_closed__")try{u()}finally{P.removeEventListener("message",d)}};P.addEventListener("message",d)}n.appendChild(a)}const zI=F,qI="ReportingObserver",ml=new WeakMap,GI=((e={})=>{const t=e.types||["crash","deprecation","intervention"];function n(r){if(ml.has(x()))for(const s of r)ut(o=>{o.setExtra("url",s.url);const i=`ReportingObserver [${s.type}]`;let a="No details available";if(s.body){const c={};for(const u in s.body)c[u]=s.body[u];if(o.setExtra("body",c),s.type==="crash"){const u=s.body;a=[u.crashId||"",u.reason||""].join(" ").trim()||a}else a=s.body.message||a}Kg(`${i}: ${a}`)})}return{name:qI,setupOnce(){if(!CE())return;new zI.ReportingObserver(n,{buffered:!0,types:t}).observe()},setup(r){ml.set(r,!0)}}}),ox=GI,VI="HttpClient",JI=((e={})=>{const t={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...e};return{name:VI,setup(n){nw(n,t),rw(n,t)}}}),ix=JI;function YI(e,t,n,r,s){if(Np(e,n.status,n.url)){const o=sw(t,r);let i,a,c,u;Lp()&&([i,c]=gl("Cookie",o),[a,u]=gl("Set-Cookie",n));const d=Op({url:o.url,method:o.method,status:n.status,requestHeaders:i,responseHeaders:a,requestCookies:c,responseCookies:u,error:s,type:"fetch"});zr(d)}}function gl(e,t){const n=QI(t.headers);let r;try{const s=n[e]||n[e.toLowerCase()]||void 0;s&&(r=Mp(s))}catch{}return[n,r]}function KI(e,t,n,r,s){if(Np(e,t.status,t.responseURL)){let o,i,a;if(Lp()){try{const u=t.getResponseHeader("Set-Cookie")||t.getResponseHeader("set-cookie")||void 0;u&&(i=Mp(u))}catch{}try{a=ZI(t)}catch{}o=r}const c=Op({url:t.responseURL,method:n,status:t.status,requestHeaders:o,responseHeaders:a,responseCookies:i,error:s,type:"xhr"});zr(c)}}function XI(e){if(e){const t=e["Content-Length"]||e["content-length"];if(t)return parseInt(t,10)}}function Mp(e){return e.split("; ").reduce((t,n)=>{const[r,s]=n.split("=");return r&&s&&(t[r]=s),t},{})}function QI(e){const t={};return e.forEach((n,r)=>{t[r]=n}),t}function ZI(e){const t=e.getAllResponseHeaders();return t?t.split(`\r
`).reduce((n,r)=>{const[s,o]=r.split(": ");return s&&o&&(n[s]=o),n},{}):{}}function ew(e,t){return e.some(n=>typeof n=="string"?t.includes(n):n.test(t))}function tw(e,t){return e.some(n=>typeof n=="number"?n===t:t>=n[0]&&t<=n[1])}function nw(e,t){qf()&&Za(n=>{if(x()!==e)return;const{response:r,args:s,error:o,virtualError:i}=n,[a,c]=s;r&&YI(t,a,r,c,o||i)},!1)}function rw(e,t){"XMLHttpRequest"in F&&hc(n=>{if(x()!==e)return;const{error:r,virtualError:s}=n,o=n.xhr,i=o[Tt];if(!i)return;const{method:a,request_headers:c}=i;try{KI(t,o,a,c,r||s)}catch(u){I&&_.warn("Error while extracting response event form XHR response",u)}})}function Np(e,t,n){return tw(e.failedRequestStatusCodes,t)&&ew(e.failedRequestTargets,n)&&!yf(n,x())}function Op(e){const t=x(),n=t&&e.error&&e.error instanceof Error?e.error.stack:void 0,r=n&&t?t.getOptions().stackParser(n,0,1):void 0,s=`HTTP Client Error with status code: ${e.status}`,o={message:s,exception:{values:[{type:"Error",value:s,stacktrace:r?{frames:r}:void 0}]},request:{url:e.url,method:e.method,headers:e.requestHeaders,cookies:e.requestCookies},contexts:{response:{status_code:e.status,headers:e.responseHeaders,cookies:e.responseCookies,body_size:XI(e.responseHeaders)}}};return At(o,{type:`auto.http.client.${e.type}`,handled:!1}),o}function sw(e,t){return!t&&e instanceof Request||e instanceof Request&&e.bodyUsed?e:new Request(e,t)}function Lp(){const e=x();return e?!!e.getOptions().sendDefaultPii:!1}const Ii=F,ow=7,iw="ContextLines",aw=((e={})=>{const t=e.frameContextLines!=null?e.frameContextLines:ow;return{name:iw,processEvent(n){return cw(n,t)}}}),ax=aw;function cw(e,t){var a;const n=Ii.document,r=Ii.location&&_f(Ii.location.href);if(!n||!r)return e;const s=(a=e.exception)==null?void 0:a.values;if(!(s!=null&&s.length))return e;const o=n.documentElement.innerHTML;if(!o)return e;const i=["<!DOCTYPE html>","<html>",...o.split(`
`),"</html>"];return s.forEach(c=>{const u=c.stacktrace;u!=null&&u.frames&&(u.frames=u.frames.map(d=>uw(d,i,r,t)))}),e}function uw(e,t,n,r){return e.filename!==n||!e.lineno||!t.length||dm(t,e,r),e}const lw="GraphQLClient",dw=(e=>({name:lw,setup(t){fw(t,e),pw(t,e)}}));function fw(e,t){e.on("beforeOutgoingRequestSpan",(n,r)=>{const o=q(n).data||{};if(!(o[we]==="http.client"))return;const c=o[km]||o["http.url"],u=o[wm]||o["http.method"];if(!it(c)||!it(u))return;const{endpoints:d}=t,l=at(c,d),f=Dp(r);if(l&&f){const p=Fp(f);if(p){const h=Pp(p);n.updateName(`${u} ${c} (${h})`),Go(p)&&n.setAttribute("graphql.document",p.query),Vo(p)&&(n.setAttribute("graphql.persisted_query.hash.sha256",p.extensions.persistedQuery.sha256Hash),n.setAttribute("graphql.persisted_query.version",p.extensions.persistedQuery.version))}}})}function pw(e,t){e.on("beforeOutgoingRequestBreadcrumb",(n,r)=>{const{category:s,type:o,data:i}=n;if(o==="http"&&(s==="fetch"||s==="xhr")){const d=i==null?void 0:i.url,{endpoints:l}=t,f=at(d,l),p=Dp(r);if(f&&i&&p){const h=Fp(p);if(!i.graphql&&h){const m=Pp(h);i["graphql.operation"]=m,Go(h)&&(i["graphql.document"]=h.query),Vo(h)&&(i["graphql.persisted_query.hash.sha256"]=h.extensions.persistedQuery.sha256Hash,i["graphql.persisted_query.version"]=h.extensions.persistedQuery.version)}}}})}function Pp(e){if(Vo(e))return`persisted ${e.operationName}`;if(Go(e)){const{query:t,operationName:n}=e,{operationName:r=n,operationType:s}=hw(t);return r?`${s} ${r}`:`${s}`}return"unknown"}function Dp(e){const t="xhr"in e;let n;if(t){const r=e.xhr[Tt];n=r&&lo(r.body)[0]}else{const r=mc(e.input);n=lo(r)[0]}return n}function hw(e){const t=/^(?:\s*)(query|mutation|subscription)(?:\s*)(\w+)(?:\s*)[{(]/,n=/^(?:\s*)(query|mutation|subscription)(?:\s*)[{(]/,r=e.match(t);if(r)return{operationType:r[1],operationName:r[2]};const s=e.match(n);return s?{operationType:s[1],operationName:void 0}:{operationType:void 0,operationName:void 0}}function Us(e){return typeof e=="object"&&e!==null}function Go(e){return Us(e)&&typeof e.query=="string"}function Vo(e){return Us(e)&&typeof e.operationName=="string"&&Us(e.extensions)&&Us(e.extensions.persistedQuery)&&typeof e.extensions.persistedQuery.sha256Hash=="string"&&typeof e.extensions.persistedQuery.version=="number"}function Fp(e){try{const t=JSON.parse(e);return Go(t)||Vo(t)?t:void 0}catch{return}}const cx=dw,de=F,gc="sentryReplaySession",mw="replay_event",_c="Unable to send Replay",gw=3e5,_w=9e5,yw=5e3,Sw=5500,bw=6e4,Ew=5e3,Tw=3,_l=15e4,_s=5e3,vw=3e3,Iw=300,yc=2e7,ww=4999,kw=5e4,yl=36e5;var Cw=Object.defineProperty,Rw=(e,t,n)=>t in e?Cw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Sl=(e,t,n)=>Rw(e,typeof t!="symbol"?t+"":t,n),be=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(be||{});function Aw(e){return e.nodeType===e.ELEMENT_NODE}function wr(e){const t=e==null?void 0:e.host;return(t==null?void 0:t.shadowRoot)===e}function kr(e){return Object.prototype.toString.call(e)==="[object ShadowRoot]"}function xw(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),e}function Mw(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const n=["@import",`url(${JSON.stringify(e.href)})`];return e.layerName===""?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}function fo(e){try{const t=e.rules||e.cssRules;return t?xw(Array.from(t,$p).join("")):null}catch{return null}}function Nw(e){let t="";for(let n=0;n<e.style.length;n++){const r=e.style,s=r[n],o=r.getPropertyPriority(s);t+=`${s}:${r.getPropertyValue(s)}${o?" !important":""};`}return`${e.selectorText} { ${t} }`}function $p(e){let t;if(Lw(e))try{t=fo(e.styleSheet)||Mw(e)}catch{}else if(Pw(e)){let n=e.cssText;const r=e.selectorText.includes(":"),s=typeof e.style.all=="string"&&e.style.all;if(s&&(n=Nw(e)),r&&(n=Ow(n)),r||s)return n}return t||e.cssText}function Ow(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}function Lw(e){return"styleSheet"in e}function Pw(e){return"selectorText"in e}let Bp=class{constructor(){Sl(this,"idNodeMap",new Map),Sl(this,"nodeMetaMap",new WeakMap)}getId(t){var r;if(!t)return-1;const n=(r=this.getMeta(t))==null?void 0:r.id;return n!=null?n:-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){const n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){const r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)}replace(t,n){const r=this.getNode(t);if(r){const s=this.nodeMetaMap.get(r);s&&this.nodeMetaMap.set(n,s)}this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function Dw(){return new Bp}function Jo({maskInputOptions:e,tagName:t,type:n}){return t==="OPTION"&&(t="SELECT"),!!(e[t.toLowerCase()]||n&&e[n]||n==="password"||t==="INPUT"&&!n&&e.text)}function Nr({isMasked:e,element:t,value:n,maskInputFn:r}){let s=n||"";return e?(r&&(s=r(s,t)),"*".repeat(s.length)):s}function Qn(e){return e.toLowerCase()}function oa(e){return e.toUpperCase()}const bl="__rrweb_original__";function Fw(e){const t=e.getContext("2d");if(!t)return!0;const n=50;for(let r=0;r<e.width;r+=n)for(let s=0;s<e.height;s+=n){const o=t.getImageData,i=bl in o?o[bl]:o;if(new Uint32Array(i.call(t,r,s,Math.min(n,e.width-r),Math.min(n,e.height-s)).data.buffer).some(c=>c!==0))return!1}return!0}function Sc(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?Qn(t):null}function po(e,t,n){return t==="INPUT"&&(n==="radio"||n==="checkbox")?e.getAttribute("value")||"":e.value}function Up(e,t){var o;let n;try{n=new URL(e,t!=null?t:window.location.href)}catch{return null}const r=/\.([0-9a-z]+)(?:$)/i,s=n.pathname.match(r);return(o=s==null?void 0:s[1])!=null?o:null}const El={};function Hp(e){const t=El[e];if(t)return t;const n=window.document;let r=window[e];if(n&&typeof n.createElement=="function")try{const s=n.createElement("iframe");s.hidden=!0,n.head.appendChild(s);const o=s.contentWindow;o&&o[e]&&(r=o[e]),n.head.removeChild(s)}catch{}return El[e]=r.bind(window)}function ia(...e){return Hp("setTimeout")(...e)}function Wp(...e){return Hp("clearTimeout")(...e)}function jp(e){try{return e.contentDocument}catch{}}let $w=1;const Bw=new RegExp("[^a-z0-9-_:]"),Or=-2;function bc(){return $w++}function Uw(e){if(e instanceof HTMLFormElement)return"form";const t=Qn(e.tagName);return Bw.test(t)?"div":t}function Hw(e){let t="";return e.indexOf("//")>-1?t=e.split("/").slice(0,3).join("/"):t=e.split("/")[0],t=t.split("?")[0],t}let Nn,Tl;const Ww=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,jw=/^(?:[a-z+]+:)?\/\//i,zw=/^www\..*/i,qw=/^(data:)([^,]*),(.*)/i;function Gw(e,t){if(!e||t.size===0)return e;try{const n=e.split(";"),r=[];for(let s of n){if(s=s.trim(),!s)continue;const o=s.indexOf(":");if(o===-1){r.push(s);continue}const i=s.slice(0,o).trim();t.has(i)||r.push(s)}return r.join("; ")+(r.length>0&&e.endsWith(";")?";":"")}catch(n){return console.warn("Error filtering CSS properties:",n),e}}function ho(e,t){return(e||"").replace(Ww,(n,r,s,o,i,a)=>{const c=s||i||a,u=r||o||"";if(!c)return n;if(jw.test(c)||zw.test(c))return`url(${u}${c}${u})`;if(qw.test(c))return`url(${u}${c}${u})`;if(c[0]==="/")return`url(${u}${Hw(t)+c}${u})`;const d=t.split("/"),l=c.split("/");d.pop();for(const f of l)f!=="."&&(f===".."?d.pop():d.push(f));return`url(${u}${d.join("/")}${u})`})}const Vw=/^[^ \t\n\r\u000c]+/,Jw=/^[, \t\n\r\u000c]+/;function Yw(e,t){if(t.trim()==="")return t;let n=0;function r(o){let i;const a=o.exec(t.substring(n));return a?(i=a[0],n+=i.length,i):""}const s=[];for(;r(Jw),!(n>=t.length);){let o=r(Vw);if(o.slice(-1)===",")o=Fn(e,o.substring(0,o.length-1)),s.push(o);else{let i="";o=Fn(e,o);let a=!1;for(;;){const c=t.charAt(n);if(c===""){s.push((o+i).trim());break}else if(a)c===")"&&(a=!1);else if(c===","){n+=1,s.push((o+i).trim());break}else c==="("&&(a=!0);i+=c,n+=1}}}return s.join(", ")}const vl=new WeakMap;function Fn(e,t){return!t||t.trim()===""?t:Yo(e,t)}function Kw(e){return!!(e.tagName==="svg"||e.ownerSVGElement)}function Yo(e,t){let n=vl.get(e);if(n||(n=e.createElement("a"),vl.set(e,n)),!t)t="";else if(t.startsWith("blob:")||t.startsWith("data:"))return t;return n.setAttribute("href",t),n.href}function zp(e,t,n,r,s,o,i){if(!r)return r;if(n==="src"||n==="href"&&!(t==="use"&&r[0]==="#"))return Fn(e,r);if(n==="xlink:href"&&r[0]!=="#")return Fn(e,r);if(n==="background"&&(t==="table"||t==="td"||t==="th"))return Fn(e,r);if(n==="srcset")return Yw(e,r);if(n==="style"){let a=ho(r,Yo(e));return i&&i.size>0&&(a=Gw(a,i)),a}else if(t==="object"&&n==="data")return Fn(e,r);return typeof o=="function"?o(n,r,s):r}function qp(e,t,n){return(e==="video"||e==="audio")&&t==="autoplay"}function Xw(e,t,n,r){try{if(r&&e.matches(r))return!1;if(typeof t=="string"){if(e.classList.contains(t))return!0}else for(let s=e.classList.length;s--;){const o=e.classList[s];if(t.test(o))return!0}if(n)return e.matches(n)}catch{}return!1}function Qw(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}function ln(e,t,n=1/0,r=0){return!e||e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:ln(e.parentNode,t,n,r+1)}function $n(e,t){return n=>{const r=n;if(r===null)return!1;try{if(e){if(typeof e=="string"){if(r.matches(`.${e}`))return!0}else if(Qw(r,e))return!0}return!!(t&&r.matches(t))}catch{return!1}}}function Zn(e,t,n,r,s,o){try{const i=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(i===null)return!1;if(i.tagName==="INPUT"){const u=i.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(u))return!0}let a=-1,c=-1;if(o){if(c=ln(i,$n(r,s)),c<0)return!0;a=ln(i,$n(t,n),c>=0?c:1/0)}else{if(a=ln(i,$n(t,n)),a<0)return!1;c=ln(i,$n(r,s),a>=0?a:1/0)}return a>=0?c>=0?a<=c:!0:c>=0?!1:!!o}catch{}return!!o}function Zw(e,t,n){const r=e.contentWindow;if(!r)return;let s=!1,o;try{o=r.document.readyState}catch{return}if(o!=="complete"){const a=ia(()=>{s||(t(),s=!0)},n);e.addEventListener("load",()=>{Wp(a),s=!0,t()});return}const i="about:blank";if(r.location.href!==i||e.src===i||e.src==="")return ia(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}function ek(e,t,n){let r=!1,s;try{s=e.sheet}catch{return}if(s)return;const o=ia(()=>{r||(t(),r=!0)},n);e.addEventListener("load",()=>{Wp(o),r=!0,t()})}function tk(e,t){const{doc:n,mirror:r,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:a,maskAttributeFn:c,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:f,inlineStylesheet:p,maskInputOptions:h={},maskTextFn:m,maskInputFn:g,dataURLOptions:y={},inlineImages:S,recordCanvas:w,keepIframeSrcFn:E,newlyAddedElement:D=!1,ignoreCSSAttributes:L}=t,b=nk(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:be.Document,childNodes:[],compatMode:e.compatMode}:{type:be.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:be.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:b};case e.ELEMENT_NODE:return sk(e,{doc:n,blockClass:s,blockSelector:o,unblockSelector:i,inlineStylesheet:p,maskAttributeFn:c,maskInputOptions:h,maskInputFn:g,dataURLOptions:y,inlineImages:S,recordCanvas:w,keepIframeSrcFn:E,newlyAddedElement:D,rootId:b,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:f,ignoreCSSAttributes:L});case e.TEXT_NODE:return rk(e,{doc:n,maskAllText:a,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:f,maskTextFn:m,maskInputOptions:h,maskInputFn:g,rootId:b});case e.CDATA_SECTION_NODE:return{type:be.CDATA,textContent:"",rootId:b};case e.COMMENT_NODE:return{type:be.Comment,textContent:e.textContent||"",rootId:b};default:return!1}}function nk(e,t){if(!t.hasNode(e))return;const n=t.getId(e);return n===1?void 0:n}function rk(e,t){var y;const{maskAllText:n,maskTextClass:r,unmaskTextClass:s,maskTextSelector:o,unmaskTextSelector:i,maskTextFn:a,maskInputOptions:c,maskInputFn:u,rootId:d}=t,l=e.parentNode&&e.parentNode.tagName;let f=e.textContent;const p=l==="STYLE"?!0:void 0,h=l==="SCRIPT"?!0:void 0,m=l==="TEXTAREA"?!0:void 0;if(p&&f){try{e.nextSibling||e.previousSibling||(y=e.parentNode.sheet)!=null&&y.cssRules&&(f=fo(e.parentNode.sheet))}catch(S){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${S}`,e)}f=ho(f,Yo(t.doc))}h&&(f="SCRIPT_PLACEHOLDER");const g=Zn(e,r,o,s,i,n);if(!p&&!h&&!m&&f&&g&&(f=a?a(f,e.parentElement):f.replace(/[\S]/g,"*")),m&&f&&(c.textarea||g)&&(f=u?u(f,e.parentNode):f.replace(/[\S]/g,"*")),l==="OPTION"&&f){const S=Jo({type:null,tagName:l,maskInputOptions:c});f=Nr({isMasked:Zn(e,r,o,s,i,S),element:e,value:f,maskInputFn:u})}return{type:be.Text,textContent:f||"",isStyle:p,rootId:d}}function sk(e,t){const{doc:n,blockClass:r,blockSelector:s,unblockSelector:o,inlineStylesheet:i,maskInputOptions:a={},maskAttributeFn:c,maskInputFn:u,dataURLOptions:d={},inlineImages:l,recordCanvas:f,keepIframeSrcFn:p,newlyAddedElement:h=!1,rootId:m,maskTextClass:g,unmaskTextClass:y,maskTextSelector:S,unmaskTextSelector:w,ignoreCSSAttributes:E}=t,D=Xw(e,r,s,o),L=Uw(e);let b={};const A=e.attributes.length;for(let T=0;T<A;T++){const M=e.attributes[T];M.name&&!qp(L,M.name,M.value)&&(b[M.name]=zp(n,L,Qn(M.name),M.value,e,c,E))}if(L==="link"&&i){const T=Array.from(n.styleSheets).find(R=>R.href===e.href);let M=null;T&&(M=fo(T)),M&&(b.rel=null,b.href=null,b.crossorigin=null,b._cssText=ho(M,T.href))}if(L==="style"&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const T=fo(e.sheet);T&&(b._cssText=ho(T,Yo(n)))}if(L==="input"||L==="textarea"||L==="select"||L==="option"){const T=e,M=Sc(T),R=po(T,oa(L),M),N=T.checked;if(M!=="submit"&&M!=="button"&&R){const O=Zn(T,g,S,y,w,Jo({type:M,tagName:oa(L),maskInputOptions:a}));b.value=Nr({isMasked:O,element:T,value:R,maskInputFn:u})}N&&(b.checked=N)}if(L==="option"&&(e.selected&&!a.select?b.selected=!0:delete b.selected),L==="canvas"&&f){if(e.__context==="2d")Fw(e)||(b.rr_dataURL=e.toDataURL(d.type,d.quality));else if(!("__context"in e)){const T=e.toDataURL(d.type,d.quality),M=n.createElement("canvas");M.width=e.width,M.height=e.height;const R=M.toDataURL(d.type,d.quality);T!==R&&(b.rr_dataURL=T)}}if(L==="img"&&l){Nn||(Nn=n.createElement("canvas"),Tl=Nn.getContext("2d"));const T=e,M=T.currentSrc||T.getAttribute("src")||"<unknown-src>",R=T.crossOrigin,N=()=>{T.removeEventListener("load",N);try{Nn.width=T.naturalWidth,Nn.height=T.naturalHeight,Tl.drawImage(T,0,0),b.rr_dataURL=Nn.toDataURL(d.type,d.quality)}catch(O){if(T.crossOrigin!=="anonymous"){T.crossOrigin="anonymous",T.complete&&T.naturalWidth!==0?N():T.addEventListener("load",N);return}else console.warn(`Cannot inline img src=${M}! Error: ${O}`)}T.crossOrigin==="anonymous"&&(R?b.crossOrigin=R:T.removeAttribute("crossorigin"))};T.complete&&T.naturalWidth!==0?N():T.addEventListener("load",N)}if((L==="audio"||L==="video")&&(b.rr_mediaState=e.paused?"paused":"played",b.rr_mediaCurrentTime=e.currentTime),h||(e.scrollLeft&&(b.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(b.rr_scrollTop=e.scrollTop)),D){const{width:T,height:M}=e.getBoundingClientRect();b={class:b.class,rr_width:`${T}px`,rr_height:`${M}px`}}L==="iframe"&&!p(b.src)&&(!D&&!jp(e)&&(b.rr_src=b.src),delete b.src);let $;try{customElements.get(L)&&($=!0)}catch{}return{type:be.Element,tagName:L,attributes:b,childNodes:[],isSVG:Kw(e)||void 0,needBlock:D,rootId:m,isCustom:$}}function le(e){return e==null?"":e.toLowerCase()}function ok(e,t){if(t.comment&&e.type===be.Comment)return!0;if(e.type===be.Element){if(t.script&&(e.tagName==="script"||e.tagName==="link"&&(e.attributes.rel==="preload"||e.attributes.rel==="modulepreload")||e.tagName==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&Up(e.attributes.href)==="js"))return!0;if(t.headFavicon&&(e.tagName==="link"&&e.attributes.rel==="shortcut icon"||e.tagName==="meta"&&(le(e.attributes.name).match(/^msapplication-tile(image|color)$/)||le(e.attributes.name)==="application-name"||le(e.attributes.rel)==="icon"||le(e.attributes.rel)==="apple-touch-icon"||le(e.attributes.rel)==="shortcut icon")))return!0;if(e.tagName==="meta"){if(t.headMetaDescKeywords&&le(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(le(e.attributes.property).match(/^(og|twitter|fb):/)||le(e.attributes.name).match(/^(og|twitter):/)||le(e.attributes.name)==="pinterest"))return!0;if(t.headMetaRobots&&(le(e.attributes.name)==="robots"||le(e.attributes.name)==="googlebot"||le(e.attributes.name)==="bingbot"))return!0;if(t.headMetaHttpEquiv&&e.attributes["http-equiv"]!==void 0)return!0;if(t.headMetaAuthorship&&(le(e.attributes.name)==="author"||le(e.attributes.name)==="generator"||le(e.attributes.name)==="framework"||le(e.attributes.name)==="publisher"||le(e.attributes.name)==="progid"||le(e.attributes.property).match(/^article:/)||le(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&(le(e.attributes.name)==="google-site-verification"||le(e.attributes.name)==="yandex-verification"||le(e.attributes.name)==="csrf-token"||le(e.attributes.name)==="p:domain_verify"||le(e.attributes.name)==="verify-v1"||le(e.attributes.name)==="verification"||le(e.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function Bn(e,t){const{doc:n,mirror:r,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:f=!1,inlineStylesheet:p=!0,maskInputOptions:h={},maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:S,dataURLOptions:w={},inlineImages:E=!1,recordCanvas:D=!1,onSerialize:L,onIframeLoad:b,iframeLoadTimeout:A=5e3,onBlockedImageLoad:$,onStylesheetLoad:T,stylesheetLoadTimeout:M=5e3,keepIframeSrcFn:R=()=>!1,newlyAddedElement:N=!1,ignoreCSSAttributes:O}=t;let{preserveWhiteSpace:V=!0}=t;const K=tk(e,{doc:n,mirror:r,blockClass:s,blockSelector:o,maskAllText:a,unblockSelector:i,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,dataURLOptions:w,inlineImages:E,recordCanvas:D,keepIframeSrcFn:R,newlyAddedElement:N,ignoreCSSAttributes:O});if(!K)return console.warn(e,"not serialized"),null;let X;r.hasNode(e)?X=r.getId(e):ok(K,S)||!V&&K.type===be.Text&&!K.isStyle&&!K.textContent.replace(/^\s+|\s+$/gm,"").length?X=Or:X=bc();const v=Object.assign(K,{id:X});if(r.add(e,v),X===Or)return null;L&&L(e);let W=!f;if(v.type===be.Element){W=W&&!v.needBlock;const k=e.shadowRoot;k&&kr(k)&&(v.isShadowHost=!0)}if((v.type===be.Document||v.type===be.Element)&&W){S.headWhitespace&&v.type===be.Element&&v.tagName==="head"&&(V=!1);const k={doc:n,mirror:r,blockClass:s,blockSelector:o,maskAllText:a,unblockSelector:i,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:f,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:S,dataURLOptions:w,inlineImages:E,recordCanvas:D,preserveWhiteSpace:V,onSerialize:L,onIframeLoad:b,iframeLoadTimeout:A,onBlockedImageLoad:$,onStylesheetLoad:T,stylesheetLoadTimeout:M,keepIframeSrcFn:R,ignoreCSSAttributes:O},z=e.childNodes?Array.from(e.childNodes):[];for(const se of z){const re=Bn(se,k);re&&v.childNodes.push(re)}if(Aw(e)&&e.shadowRoot)for(const se of Array.from(e.shadowRoot.childNodes)){const re=Bn(se,k);re&&(kr(e.shadowRoot)&&(re.isShadow=!0),v.childNodes.push(re))}}if(e.parentNode&&wr(e.parentNode)&&kr(e.parentNode)&&(v.isShadow=!0),v.type===be.Element&&v.tagName==="iframe"&&!v.needBlock&&Zw(e,()=>{const k=jp(e);if(k&&b){const z=Bn(k,{doc:k,mirror:r,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:S,dataURLOptions:w,inlineImages:E,recordCanvas:D,preserveWhiteSpace:V,onSerialize:L,onIframeLoad:b,iframeLoadTimeout:A,onStylesheetLoad:T,stylesheetLoadTimeout:M,keepIframeSrcFn:R,ignoreCSSAttributes:O});z&&b(e,z)}},A),v.type===be.Element&&v.tagName==="img"&&!e.complete&&v.needBlock){const k=e,z=()=>{if(k.isConnected&&!k.complete&&$)try{const se=k.getBoundingClientRect();se.width>0&&se.height>0&&$(k,v,se)}catch{}k.removeEventListener("load",z)};k.isConnected&&k.addEventListener("load",z)}return v.type===be.Element&&v.tagName==="link"&&typeof v.attributes.rel=="string"&&(v.attributes.rel==="stylesheet"||v.attributes.rel==="preload"&&typeof v.attributes.href=="string"&&Up(v.attributes.href)==="css")&&ek(e,()=>{if(T){const k=Bn(e,{doc:n,mirror:r,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:p,maskInputOptions:h,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:S,dataURLOptions:w,inlineImages:E,recordCanvas:D,preserveWhiteSpace:V,onSerialize:L,onIframeLoad:b,iframeLoadTimeout:A,onStylesheetLoad:T,stylesheetLoadTimeout:M,keepIframeSrcFn:R,ignoreCSSAttributes:O});k&&T(e,k)}},M),v.type===be.Element&&delete v.needBlock,v}function ik(e,t){const{mirror:n=new Bp,blockClass:r="rr-block",blockSelector:s=null,unblockSelector:o=null,maskAllText:i=!1,maskTextClass:a="rr-mask",unmaskTextClass:c=null,maskTextSelector:u=null,unmaskTextSelector:d=null,inlineStylesheet:l=!0,inlineImages:f=!1,recordCanvas:p=!1,maskAllInputs:h=!1,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOM:S=!1,dataURLOptions:w,preserveWhiteSpace:E,onSerialize:D,onIframeLoad:L,iframeLoadTimeout:b,onBlockedImageLoad:A,onStylesheetLoad:$,stylesheetLoadTimeout:T,keepIframeSrcFn:M=()=>!1,ignoreCSSAttributes:R=new Set([])}=t||{};return Bn(e,{doc:e,mirror:n,blockClass:r,blockSelector:s,unblockSelector:o,maskAllText:i,maskTextClass:a,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:l,maskInputOptions:h===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:h===!1?{}:h,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:S===!0||S==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:S==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:S===!1?{}:S,dataURLOptions:w,inlineImages:f,recordCanvas:p,preserveWhiteSpace:E,onSerialize:D,onIframeLoad:L,iframeLoadTimeout:b,onBlockedImageLoad:A,onStylesheetLoad:$,stylesheetLoadTimeout:T,keepIframeSrcFn:M,newlyAddedElement:!1,ignoreCSSAttributes:R})}function Le(e,t,n=document){const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}const On=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let Il={map:{},getId(){return console.error(On),-1},getNode(){return console.error(On),null},removeNodeFromMap(){console.error(On)},has(){return console.error(On),!1},reset(){console.error(On)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(Il=new Proxy(Il,{get(e,t,n){return t==="map"&&console.error(On),Reflect.get(e,t,n)}}));function Lr(e,t,n={}){let r=null,s=0;return function(...o){const i=Date.now();!s&&n.leading===!1&&(s=i);const a=t-(i-s),c=this;a<=0||a>t?(r&&(pk(r),r=null),s=i,e.apply(c,o)):!r&&n.trailing!==!1&&(r=Ko(()=>{s=n.leading===!1?0:Date.now(),r=null,e.apply(c,o)},a))}}function Gp(e,t,n,r,s=window){const o=s.Object.getOwnPropertyDescriptor(e,t);return s.Object.defineProperty(e,t,r?n:{set(i){Ko(()=>{n.set.call(this,i)},0),o&&o.set&&o.set.call(this,i)}}),()=>Gp(e,t,o||{},!0)}function Ec(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],s=n(r);return typeof s=="function"&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=s,()=>{e[t]=r}}catch{return()=>{}}}let mo=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(mo=()=>new Date().getTime());function Vp(e){var n,r,s,o,i,a;const t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:e.pageXOffset!==void 0?e.pageXOffset:(t==null?void 0:t.documentElement.scrollLeft)||((r=(n=t==null?void 0:t.body)==null?void 0:n.parentElement)==null?void 0:r.scrollLeft)||((s=t==null?void 0:t.body)==null?void 0:s.scrollLeft)||0,top:t.scrollingElement?t.scrollingElement.scrollTop:e.pageYOffset!==void 0?e.pageYOffset:(t==null?void 0:t.documentElement.scrollTop)||((i=(o=t==null?void 0:t.body)==null?void 0:o.parentElement)==null?void 0:i.scrollTop)||((a=t==null?void 0:t.body)==null?void 0:a.scrollTop)||0}}function Jp(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Yp(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function Kp(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function qe(e,t,n,r,s){if(!e)return!1;const o=Kp(e);if(!o)return!1;const i=$n(t,n);if(!s){const u=r&&o.matches(r);return i(o)&&!u}const a=ln(o,i);let c=-1;return a<0?!1:(r&&(c=ln(o,$n(null,r))),a>-1&&c<0?!0:a<c)}function ak(e,t){return t.getId(e)!==-1}function wi(e,t){return t.getId(e)===Or}function Xp(e,t){if(wr(e))return!1;const n=t.getId(e);return t.has(n)?e.parentNode&&e.parentNode.nodeType===e.DOCUMENT_NODE?!1:e.parentNode?Xp(e.parentNode,t):!0:!0}function aa(e){return!!e.changedTouches}function ck(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let n=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do if(this===n)return!0;while(n=n&&n.parentNode);return!1})}function Qp(e,t){return!!(e.nodeName==="IFRAME"&&t.getMeta(e))}function Zp(e,t){return!!(e.nodeName==="LINK"&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute("rel")==="stylesheet"&&t.getMeta(e))}function ca(e){return!!(e!=null&&e.shadowRoot)}class uk{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){var n;return(n=this.styleIDMap.get(t))!=null?n:-1}has(t){return this.styleIDMap.has(t)}add(t,n){if(this.has(t))return this.getId(t);let r;return n===void 0?r=this.id++:r=n,this.styleIDMap.set(t,r),this.idStyleMap.set(r,t),r}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function eh(e){var n,r;let t=null;return((r=(n=e.getRootNode)==null?void 0:n.call(e))==null?void 0:r.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function lk(e){let t=e,n;for(;n=eh(t);)t=n;return t}function dk(e){const t=e.ownerDocument;if(!t)return!1;const n=lk(e);return t.contains(n)}function th(e){const t=e.ownerDocument;return t?t.contains(e)||dk(e):!1}const wl={};function Tc(e){const t=wl[e];if(t)return t;const n=window.document;let r=window[e];if(n&&typeof n.createElement=="function")try{const s=n.createElement("iframe");s.hidden=!0,n.head.appendChild(s);const o=s.contentWindow;o&&o[e]&&(r=o[e]),n.head.removeChild(s)}catch{}return wl[e]=r.bind(window)}function fk(...e){return Tc("requestAnimationFrame")(...e)}function Ko(...e){return Tc("setTimeout")(...e)}function pk(...e){return Tc("clearTimeout")(...e)}var J=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(J||{}),j=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(j||{}),Oe=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(Oe||{}),Et=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(Et||{}),Ln=(e=>(e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange",e[e.RateChange=4]="RateChange",e))(Ln||{});function vc(e){try{return e.contentDocument}catch{}}function hk(e){try{return e.contentWindow}catch{}}function kl(e){return"__ln"in e}class mk{constructor(){this.length=0,this.head=null,this.tail=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let n=this.head;for(let r=0;r<t;r++)n=(n==null?void 0:n.next)||null;return n}addNode(t){const n={value:t,previous:null,next:null};if(t.__ln=n,t.previousSibling&&kl(t.previousSibling)){const r=t.previousSibling.__ln.next;n.next=r,n.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=n,r&&(r.previous=n)}else if(t.nextSibling&&kl(t.nextSibling)&&t.nextSibling.__ln.previous){const r=t.nextSibling.__ln.previous;n.previous=r,n.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=n,r&&(r.next=n)}else this.head&&(this.head.previous=n),n.next=this.head,this.head=n;n.next===null&&(this.tail=n),this.length++}removeNode(t){const n=t.__ln;this.head&&(n.previous?(n.previous.next=n.next,n.next?n.next.previous=n.previous:this.tail=n.previous):(this.head=n.next,this.head?this.head.previous=null:this.tail=null),t.__ln&&delete t.__ln,this.length--)}}const Cl=(e,t)=>`${e}@${t}`;class gk{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const t=[],n=new Set,r=new mk,s=c=>{let u=c,d=Or;for(;d===Or;)u=u&&u.nextSibling,d=u&&this.mirror.getId(u);return d},o=c=>{if(!c.parentNode||!th(c))return;const u=wr(c.parentNode)?this.mirror.getId(eh(c)):this.mirror.getId(c.parentNode),d=s(c);if(u===-1||d===-1)return r.addNode(c);const l=Bn(c,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:f=>{Qp(f,this.mirror)&&!qe(f,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&this.iframeManager.addIframe(f),Zp(f,this.mirror)&&this.stylesheetManager.trackLinkElement(f),ca(c)&&this.shadowDomManager.addShadowRoot(c.shadowRoot,this.doc)},onIframeLoad:(f,p)=>{qe(f,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(this.iframeManager.attachIframe(f,p),f.contentWindow&&this.canvasManager.addWindow(f.contentWindow),this.shadowDomManager.observeAttachShadow(f))},onStylesheetLoad:(f,p)=>{this.stylesheetManager.attachLinkElement(f,p)},onBlockedImageLoad:(f,p,{width:h,height:m})=>{this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:p.id,attributes:{style:{width:`${h}px`,height:`${m}px`}}}]})},ignoreCSSAttributes:this.ignoreCSSAttributes});l&&(t.push({parentId:u,nextId:d,node:l}),n.add(l.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const c of this.movedSet)Rl(this.removes,c,this.mirror)&&!this.movedSet.has(c.parentNode)||o(c);for(const c of this.addedSet)!Al(this.droppedSet,c)&&!Rl(this.removes,c,this.mirror)||Al(this.movedSet,c)?o(c):this.droppedSet.add(c);let i=null;for(;r.length;){let c=null;if(i){const u=this.mirror.getId(i.value.parentNode),d=s(i.value);u!==-1&&d!==-1&&(c=i)}if(!c){let u=r.tail;for(;u;){const d=u;if(u=u.previous,d){const l=this.mirror.getId(d.value.parentNode);if(s(d.value)===-1)continue;if(l!==-1){c=d;break}else{const p=d.value;if(p.parentNode&&p.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const h=p.parentNode.host;if(this.mirror.getId(h)!==-1){c=d;break}}}}}}if(!c){for(;r.head;)r.removeNode(r.head.value);break}i=c.previous,r.removeNode(c.value),o(c.value)}const a={texts:this.texts.map(c=>({id:this.mirror.getId(c.node),value:c.value})).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),attributes:this.attributes.map(c=>{const{attributes:u}=c;if(typeof u.style=="string"){const d=JSON.stringify(c.styleDiff),l=JSON.stringify(c._unchangedStyles);d.length<u.style.length&&(d+l).split("var(").length===u.style.split("var(").length&&(u.style=c.styleDiff)}return{id:this.mirror.getId(c.node),attributes:u}}).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),removes:this.removes,adds:t};!a.texts.length&&!a.attributes.length&&!a.removes.length&&!a.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(a))},this.processMutation=t=>{if(!wi(t.target,this.mirror))switch(t.type){case"characterData":{const n=t.target.textContent;!qe(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&n!==t.oldValue&&this.texts.push({value:Zn(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&n?this.maskTextFn?this.maskTextFn(n,Kp(t.target)):n.replace(/[\S]/g,"*"):n,node:t.target});break}case"attributes":{const n=t.target;let r=t.attributeName,s=t.target.getAttribute(r);if(r==="value"){const i=Sc(n),a=n.tagName;s=po(n,a,i);const c=Jo({maskInputOptions:this.maskInputOptions,tagName:a,type:i}),u=Zn(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,c);s=Nr({isMasked:u,element:n,value:s,maskInputFn:this.maskInputFn})}if(qe(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||s===t.oldValue)return;let o=this.attributeMap.get(t.target);if(n.tagName==="IFRAME"&&r==="src"&&!this.keepIframeSrcFn(s))if(!vc(n))r="rr_src";else return;if(o||(o={node:t.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(o),this.attributeMap.set(t.target,o)),r==="type"&&n.tagName==="INPUT"&&(t.oldValue||"").toLowerCase()==="password"&&n.setAttribute("data-rr-is-password","true"),!qp(n.tagName,r)&&(o.attributes[r]=zp(this.doc,Qn(n.tagName),Qn(r),s,n,this.maskAttributeFn),r==="style")){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}const i=this.unattachedDoc.createElement("span");t.oldValue&&i.setAttribute("style",t.oldValue);for(const a of Array.from(n.style)){const c=n.style.getPropertyValue(a),u=n.style.getPropertyPriority(a);c!==i.style.getPropertyValue(a)||u!==i.style.getPropertyPriority(a)?u===""?o.styleDiff[a]=c:o.styleDiff[a]=[c,u]:o._unchangedStyles[a]=[c,u]}for(const a of Array.from(i.style))n.style.getPropertyValue(a)===""&&(o.styleDiff[a]=!1)}break}case"childList":{if(qe(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;t.addedNodes.forEach(n=>this.genAdds(n,t.target)),t.removedNodes.forEach(n=>{const r=this.mirror.getId(n),s=wr(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);qe(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||wi(n,this.mirror)||!ak(n,this.mirror)||(this.addedSet.has(n)?(ua(this.addedSet,n),this.droppedSet.add(n)):this.addedSet.has(t.target)&&r===-1||Xp(t.target,this.mirror)||(this.movedSet.has(n)&&this.movedMap[Cl(r,s)]?ua(this.movedSet,n):this.removes.push({parentId:s,id:r,isShadow:wr(t.target)&&kr(t.target)?!0:void 0})),this.mapRemoves.push(n))});break}}},this.genAdds=(t,n)=>{if(!this.processedNodeManager.inOtherBuffer(t,this)&&!(this.addedSet.has(t)||this.movedSet.has(t))){if(this.mirror.hasNode(t)){if(wi(t,this.mirror))return;this.movedSet.add(t);let r=null;n&&this.mirror.hasNode(n)&&(r=this.mirror.getId(n)),r&&r!==-1&&(this.movedMap[Cl(this.mirror.getId(t),r)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);qe(t,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(t.childNodes&&t.childNodes.forEach(r=>this.genAdds(r)),ca(t)&&t.shadowRoot.childNodes.forEach(r=>{this.processedNodeManager.add(r,this),this.genAdds(r,t)}))}}}init(t){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager","ignoreCSSAttributes"].forEach(n=>{this[n]=t[n]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function ua(e,t){var n;e.delete(t),(n=t.childNodes)==null||n.forEach(r=>ua(e,r))}function Rl(e,t,n){return e.length===0?!1:_k(e,t,n)}function _k(e,t,n){let r=t.parentNode;for(;r;){const s=n.getId(r);if(e.some(o=>o.id===s))return!0;r=r.parentNode}return!1}function Al(e,t){return e.size===0?!1:nh(e,t)}function nh(e,t){const{parentNode:n}=t;return n?e.has(n)?!0:nh(e,n):!1}let Cr;function yk(e){Cr=e}function Sk(){Cr=void 0}const ne=e=>Cr?(...n)=>{try{return e(...n)}catch(r){if(Cr&&Cr(r)===!0)return()=>{};throw r}}:e,Un=[];function rs(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch{}return e&&e.target}function rh(e,t){var i,a;const n=new gk;Un.push(n),n.init(e);let r=window.MutationObserver||window.__rrMutationObserver;const s=(a=(i=window==null?void 0:window.Zone)==null?void 0:i.__symbol__)==null?void 0:a.call(i,"MutationObserver");s&&window[s]&&(r=window[s]);const o=new r(ne(c=>{e.onMutation&&e.onMutation(c)===!1||n.processMutations.bind(n)(c)}));return o.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),o}function bk({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(t.mousemove===!1)return()=>{};const s=typeof t.mousemove=="number"?t.mousemove:50,o=typeof t.mousemoveCallback=="number"?t.mousemoveCallback:500;let i=[],a;const c=Lr(ne(l=>{const f=Date.now()-a;e(i.map(p=>(p.timeOffset-=f,p)),l),i=[],a=null}),o),u=ne(Lr(ne(l=>{const f=rs(l),{clientX:p,clientY:h}=aa(l)?l.changedTouches[0]:l;a||(a=mo()),i.push({x:p,y:h,id:r.getId(f),timeOffset:mo()-a}),c(typeof DragEvent<"u"&&l instanceof DragEvent?j.Drag:l instanceof MouseEvent?j.MouseMove:j.TouchMove)}),s,{trailing:!1})),d=[Le("mousemove",u,n),Le("touchmove",u,n),Le("drag",u,n)];return ne(()=>{d.forEach(l=>l())})}function Ek({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:o,sampling:i}){if(i.mouseInteraction===!1)return()=>{};const a=i.mouseInteraction===!0||i.mouseInteraction===void 0?{}:i.mouseInteraction,c=[];let u=null;const d=l=>f=>{const p=rs(f);if(qe(p,r,s,o,!0))return;let h=null,m=l;if("pointerType"in f){switch(f.pointerType){case"mouse":h=Et.Mouse;break;case"touch":h=Et.Touch;break;case"pen":h=Et.Pen;break}h===Et.Touch?Oe[l]===Oe.MouseDown?m="TouchStart":Oe[l]===Oe.MouseUp&&(m="TouchEnd"):Et.Pen}else aa(f)&&(h=Et.Touch);h!==null?(u=h,(m.startsWith("Touch")&&h===Et.Touch||m.startsWith("Mouse")&&h===Et.Mouse)&&(h=null)):Oe[l]===Oe.Click&&(h=u,u=null);const g=aa(f)?f.changedTouches[0]:f;if(!g)return;const y=n.getId(p),{clientX:S,clientY:w}=g;ne(e)({type:Oe[m],id:y,x:S,y:w,...h!==null&&{pointerType:h}})};return Object.keys(Oe).filter(l=>Number.isNaN(Number(l))&&!l.endsWith("_Departed")&&a[l]!==!1).forEach(l=>{let f=Qn(l);const p=d(l);if(window.PointerEvent)switch(Oe[l]){case Oe.MouseDown:case Oe.MouseUp:f=f.replace("mouse","pointer");break;case Oe.TouchStart:case Oe.TouchEnd:return}c.push(Le(f,p,t))}),ne(()=>{c.forEach(l=>l())})}function sh({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:o,sampling:i}){const a=ne(Lr(ne(c=>{const u=rs(c);if(!u||qe(u,r,s,o,!0))return;const d=n.getId(u);if(u===t&&t.defaultView){const l=Vp(t.defaultView);e({id:d,x:l.left,y:l.top})}else e({id:d,x:u.scrollLeft,y:u.scrollTop})}),i.scroll||100));return Le("scroll",a,t)}function Tk({viewportResizeCb:e},{win:t}){let n=-1,r=-1;const s=ne(Lr(ne(()=>{const o=Jp(),i=Yp();(n!==o||r!==i)&&(e({width:Number(i),height:Number(o)}),n=o,r=i)}),200));return Le("resize",s,t)}const vk=["INPUT","TEXTAREA","SELECT"],xl=new WeakMap;function Ik({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:o,ignoreClass:i,ignoreSelector:a,maskInputOptions:c,maskInputFn:u,sampling:d,userTriggeredOnInput:l,maskTextClass:f,unmaskTextClass:p,maskTextSelector:h,unmaskTextSelector:m}){function g(b){let A=rs(b);const $=b.isTrusted,T=A&&oa(A.tagName);if(T==="OPTION"&&(A=A.parentElement),!A||!T||vk.indexOf(T)<0||qe(A,r,s,o,!0))return;const M=A;if(M.classList.contains(i)||a&&M.matches(a))return;const R=Sc(A);let N=po(M,T,R),O=!1;const V=Jo({maskInputOptions:c,tagName:T,type:R}),K=Zn(A,f,h,p,m,V);(R==="radio"||R==="checkbox")&&(O=A.checked),N=Nr({isMasked:K,element:A,value:N,maskInputFn:u}),y(A,l?{text:N,isChecked:O,userTriggered:$}:{text:N,isChecked:O});const X=A.name;R==="radio"&&X&&O&&t.querySelectorAll(`input[type="radio"][name="${X}"]`).forEach(v=>{if(v!==A){const W=Nr({isMasked:K,element:v,value:po(v,T,R),maskInputFn:u});y(v,l?{text:W,isChecked:!O,userTriggered:!1}:{text:W,isChecked:!O})}})}function y(b,A){const $=xl.get(b);if(!$||$.text!==A.text||$.isChecked!==A.isChecked){xl.set(b,A);const T=n.getId(b);ne(e)({...A,id:T})}}const w=(d.input==="last"?["change"]:["input","change"]).map(b=>Le(b,ne(g),t)),E=t.defaultView;if(!E)return()=>{w.forEach(b=>b())};const D=E.Object.getOwnPropertyDescriptor(E.HTMLInputElement.prototype,"value"),L=[[E.HTMLInputElement.prototype,"value"],[E.HTMLInputElement.prototype,"checked"],[E.HTMLSelectElement.prototype,"value"],[E.HTMLTextAreaElement.prototype,"value"],[E.HTMLSelectElement.prototype,"selectedIndex"],[E.HTMLOptionElement.prototype,"selected"]];return D&&D.set&&w.push(...L.map(b=>Gp(b[0],b[1],{set(){ne(g)({target:this,isTrusted:!1})}},!1,E))),ne(()=>{w.forEach(b=>b())})}function go(e){const t=[];function n(r,s){if(ys("CSSGroupingRule")&&r.parentRule instanceof CSSGroupingRule||ys("CSSMediaRule")&&r.parentRule instanceof CSSMediaRule||ys("CSSSupportsRule")&&r.parentRule instanceof CSSSupportsRule||ys("CSSConditionRule")&&r.parentRule instanceof CSSConditionRule){const i=Array.from(r.parentRule.cssRules).indexOf(r);s.unshift(i)}else if(r.parentStyleSheet){const i=Array.from(r.parentStyleSheet.cssRules).indexOf(r);s.unshift(i)}return s}return n(e,t)}function Ut(e,t,n){let r,s;return e?(e.ownerNode?r=t.getId(e.ownerNode):s=n.getId(e),{styleId:s,id:r}):{}}function wk({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const s=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(s,{apply:ne((d,l,f)=>{const[p,h]=f,{id:m,styleId:g}=Ut(l,t,n.styleMirror);return(m&&m!==-1||g&&g!==-1)&&e({id:m,styleId:g,adds:[{rule:p,index:h}]}),d.apply(l,f)})});const o=r.CSSStyleSheet.prototype.deleteRule;r.CSSStyleSheet.prototype.deleteRule=new Proxy(o,{apply:ne((d,l,f)=>{const[p]=f,{id:h,styleId:m}=Ut(l,t,n.styleMirror);return(h&&h!==-1||m&&m!==-1)&&e({id:h,styleId:m,removes:[{index:p}]}),d.apply(l,f)})});let i;r.CSSStyleSheet.prototype.replace&&(i=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(i,{apply:ne((d,l,f)=>{const[p]=f,{id:h,styleId:m}=Ut(l,t,n.styleMirror);return(h&&h!==-1||m&&m!==-1)&&e({id:h,styleId:m,replace:p}),d.apply(l,f)})}));let a;r.CSSStyleSheet.prototype.replaceSync&&(a=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:ne((d,l,f)=>{const[p]=f,{id:h,styleId:m}=Ut(l,t,n.styleMirror);return(h&&h!==-1||m&&m!==-1)&&e({id:h,styleId:m,replaceSync:p}),d.apply(l,f)})}));const c={};Ss("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(Ss("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),Ss("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),Ss("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));const u={};return Object.entries(c).forEach(([d,l])=>{u[d]={insertRule:l.prototype.insertRule,deleteRule:l.prototype.deleteRule},l.prototype.insertRule=new Proxy(u[d].insertRule,{apply:ne((f,p,h)=>{const[m,g]=h,{id:y,styleId:S}=Ut(p.parentStyleSheet,t,n.styleMirror);return(y&&y!==-1||S&&S!==-1)&&e({id:y,styleId:S,adds:[{rule:m,index:[...go(p),g||0]}]}),f.apply(p,h)})}),l.prototype.deleteRule=new Proxy(u[d].deleteRule,{apply:ne((f,p,h)=>{const[m]=h,{id:g,styleId:y}=Ut(p.parentStyleSheet,t,n.styleMirror);return(g&&g!==-1||y&&y!==-1)&&e({id:g,styleId:y,removes:[{index:[...go(p),m]}]}),f.apply(p,h)})})}),ne(()=>{r.CSSStyleSheet.prototype.insertRule=s,r.CSSStyleSheet.prototype.deleteRule=o,i&&(r.CSSStyleSheet.prototype.replace=i),a&&(r.CSSStyleSheet.prototype.replaceSync=a),Object.entries(c).forEach(([d,l])=>{l.prototype.insertRule=u[d].insertRule,l.prototype.deleteRule=u[d].deleteRule})})}function oh({mirror:e,stylesheetManager:t},n){var i,a,c;let r=null;n.nodeName==="#document"?r=e.getId(n):r=e.getId(n.host);const s=n.nodeName==="#document"?(i=n.defaultView)==null?void 0:i.Document:(c=(a=n.ownerDocument)==null?void 0:a.defaultView)==null?void 0:c.ShadowRoot,o=s!=null&&s.prototype?Object.getOwnPropertyDescriptor(s==null?void 0:s.prototype,"adoptedStyleSheets"):void 0;return r===null||r===-1||!s||!o?()=>{}:(Object.defineProperty(n,"adoptedStyleSheets",{configurable:o.configurable,enumerable:o.enumerable,get(){var u;return(u=o.get)==null?void 0:u.call(this)},set(u){var l;const d=(l=o.set)==null?void 0:l.call(this,u);if(r!==null&&r!==-1)try{t.adoptStyleSheets(u,r)}catch{}return d}}),ne(()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:o.configurable,enumerable:o.enumerable,get:o.get,set:o.set})}))}function kk({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:s}){const o=s.CSSStyleDeclaration.prototype.setProperty;s.CSSStyleDeclaration.prototype.setProperty=new Proxy(o,{apply:ne((a,c,u)=>{var m;const[d,l,f]=u;if(n.has(d))return o.apply(c,[d,l,f]);const{id:p,styleId:h}=Ut((m=c.parentRule)==null?void 0:m.parentStyleSheet,t,r.styleMirror);return(p&&p!==-1||h&&h!==-1)&&e({id:p,styleId:h,set:{property:d,value:l,priority:f},index:go(c.parentRule)}),a.apply(c,u)})});const i=s.CSSStyleDeclaration.prototype.removeProperty;return s.CSSStyleDeclaration.prototype.removeProperty=new Proxy(i,{apply:ne((a,c,u)=>{var p;const[d]=u;if(n.has(d))return i.apply(c,[d]);const{id:l,styleId:f}=Ut((p=c.parentRule)==null?void 0:p.parentStyleSheet,t,r.styleMirror);return(l&&l!==-1||f&&f!==-1)&&e({id:l,styleId:f,remove:{property:d},index:go(c.parentRule)}),a.apply(c,u)})}),ne(()=>{s.CSSStyleDeclaration.prototype.setProperty=o,s.CSSStyleDeclaration.prototype.removeProperty=i})}function Ck({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:r,mirror:s,sampling:o,doc:i}){const a=ne(u=>Lr(ne(d=>{const l=rs(d);if(!l||qe(l,t,n,r,!0))return;const{currentTime:f,volume:p,muted:h,playbackRate:m}=l;e({type:u,id:s.getId(l),currentTime:f,volume:p,muted:h,playbackRate:m})}),o.media||500)),c=[Le("play",a(Ln.Play),i),Le("pause",a(Ln.Pause),i),Le("seeked",a(Ln.Seeked),i),Le("volumechange",a(Ln.VolumeChange),i),Le("ratechange",a(Ln.RateChange),i)];return ne(()=>{c.forEach(u=>u())})}function Rk({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const r=[],s=new WeakMap,o=n.FontFace;n.FontFace=function(c,u,d){const l=new o(c,u,d);return s.set(l,{family:c,buffer:typeof u!="string",descriptors:d,fontSource:typeof u=="string"?u:JSON.stringify(Array.from(new Uint8Array(u)))}),l};const i=Ec(t.fonts,"add",function(a){return function(c){return Ko(ne(()=>{const u=s.get(c);u&&(e(u),s.delete(c))}),0),a.apply(this,[c])}});return r.push(()=>{n.FontFace=o}),r.push(i),ne(()=>{r.forEach(a=>a())})}function Ak(e){const{doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:o,selectionCb:i}=e;let a=!0;const c=ne(()=>{const u=t.getSelection();if(!u||a&&(u!=null&&u.isCollapsed))return;a=u.isCollapsed||!1;const d=[],l=u.rangeCount||0;for(let f=0;f<l;f++){const p=u.getRangeAt(f),{startContainer:h,startOffset:m,endContainer:g,endOffset:y}=p;qe(h,r,s,o,!0)||qe(g,r,s,o,!0)||d.push({start:n.getId(h),startOffset:m,end:n.getId(g),endOffset:y})}i({ranges:d})});return c(),Le("selectionchange",c)}function xk({doc:e,customElementCb:t}){const n=e.defaultView;return!n||!n.customElements?()=>{}:Ec(n.customElements,"define",function(s){return function(o,i,a){try{t({define:{name:o}})}catch{}return s.apply(this,[o,i,a])}})}function Mk(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};let r;e.recordDOM&&(r=rh(e,e.doc));const s=bk(e),o=Ek(e),i=sh(e),a=Tk(e,{win:n}),c=Ik(e),u=Ck(e);let d=()=>{},l=()=>{},f=()=>{},p=()=>{};e.recordDOM&&(d=wk(e,{win:n}),l=oh(e,e.doc),f=kk(e,{win:n}),e.collectFonts&&(p=Rk(e)));const h=Ak(e),m=xk(e),g=[];for(const y of e.plugins)g.push(y.observer(y.callback,n,y.options));return ne(()=>{Un.forEach(y=>y.reset()),r==null||r.disconnect(),s(),o(),i(),a(),c(),u(),d(),l(),f(),p(),h(),m(),g.forEach(y=>y())})}function ys(e){return typeof window[e]<"u"}function Ss(e){return!!(typeof window[e]<"u"&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class la{constructor(t){this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(t,n,r,s){const o=r||this.getIdToRemoteIdMap(t),i=s||this.getRemoteIdToIdMap(t);let a=o.get(n);return a||(a=this.generateIdFn(),o.set(n,a),i.set(a,n)),a}getIds(t,n){const r=this.getIdToRemoteIdMap(t),s=this.getRemoteIdToIdMap(t);return n.map(o=>this.getId(t,o,r,s))}getRemoteId(t,n,r){const s=r||this.getRemoteIdToIdMap(t);if(typeof n!="number")return n;const o=s.get(n);return o||-1}getRemoteIds(t,n){const r=this.getRemoteIdToIdMap(t);return n.map(s=>this.getRemoteId(t,s,r))}reset(t){if(!t){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){let n=this.iframeIdToRemoteIdMap.get(t);return n||(n=new Map,this.iframeIdToRemoteIdMap.set(t,n)),n}getRemoteIdToIdMap(t){let n=this.iframeRemoteIdToIdMap.get(t);return n||(n=new Map,this.iframeRemoteIdToIdMap.set(t,n)),n}}class Nk{constructor(){this.crossOriginIframeMirror=new la(bc),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class Ok{constructor(t){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new la(bc),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new la(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,n){var s,o;this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:n}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&((s=t.contentWindow)==null||s.addEventListener("message",this.handleMessage.bind(this))),(o=this.loadListener)==null||o.call(this,t);const r=vc(t);r&&r.adoptedStyleSheets&&r.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(r.adoptedStyleSheets,this.mirror.getId(r))}handleMessage(t){const n=t;if(n.data.type!=="rrweb"||n.origin!==n.data.origin||!t.source)return;const s=this.crossOriginIframeMap.get(t.source);if(!s)return;const o=this.transformCrossOriginEvent(s,n.data.event);o&&this.wrappedEmit(o,n.data.isCheckout)}transformCrossOriginEvent(t,n){var r;switch(n.type){case J.FullSnapshot:{this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(n.data.node,t);const s=n.data.node.id;return this.crossOriginIframeRootIdMap.set(t,s),this.patchRootIdOnNode(n.data.node,s),{timestamp:n.timestamp,type:J.IncrementalSnapshot,data:{source:j.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:n.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case J.Meta:case J.Load:case J.DomContentLoaded:return!1;case J.Plugin:return n;case J.Custom:return this.replaceIds(n.data.payload,t,["id","parentId","previousId","nextId"]),n;case J.IncrementalSnapshot:switch(n.data.source){case j.Mutation:return n.data.adds.forEach(s=>{this.replaceIds(s,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(s.node,t);const o=this.crossOriginIframeRootIdMap.get(t);o&&this.patchRootIdOnNode(s.node,o)}),n.data.removes.forEach(s=>{this.replaceIds(s,t,["parentId","id"])}),n.data.attributes.forEach(s=>{this.replaceIds(s,t,["id"])}),n.data.texts.forEach(s=>{this.replaceIds(s,t,["id"])}),n;case j.Drag:case j.TouchMove:case j.MouseMove:return n.data.positions.forEach(s=>{this.replaceIds(s,t,["id"])}),n;case j.ViewportResize:return!1;case j.MediaInteraction:case j.MouseInteraction:case j.Scroll:case j.CanvasMutation:case j.Input:return this.replaceIds(n.data,t,["id"]),n;case j.StyleSheetRule:case j.StyleDeclaration:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleId"]),n;case j.Font:return n;case j.Selection:return n.data.ranges.forEach(s=>{this.replaceIds(s,t,["start","end"])}),n;case j.AdoptedStyleSheet:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleIds"]),(r=n.data.styles)==null||r.forEach(s=>{this.replaceStyleIds(s,t,["styleId"])}),n}}return!1}replace(t,n,r,s){for(const o of s)!Array.isArray(n[o])&&typeof n[o]!="number"||(Array.isArray(n[o])?n[o]=t.getIds(r,n[o]):n[o]=t.getId(r,n[o]));return n}replaceIds(t,n,r){return this.replace(this.crossOriginIframeMirror,t,n,r)}replaceStyleIds(t,n,r){return this.replace(this.crossOriginIframeStyleMirror,t,n,r)}replaceIdOnNode(t,n){this.replaceIds(t,n,["id","rootId"]),"childNodes"in t&&t.childNodes.forEach(r=>{this.replaceIdOnNode(r,n)})}patchRootIdOnNode(t,n){t.type!==be.Document&&!t.rootId&&(t.rootId=n),"childNodes"in t&&t.childNodes.forEach(r=>{this.patchRootIdOnNode(r,n)})}}class Lk{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class Pk{constructor(t){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(t,n){if(!kr(t)||this.shadowDoms.has(t))return;this.shadowDoms.add(t),this.bypassOptions.canvasManager.addShadowRoot(t);const r=rh({...this.bypassOptions,doc:n,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},t);this.restoreHandlers.push(()=>r.disconnect()),this.restoreHandlers.push(sh({...this.bypassOptions,scrollCb:this.scrollCb,doc:t,mirror:this.mirror})),Ko(()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(t.host)),this.restoreHandlers.push(oh({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t))},0)}observeAttachShadow(t){const n=vc(t),r=hk(t);!n||!r||this.patchAttachShadow(r.Element,n)}patchAttachShadow(t,n){const r=this;this.restoreHandlers.push(Ec(t.prototype,"attachShadow",function(s){return function(o){const i=s.call(this,o);return this.shadowRoot&&th(this)&&r.addShadowRoot(this.shadowRoot,n),i}}))}reset(){this.restoreHandlers.forEach(t=>{try{t()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet,this.bypassOptions.canvasManager.resetShadowRoots()}}var Ml="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Dk=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var bs=0;bs<Ml.length;bs++)Dk[Ml.charCodeAt(bs)]=bs;class Nl{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}addWindow(){}addShadowRoot(){}resetShadowRoots(){}}class Fk{constructor(t){this.trackedLinkElements=new WeakSet,this.styleMirror=new uk,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,n){"_cssText"in n.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:n.id,attributes:n.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,n){if(t.length===0)return;const r={id:n,styleIds:[]},s=[];for(const o of t){let i;this.styleMirror.has(o)?i=this.styleMirror.getId(o):(i=this.styleMirror.add(o),s.push({styleId:i,rules:Array.from(o.rules||CSSRule,(a,c)=>({rule:$p(a),index:c}))})),r.styleIds.push(i)}s.length>0&&(r.styles=s),this.adoptedStyleSheetCb(r)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}}class $k{constructor(){this.nodeMap=new WeakMap,this.active=!1}inOtherBuffer(t,n){const r=this.nodeMap.get(t);return r&&Array.from(r).some(s=>s!==n)}add(t,n){this.active||(this.active=!0,fk(()=>{this.nodeMap=new WeakMap,this.active=!1})),this.nodeMap.set(t,(this.nodeMap.get(t)||new Set).add(n))}destroy(){}}let ge,_o;var ud;try{if(Array.from([1],e=>e*2)[0]!==2){const e=document.createElement("iframe");document.body.appendChild(e),Array.from=((ud=e.contentWindow)==null?void 0:ud.Array.from)||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}const rt=Dw();function kt(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:s="rr-block",blockSelector:o=null,unblockSelector:i=null,ignoreClass:a="rr-ignore",ignoreSelector:c=null,maskAllText:u=!1,maskTextClass:d="rr-mask",unmaskTextClass:l=null,maskTextSelector:f=null,unmaskTextSelector:p=null,inlineStylesheet:h=!0,maskAllInputs:m,maskInputOptions:g,slimDOMOptions:y,maskAttributeFn:S,maskInputFn:w,maskTextFn:E,maxCanvasSize:D=null,packFn:L,sampling:b={},dataURLOptions:A={},mousemoveWait:$,recordDOM:T=!0,recordCanvas:M=!1,recordCrossOriginIframes:R=!1,recordAfter:N=e.recordAfter==="DOMContentLoaded"?e.recordAfter:"load",userTriggeredOnInput:O=!1,collectFonts:V=!1,inlineImages:K=!1,plugins:X,keepIframeSrcFn:v=()=>!1,ignoreCSSAttributes:W=new Set([]),errorHandler:k,onMutation:z,getCanvasManager:se}=e;yk(k);const re=R?window.parent===window:!0;let Se=!1;if(!re)try{window.parent.document&&(Se=!1)}catch{Se=!0}if(re&&!t)throw new Error("emit function is required");if(!re&&!Se)return()=>{};$!==void 0&&b.mousemove===void 0&&(b.mousemove=$),rt.reset();const Me=m===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:g!==void 0?g:{},Dt=y===!0||y==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:y==="all",headMetaDescKeywords:y==="all"}:y||{};ck();let Ne,De=0;const dt=Q=>{for(const Ae of X||[])Ae.eventProcessor&&(Q=Ae.eventProcessor(Q));return L&&!Se&&(Q=L(Q)),Q};ge=(Q,Ae)=>{var $e;const Z=Q;if(Z.timestamp=mo(),($e=Un[0])!=null&&$e.isFrozen()&&Z.type!==J.FullSnapshot&&!(Z.type===J.IncrementalSnapshot&&Z.data.source===j.Mutation)&&Un.forEach(Je=>Je.unfreeze()),re)t==null||t(dt(Z),Ae);else if(Se){const Je={type:"rrweb",event:dt(Z),origin:window.location.origin,isCheckout:Ae};window.parent.postMessage(Je,"*")}if(Z.type===J.FullSnapshot)Ne=Z,De=0;else if(Z.type===J.IncrementalSnapshot){if(Z.data.source===j.Mutation&&Z.data.isAttachIframe)return;De++;const Je=r&&De>=r,ie=n&&Ne&&Z.timestamp-Ne.timestamp>n;(Je||ie)&&Re(!0)}};const Ft=Q=>{ge({type:J.IncrementalSnapshot,data:{source:j.Mutation,...Q}})},pr=Q=>ge({type:J.IncrementalSnapshot,data:{source:j.Scroll,...Q}}),os=Q=>ge({type:J.IncrementalSnapshot,data:{source:j.CanvasMutation,...Q}}),hr=Q=>ge({type:J.IncrementalSnapshot,data:{source:j.AdoptedStyleSheet,...Q}}),te=new Fk({mutationCb:Ft,adoptedStyleSheetCb:hr}),fe=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new Nk:new Ok({mirror:rt,mutationCb:Ft,stylesheetManager:te,recordCrossOriginIframes:R,wrappedEmit:ge});for(const Q of X||[])Q.getMirror&&Q.getMirror({nodeMirror:rt,crossOriginIframeMirror:fe.crossOriginIframeMirror,crossOriginIframeStyleMirror:fe.crossOriginIframeStyleMirror});const Fe=new $k,ke=Uk(se,{mirror:rt,win:window,mutationCb:Q=>ge({type:J.IncrementalSnapshot,data:{source:j.CanvasMutation,...Q}}),recordCanvas:M,blockClass:s,blockSelector:o,unblockSelector:i,maxCanvasSize:D,sampling:b.canvas,dataURLOptions:A,errorHandler:k}),pe=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new Lk:new Pk({mutationCb:Ft,scrollCb:pr,bypassOptions:{onMutation:z,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:f,unmaskTextSelector:p,inlineStylesheet:h,maskInputOptions:Me,dataURLOptions:A,maskAttributeFn:S,maskTextFn:E,maskInputFn:w,recordCanvas:M,inlineImages:K,sampling:b,slimDOMOptions:Dt,iframeManager:fe,stylesheetManager:te,canvasManager:ke,keepIframeSrcFn:v,processedNodeManager:Fe,ignoreCSSAttributes:W},mirror:rt}),Re=(Q=!1)=>{if(!T)return;ge({type:J.Meta,data:{href:window.location.href,width:Yp(),height:Jp()}},Q),te.reset(),pe.init(),Un.forEach(Z=>Z.lock());const Ae=ik(document,{mirror:rt,blockClass:s,blockSelector:o,unblockSelector:i,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:f,unmaskTextSelector:p,inlineStylesheet:h,maskAllInputs:Me,maskAttributeFn:S,maskInputFn:w,maskTextFn:E,slimDOM:Dt,dataURLOptions:A,recordCanvas:M,inlineImages:K,onSerialize:Z=>{Qp(Z,rt)&&fe.addIframe(Z),Zp(Z,rt)&&te.trackLinkElement(Z),ca(Z)&&pe.addShadowRoot(Z.shadowRoot,document)},onIframeLoad:(Z,$e)=>{fe.attachIframe(Z,$e),Z.contentWindow&&ke.addWindow(Z.contentWindow),pe.observeAttachShadow(Z)},onStylesheetLoad:(Z,$e)=>{te.attachLinkElement(Z,$e)},onBlockedImageLoad:(Z,$e,{width:Je,height:ie})=>{Ft({adds:[],removes:[],texts:[],attributes:[{id:$e.id,attributes:{style:{width:`${Je}px`,height:`${ie}px`}}}]})},keepIframeSrcFn:v,ignoreCSSAttributes:W});if(!Ae)return console.warn("Failed to snapshot the document");ge({type:J.FullSnapshot,data:{node:Ae,initialOffset:Vp(window)}}),Un.forEach(Z=>Z.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&te.adoptStyleSheets(document.adoptedStyleSheets,rt.getId(document))};_o=Re;try{const Q=[],Ae=$e=>{var Je;return ne(Mk)({onMutation:z,mutationCb:Ft,mousemoveCb:(ie,ti)=>ge({type:J.IncrementalSnapshot,data:{source:ti,positions:ie}}),mouseInteractionCb:ie=>ge({type:J.IncrementalSnapshot,data:{source:j.MouseInteraction,...ie}}),scrollCb:pr,viewportResizeCb:ie=>ge({type:J.IncrementalSnapshot,data:{source:j.ViewportResize,...ie}}),inputCb:ie=>ge({type:J.IncrementalSnapshot,data:{source:j.Input,...ie}}),mediaInteractionCb:ie=>ge({type:J.IncrementalSnapshot,data:{source:j.MediaInteraction,...ie}}),styleSheetRuleCb:ie=>ge({type:J.IncrementalSnapshot,data:{source:j.StyleSheetRule,...ie}}),styleDeclarationCb:ie=>ge({type:J.IncrementalSnapshot,data:{source:j.StyleDeclaration,...ie}}),canvasMutationCb:os,fontCb:ie=>ge({type:J.IncrementalSnapshot,data:{source:j.Font,...ie}}),selectionCb:ie=>{ge({type:J.IncrementalSnapshot,data:{source:j.Selection,...ie}})},customElementCb:ie=>{ge({type:J.IncrementalSnapshot,data:{source:j.CustomElement,...ie}})},blockClass:s,ignoreClass:a,ignoreSelector:c,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:f,unmaskTextSelector:p,maskInputOptions:Me,inlineStylesheet:h,sampling:b,recordDOM:T,recordCanvas:M,inlineImages:K,userTriggeredOnInput:O,collectFonts:V,doc:$e,maskAttributeFn:S,maskInputFn:w,maskTextFn:E,keepIframeSrcFn:v,blockSelector:o,unblockSelector:i,slimDOMOptions:Dt,dataURLOptions:A,mirror:rt,iframeManager:fe,stylesheetManager:te,shadowDomManager:pe,processedNodeManager:Fe,canvasManager:ke,ignoreCSSAttributes:W,plugins:((Je=X==null?void 0:X.filter(ie=>ie.observer))==null?void 0:Je.map(ie=>({observer:ie.observer,options:ie.options,callback:ti=>ge({type:J.Plugin,data:{plugin:ie.name,payload:ti}})})))||[]},{})};fe.addLoadListener($e=>{try{Q.push(Ae($e.contentDocument))}catch(Je){console.warn(Je)}});const Z=()=>{Re(),Q.push(Ae(document))};return document.readyState==="interactive"||document.readyState==="complete"?Z():(Q.push(Le("DOMContentLoaded",()=>{ge({type:J.DomContentLoaded,data:{}}),N==="DOMContentLoaded"&&Z()})),Q.push(Le("load",()=>{ge({type:J.Load,data:{}}),N==="load"&&Z()},window))),()=>{Q.forEach($e=>$e()),Fe.destroy(),_o=void 0,Sk()}}catch(Q){console.warn(Q)}}function Bk(e){if(!_o)throw new Error("please take full snapshot after start recording");_o(e)}kt.mirror=rt;kt.takeFullSnapshot=Bk;function Uk(e,t){try{return e?e(t):new Nl}catch{return console.warn("Unable to initialize CanvasManager"),new Nl}}var Ol;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(Ol||(Ol={}));const Hk=3,Wk=5;function Ic(e){return e>9999999999?e:e*1e3}function ki(e){return e>9999999999?e/1e3:e}function ss(e,t){t.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate(()=>(e.throttledAddEvent({type:J.Custom,timestamp:(t.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:ze(t,10,1e3)}}),t.category==="console")))}const jk="button,a";function ih(e){return e.closest(jk)||e}function ah(e){const t=ch(e);return!t||!(t instanceof Element)?t:ih(t)}function ch(e){return zk(e)?e.target:e}function zk(e){return typeof e=="object"&&!!e&&"target"in e}let Ht;function qk(e){return Ht||(Ht=[],Gk()),Ht.push(e),()=>{const t=Ht?Ht.indexOf(e):-1;t>-1&&Ht.splice(t,1)}}function Gk(){Ce(de,"open",function(e){return function(...t){if(Ht)try{Ht.forEach(n=>n())}catch{}return e.apply(de,t)}})}const Vk=new Set([j.Mutation,j.StyleSheetRule,j.StyleDeclaration,j.AdoptedStyleSheet,j.CanvasMutation,j.Selection,j.MediaInteraction]);function Jk(e,t,n){e.handleClick(t,n)}class Yk{constructor(t,n,r=ss){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=n.timeout/1e3,this._threshold=n.threshold/1e3,this._scrollTimeout=n.scrollTimeout/1e3,this._replay=t,this._ignoreSelector=n.ignoreSelector,this._addBreadcrumbEvent=r}addListeners(){const t=qk(()=>{this._lastMutation=Ll()});this._teardown=()=>{t(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(t,n){if(Xk(n,this._ignoreSelector)||!Qk(t))return;const r={timestamp:ki(t.timestamp),clickBreadcrumb:t,clickCount:0,node:n};this._clicks.some(s=>s.node===r.node&&Math.abs(s.timestamp-r.timestamp)<1)||(this._clicks.push(r),this._clicks.length===1&&this._scheduleCheckClicks())}registerMutation(t=Date.now()){this._lastMutation=ki(t)}registerScroll(t=Date.now()){this._lastScroll=ki(t)}registerClick(t){const n=ih(t);this._handleMultiClick(n)}_handleMultiClick(t){this._getClicks(t).forEach(n=>{n.clickCount++})}_getClicks(t){return this._clicks.filter(n=>n.node===t)}_checkClicks(){const t=[],n=Ll();this._clicks.forEach(r=>{!r.mutationAfter&&this._lastMutation&&(r.mutationAfter=r.timestamp<=this._lastMutation?this._lastMutation-r.timestamp:void 0),!r.scrollAfter&&this._lastScroll&&(r.scrollAfter=r.timestamp<=this._lastScroll?this._lastScroll-r.timestamp:void 0),r.timestamp+this._timeout<=n&&t.push(r)});for(const r of t){const s=this._clicks.indexOf(r);s>-1&&(this._generateBreadcrumbs(r),this._clicks.splice(s,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(t){const n=this._replay,r=t.scrollAfter&&t.scrollAfter<=this._scrollTimeout,s=t.mutationAfter&&t.mutationAfter<=this._threshold,o=!r&&!s,{clickCount:i,clickBreadcrumb:a}=t;if(o){const c=Math.min(t.mutationAfter||this._timeout,this._timeout)*1e3,u=c<this._timeout*1e3?"mutation":"timeout",d={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.slowClickDetected",data:{...a.data,url:de.location.href,route:n.getCurrentRoute(),timeAfterClickMs:c,endReason:u,clickCount:i||1}};this._addBreadcrumbEvent(n,d);return}if(i>1){const c={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.multiClick",data:{...a.data,url:de.location.href,route:n.getCurrentRoute(),clickCount:i,metric:!0}};this._addBreadcrumbEvent(n,c)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=ns(()=>this._checkClicks(),1e3)}}const Kk=["A","BUTTON","INPUT"];function Xk(e,t){return!!(!Kk.includes(e.tagName)||e.tagName==="INPUT"&&!["submit","button"].includes(e.getAttribute("type")||"")||e.tagName==="A"&&(e.hasAttribute("download")||e.hasAttribute("target")&&e.getAttribute("target")!=="_self")||t&&e.matches(t))}function Qk(e){return!!(e.data&&typeof e.data.nodeId=="number"&&e.timestamp)}function Ll(){return Date.now()/1e3}function Zk(e,t){try{if(!eC(t))return;const{source:n}=t.data;if(Vk.has(n)&&e.registerMutation(t.timestamp),n===j.Scroll&&e.registerScroll(t.timestamp),tC(t)){const{type:r,id:s}=t.data,o=kt.mirror.getNode(s);o instanceof HTMLElement&&r===Oe.Click&&e.registerClick(o)}}catch{}}function eC(e){return e.type===Hk}function tC(e){return e.data.source===j.MouseInteraction}function pt(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var wc=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(wc||{});const nC=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function rC(e){const t={};!e["data-sentry-component"]&&e["data-sentry-element"]&&(e["data-sentry-component"]=e["data-sentry-element"]);for(const n in e)if(nC.has(n)){let r=n;(n==="data-testid"||n==="data-test-id")&&(r="testId"),t[r]=e[n]}return t}const sC=e=>t=>{if(!e.isEnabled())return;const n=oC(t);if(!n)return;const r=t.name==="click",s=r?t.event:void 0;r&&e.clickDetector&&(s!=null&&s.target)&&!s.altKey&&!s.metaKey&&!s.ctrlKey&&!s.shiftKey&&Jk(e.clickDetector,n,ah(t.event)),ss(e,n)};function uh(e,t){const n=kt.mirror.getId(e),r=n&&kt.mirror.getNode(n),s=r&&kt.mirror.getMeta(r),o=s&&aC(s)?s:null;return{message:t,data:o?{nodeId:n,node:{id:n,tagName:o.tagName,textContent:Array.from(o.childNodes).map(i=>i.type===wc.Text&&i.textContent).filter(Boolean).map(i=>i.trim()).join(""),attributes:rC(o.attributes)}}:{}}}function oC(e){const{target:t,message:n}=iC(e);return pt({category:`ui.${e.name}`,...uh(t,n)})}function iC(e){const t=e.name==="click";let n,r=null;try{r=t?ah(e.event):ch(e.event),n=We(r,{maxStringLength:200})||"<unknown>"}catch{n="<unknown>"}return{target:r,message:n}}function aC(e){return e.type===wc.Element}function cC(e,t){if(!e.isEnabled())return;e.updateUserActivity();const n=uC(t);n&&ss(e,n)}function uC(e){const{metaKey:t,shiftKey:n,ctrlKey:r,altKey:s,key:o,target:i}=e;if(!i||lC(i)||!o)return null;const a=t||r||s,c=o.length===1;if(!a&&c)return null;const u=We(i,{maxStringLength:200})||"<unknown>",d=uh(i,u);return pt({category:"ui.keyDown",message:u,data:{...d.data,metaKey:t,shiftKey:n,ctrlKey:r,altKey:s,key:o}})}function lC(e){return e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable}const dC={resource:gC,paint:hC,navigation:mC};function Ci(e,t){return({metric:n})=>{t.replayPerformanceEntries.push(e(n))}}function fC(e){return e.map(pC).filter(Boolean)}function pC(e){const t=dC[e.entryType];return t?t(e):null}function er(e){return((xe()||de.performance.timeOrigin)+e)/1e3}function hC(e){const{duration:t,entryType:n,name:r,startTime:s}=e,o=er(s);return{type:n,name:r,start:o,end:o+t,data:void 0}}function mC(e){const{entryType:t,name:n,decodedBodySize:r,duration:s,domComplete:o,encodedBodySize:i,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,domInteractive:u,loadEventStart:d,loadEventEnd:l,redirectCount:f,startTime:p,transferSize:h,type:m}=e;return s===0?null:{type:`${t}.${m}`,start:er(p),end:er(o),name:n,data:{size:h,decodedBodySize:r,encodedBodySize:i,duration:s,domInteractive:u,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,loadEventStart:d,loadEventEnd:l,domComplete:o,redirectCount:f}}}function gC(e){const{entryType:t,initiatorType:n,name:r,responseEnd:s,startTime:o,decodedBodySize:i,encodedBodySize:a,responseStatus:c,transferSize:u}=e;return["fetch","xmlhttprequest"].includes(n)?null:{type:`${t}.${n}`,start:er(o),end:er(s),name:r,data:{size:u,statusCode:c,decodedBodySize:i,encodedBodySize:a}}}function _C(e){const t=e.entries[e.entries.length-1],n=t!=null&&t.element?[t.element]:void 0;return kc(e,"largest-contentful-paint",n)}function yC(e){return e.sources!==void 0}function SC(e){const t=[],n=[];for(const r of e.entries)if(yC(r)){const s=[];for(const o of r.sources)if(o.node){n.push(o.node);const i=kt.mirror.getId(o.node);i&&s.push(i)}t.push({value:r.value,nodeIds:s.length?s:void 0})}return kc(e,"cumulative-layout-shift",n,t)}function bC(e){const t=e.entries[e.entries.length-1],n=t!=null&&t.target?[t.target]:void 0;return kc(e,"interaction-to-next-paint",n)}function kc(e,t,n,r){const s=e.value,o=e.rating,i=er(s);return{type:"web-vital",name:t,start:i,end:i,data:{value:s,size:s,rating:o,nodeIds:n?n.map(a=>kt.mirror.getId(a)):void 0,attributions:r}}}function EC(e){function t(s){e.performanceEntries.includes(s)||e.performanceEntries.push(s)}function n({entries:s}){s.forEach(t)}const r=[];return["navigation","paint","resource"].forEach(s=>{r.push(In(s,n))}),r.push(dc(Ci(_C,e)),lc(Ci(SC,e)),_p(Ci(bC,e))),()=>{r.forEach(s=>s())}}const B=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,TC='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(t,e){for(var i=new n(31),s=0;s<31;++s)i[s]=e+=1<<t[s-1];var a=new r(i[30]);for(s=1;s<30;++s)for(var o=i[s];o<i[s+1];++o)a[o]=o-i[s]<<5|s;return{b:i,r:a}},o=a(e,2),h=o.b,f=o.r;h[28]=258,f[258]=28;for(var l=a(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,s=0,a=new n(r);s<i;++s)t[s]&&++a[t[s]-1];var o,h=new n(r);for(s=1;s<r;++s)h[s]=h[s-1]+a[s-1]<<1;if(e){o=new n(1<<r);var f=15-r;for(s=0;s<i;++s)if(t[s])for(var l=s<<4|t[s],c=r-t[s],v=h[t[s]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>f]=l}else for(o=new n(i),s=0;s<i;++s)t[s]&&(o[s]=u[h[t[s]-1]++]>>15-t[s]);return o},p=new t(288);for(c=0;c<144;++c)p[c]=8;for(c=144;c<256;++c)p[c]=9;for(c=256;c<280;++c)p[c]=7;for(c=280;c<288;++c)p[c]=8;var g=new t(32);for(c=0;c<32;++c)g[c]=5;var w=d(p,9,0),y=d(g,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},_=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},x=function(r,e){for(var i=[],s=0;s<r.length;++s)r[s]&&i.push({s:s,f:r[s]});var a=i.length,o=i.slice();if(!a)return{t:F,l:0};if(1==a){var h=new t(i[0].s+1);return h[i[0].s]=1,{t:h,l:1}}i.sort(function(t,n){return t.f-n.f}),i.push({s:-1,f:25001});var f=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:f.f+l.f,l:f,r:l};c!=a-1;)f=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:f.f+l.f,l:f,r:l};var d=o[0].s;for(s=1;s<a;++s)o[s].s>d&&(d=o[s].s);var p=new n(d+1),g=A(i[c-1],p,0);if(g>e){s=0;var w=0,y=g-e,m=1<<y;for(o.sort(function(t,n){return p[n.s]-p[t.s]||t.f-n.f});s<a;++s){var b=o[s].s;if(!(p[b]>e))break;w+=m-(1<<g-p[b]),p[b]=e}for(w>>=y;w>0;){var M=o[s].s;p[M]<e?w-=1<<e-p[M]++-1:++s}for(;s>=0&&w;--s){var E=o[s].s;p[E]==e&&(--p[E],++w)}g=e}return{t:new t(p),l:g}},A=function(t,n,r){return-1==t.s?Math.max(A(t.l,n,r+1),A(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,s=t[0],a=1,o=function(t){e[i++]=t},h=1;h<=r;++h)if(t[h]==s&&h!=r)++a;else{if(!s&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(s),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(s);a=1,s=t[h]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var s=0;s<e;++s)t[i+s+4]=r[s];return 8*(i+4+e)},U=function(t,r,a,o,h,f,l,u,c,v,m){z(r,m++,a),++h[256];for(var b=x(h,15),M=b.t,E=b.l,A=x(f,15),U=A.t,C=A.l,F=D(M),I=F.c,S=F.n,L=D(U),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=x(q,7),H=G.t,J=G.l,K=19;K>4&&!H[s[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(h,p)+T(f,g)+l,X=T(h,M)+T(f,U)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(U,C,0),R=U;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[s[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=w,P=p,Q=y,R=g;for(B=0;B<u;++B){var rt=o[B];if(rt>255){_(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;_(r,m,Q[et]),m+=R[et],et>3&&(_(r,m,rt>>5&8191),m+=i[et])}else _(r,m,N[rt]),m+=P[rt]}return _(r,m,N[256]),m+P[256]},C=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,s=0|r.length,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=e+=r[a];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(s,a,o,h,u){if(!u&&(u={l:1},a.dictionary)){var c=a.dictionary.subarray(-32768),v=new t(c.length+s.length);v.set(c),v.set(s,c.length),s=v,u.w=c.length}return function(s,a,o,h,u,c){var v=c.z||s.length,d=new t(h+v+5*(1+Math.ceil(v/7e3))+u),p=d.subarray(h,d.length-u),g=c.l,w=7&(c.r||0);if(a){w&&(p[0]=c.r>>3);for(var y=C[a-1],M=y>>13,E=8191&y,z=(1<<o)-1,_=c.p||new n(32768),x=c.h||new n(z+1),A=Math.ceil(o/3),D=2*A,T=function(t){return(s[t]^s[t+1]<<A^s[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=x[H];if(_[J]=K,x[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!g)){w=U(s,p,0,F,I,S,O,q,G,j-G,w),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(s[j+Q]==s[j+Q-W]){for(var $=0;$<Z&&s[j+$]==s[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-_[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=_[J])&32767}if(R){F[q++]=268435456|f[Q]<<18|l[R];var it=31&f[Q],st=31&l[R];O+=e[it]+i[st],++I[257+it],++S[st],B=j+Q,++L}else F[q++]=s[j],++I[s[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=s[j],++I[s[j]];w=U(s,p,g,F,I,S,O,q,G,j-G,w),g||(c.r=7&w|p[w/8|0]<<3,w-=7,c.h=x,c.p=_,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+g;j+=65535){var at=j+65535;at>=v&&(p[w/8|0]=g,at=v),w=k(p,w+1,s.subarray(j,at))}c.i=v}return b(d,0,h+m(w)+u)}(s,null==a.level?6:a.level,null==a.mem?u.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(s.length)))):20:12+a.mem,o,h,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var s=this.b.length-this.s.z;this.b.set(n.subarray(0,s),this.s.z),this.s.z=this.b.length,this.p(this.b,!1),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(s),32768),this.s.z=n.length-s+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n.prototype.flush=function(){this.ondata||E(5),this.s.l&&E(4),this.p(this.b,!1),this.s.w=this.s.i,this.s.i-=2},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,s=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),a=s.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(s,n),O(s,a-8,r.d()),O(s,a-4,e),s}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t.prototype.flush=function(){j.prototype.flush.call(this)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(G)return G.encode(n);for(var e=n.length,i=new t(n.length+(n.length>>1)),s=0,a=function(t){i[s++]=t},o=0;o<e;++o){if(s+5>i.length){var h=new t(s+8+(e-o<<1));h.set(i),i=h}var f=n.charCodeAt(o);f<128||r?a(f):f<2048?(a(192|f>>6),a(128|63&f)):f>55295&&f<57344?(a(240|(f=65536+(1047552&f)|1023&n.charCodeAt(++o))>>18),a(128|f>>12&63),a(128|f>>6&63),a(128|63&f)):(a(224|f>>12),a(128|f>>6&63),a(128|63&f))}return b(i,0,s)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(const r of t)n+=r.length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J((t,n)=>{this.deflate.push(t,n)}),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}}),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function vC(){const e=new Blob([TC]);return URL.createObjectURL(e)}const Pl=["log","warn","error"],Hs="[Replay] ";function Ri(e,t="info"){Mt({category:"console",data:{logger:"replay"},level:t,message:`${Hs}${e}`},{level:t})}function IC(){let e=!1,t=!1;const n={exception:()=>{},infoTick:()=>{},setConfig:r=>{e=!!r.captureExceptions,t=!!r.traceInternals}};return B?(Pl.forEach(r=>{n[r]=(...s)=>{_[r](Hs,...s),t&&Ri(s.join(""),to(r))}}),n.exception=(r,...s)=>{s.length&&n.error&&n.error(...s),_.error(Hs,r),e?_e(r,{mechanism:{handled:!0,type:"auto.function.replay.debug"}}):t&&Ri(r,"error")},n.infoTick=(...r)=>{_.log(Hs,...r),t&&setTimeout(()=>Ri(r[0]),0)}):Pl.forEach(r=>{n[r]=()=>{}}),n}const U=IC();class Cc extends Error{constructor(){super(`Event buffer exceeded maximum size of ${yc}.`)}}class lh{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(t){const n=JSON.stringify(t).length;if(this._totalSize+=n,this._totalSize>yc)throw new Cc;this.events.push(t)}finish(){return new Promise(t=>{const n=this.events;this.clear(),t(JSON.stringify(n))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const t=this.events.map(n=>n.timestamp).sort()[0];return t?Ic(t):null}}class wC{constructor(t){this._worker=t,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((t,n)=>{this._worker.addEventListener("message",({data:r})=>{r.success?t():n()},{once:!0}),this._worker.addEventListener("error",r=>{n(r)},{once:!0})}),this._ensureReadyPromise)}destroy(){B&&U.log("Destroying compression worker"),this._worker.terminate()}postMessage(t,n){const r=this._getAndIncrementId();return new Promise((s,o)=>{const i=({data:a})=>{const c=a;if(c.method===t&&c.id===r){if(this._worker.removeEventListener("message",i),!c.success){B&&U.error("Error in compression worker: ",c.response),o(new Error("Error in compression worker"));return}s(c.response)}};this._worker.addEventListener("message",i),this._worker.postMessage({id:r,method:t,arg:n})})}_getAndIncrementId(){return this._id++}}class kC{constructor(t){this._worker=new wC(t),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(t){const n=Ic(t.timestamp);(!this._earliestTimestamp||n<this._earliestTimestamp)&&(this._earliestTimestamp=n);const r=JSON.stringify(t);return this._totalSize+=r.length,this._totalSize>yc?Promise.reject(new Cc):this._sendEventToWorker(r)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,t=>{B&&U.exception(t,'Sending "clear" message to worker failed',t)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(t){return this._worker.postMessage("addEvent",t)}async _finishRequest(){const t=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,t}}class CC{constructor(t){this._fallback=new lh,this._compression=new kC(t),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get waitForCheckout(){return this._used.waitForCheckout}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(t){this._used.hasCheckout=t}set waitForCheckout(t){this._used.waitForCheckout=t}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(t){return this._used.addEvent(t)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(t){B&&U.exception(t,"Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:t,hasCheckout:n,waitForCheckout:r}=this._fallback,s=[];for(const o of t)s.push(this._compression.addEvent(o));this._compression.hasCheckout=n,this._compression.waitForCheckout=r,this._used=this._compression;try{await Promise.all(s),this._fallback.clear()}catch(o){B&&U.exception(o,"Failed to add events when switching buffers.")}}}function RC({useCompression:e,workerUrl:t}){if(e&&window.Worker){const n=AC(t);if(n)return n}return B&&U.log("Using simple buffer"),new lh}function AC(e){try{const t=e||xC();if(!t)return;B&&U.log(`Using compression worker${e?` from ${e}`:""}`);const n=new Worker(t);return new CC(n)}catch(t){B&&U.exception(t,"Failed to create compression worker")}}function xC(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?vC():""}function Rc(){try{return"sessionStorage"in de&&!!de.sessionStorage}catch{return!1}}function MC(e){NC(),e.session=void 0}function NC(){if(Rc())try{de.sessionStorage.removeItem(gc)}catch{}}function dh(e){return e===void 0?!1:Math.random()<e}function Xo(e){if(Rc())try{de.sessionStorage.setItem(gc,JSON.stringify(e))}catch{}}function fh(e){const t=Date.now(),n=e.id||Ie(),r=e.started||t,s=e.lastActivity||t,o=e.segmentId||0,i=e.sampled,a=e.previousSessionId,c=e.dirty||!1;return{id:n,started:r,lastActivity:s,segmentId:o,sampled:i,previousSessionId:a,dirty:c}}function OC(e,t){return dh(e)?"session":t?"buffer":!1}function Dl({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:r}={}){const s=OC(e,t),o=fh({sampled:s,previousSessionId:r});return n&&Xo(o),o}function LC(){if(!Rc())return null;try{const e=de.sessionStorage.getItem(gc);if(!e)return null;const t=JSON.parse(e);return B&&U.infoTick("Loading existing session"),fh(t)}catch{return null}}function da(e,t,n=+new Date){return e===null||t===void 0||t<0?!0:t===0?!1:e+t<=n}function ph(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:r=Date.now()}){return da(e.started,t,r)||da(e.lastActivity,n,r)}function hh(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!(!ph(e,{sessionIdleExpire:t,maxReplayDuration:n})||e.sampled==="buffer"&&e.segmentId===0)}function Ai({sessionIdleExpire:e,maxReplayDuration:t,previousSessionId:n},r){const s=r.stickySession&&LC();return s?hh(s,{sessionIdleExpire:e,maxReplayDuration:t})?(B&&U.infoTick("Session in sessionStorage is expired, creating new one..."),Dl(r,{previousSessionId:s.id})):s:(B&&U.infoTick("Creating new session"),Dl(r,{previousSessionId:n}))}function PC(e){return e.type===J.Custom}function Ac(e,t,n){return gh(e,t)?(mh(e,t,n),!0):!1}function DC(e,t,n){return gh(e,t)?mh(e,t,n):Promise.resolve(null)}async function mh(e,t,n){const{eventBuffer:r}=e;if(!r||r.waitForCheckout&&!n)return null;const s=e.recordingMode==="buffer";try{n&&s&&r.clear(),n&&(r.hasCheckout=!0,r.waitForCheckout=!1);const o=e.getOptions(),i=FC(t,o.beforeAddRecordingEvent);return i?await r.addEvent(i):void 0}catch(o){const i=o&&o instanceof Cc,a=i?"addEventSizeExceeded":"addEvent",c=x();if(c){const u=i?"buffer_overflow":"internal_sdk_error";c.recordDroppedEvent(u,"replay")}if(i&&s)return r.clear(),r.waitForCheckout=!0,null;e.handleException(o),await e.stop({reason:a})}}function gh(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;const n=Ic(t.timestamp);return n+e.timeouts.sessionIdlePause<Date.now()?!1:n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration?(B&&U.infoTick(`Skipping event with timestamp ${n} because it is after maxReplayDuration`),!1):!0}function FC(e,t){try{if(typeof t=="function"&&PC(e))return t(e)}catch(n){return B&&U.exception(n,"An error occurred in the `beforeAddRecordingEvent` callback, skipping the event..."),null}return e}function xc(e){return!e.type}function fa(e){return e.type==="transaction"}function $C(e){return e.type==="replay_event"}function Fl(e){return e.type==="feedback"}function BC(e){return(t,n)=>{if(!e.isEnabled()||!xc(t)&&!fa(t))return;const r=n.statusCode;if(!(!r||r<200||r>=300)){if(fa(t)){UC(e,t);return}HC(e,t)}}}function UC(e,t){var r,s;const n=e.getContext();(s=(r=t.contexts)==null?void 0:r.trace)!=null&&s.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}function HC(e,t){const n=e.getContext();if(t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id),e.recordingMode!=="buffer"||!t.tags||!t.tags.replayId)return;const{beforeErrorSampling:r}=e.getOptions();typeof r=="function"&&!r(t)||ns(async()=>{try{await e.sendBufferedReplayOrFlush()}catch(s){e.handleException(s)}})}function WC(e){return t=>{!e.isEnabled()||!xc(t)||jC(e,t)}}function jC(e,t){var r,s,o;const n=(o=(s=(r=t.exception)==null?void 0:r.values)==null?void 0:s[0])==null?void 0:o.value;if(typeof n=="string"&&(n.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i))){const i=pt({category:"replay.hydrate-error",data:{url:wn()}});ss(e,i)}}function zC(e){const t=x();t&&t.on("beforeAddBreadcrumb",n=>qC(e,n))}function qC(e,t){if(!e.isEnabled()||!_h(t))return;const n=GC(t);n&&ss(e,n)}function GC(e){return!_h(e)||["fetch","xhr","sentry.event","sentry.transaction"].includes(e.category)||e.category.startsWith("ui.")?null:e.category==="console"?VC(e):pt(e)}function VC(e){var s;const t=(s=e.data)==null?void 0:s.arguments;if(!Array.isArray(t)||t.length===0)return pt(e);let n=!1;const r=t.map(o=>{if(!o)return o;if(typeof o=="string")return o.length>_s?(n=!0,`${o.slice(0,_s)}`):o;if(typeof o=="object")try{const i=ze(o,7);return JSON.stringify(i).length>_s?(n=!0,`${JSON.stringify(i,null,2).slice(0,_s)}`):i}catch{}return o});return pt({...e,data:{...e.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}function _h(e){return!!e.category}function JC(e,t){var n,r,s;return e.type||!((r=(n=e.exception)==null?void 0:n.values)!=null&&r.length)?!1:!!((s=t.originalException)!=null&&s.__rrweb__)}function yh(){const e=G().getPropagationContext().dsc;e&&delete e.replay_id;const t=Te();if(t){const n=ct(t);delete n.replay_id}}function YC(e,t){e.triggerUserActivity(),e.addUpdate(()=>t.timestamp?(e.throttledAddEvent({type:J.Custom,timestamp:t.timestamp*1e3,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1):!0)}function KC(e,t){return e.recordingMode!=="buffer"||t.message===_c||!t.exception||t.type?!1:dh(e.getOptions().errorSampleRate)}function XC(e){return Object.assign((t,n)=>{var i;if(!e.isEnabled()||e.isPaused())return t;if($C(t))return delete t.breadcrumbs,t;if(!xc(t)&&!fa(t)&&!Fl(t))return t;if(!e.checkAndHandleExpiredSession())return yh(),t;if(Fl(t))return e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),YC(e,t),t;if(JC(t,n)&&!e.getOptions()._experiments.captureExceptions)return B&&U.log("Ignoring error from rrweb internals",t),null;const s=KC(e,t);if((s||e.recordingMode==="session")&&(t.tags={...t.tags,replayId:e.getSessionId()}),s&&e.recordingMode==="buffer"&&((i=e.session)==null?void 0:i.sampled)==="buffer"){const a=e.session;a.dirty=!0,e.getOptions().stickySession&&Xo(a)}return t},{id:"Replay"})}function Qo(e,t){return t.map(({type:n,start:r,end:s,name:o,data:i})=>{const a=e.throttledAddEvent({type:J.Custom,timestamp:r,data:{tag:"performanceSpan",payload:{op:n,description:o,startTimestamp:r,endTimestamp:s,data:i}}});return typeof a=="string"?Promise.resolve(null):a})}function QC(e){const{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}function ZC(e){return t=>{if(!e.isEnabled())return;const n=QC(t);n!==null&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate(()=>(Qo(e,[n]),!1)))}}function e1(e,t){return B&&e.getOptions()._experiments.traceInternals?!1:yf(t,x())}function Sh(e,t){e.isEnabled()&&t!==null&&(e1(e,t.name)||e.addUpdate(()=>(Qo(e,[t]),!0)))}function Zo(e){if(!e)return;const t=new TextEncoder;try{if(typeof e=="string")return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){const n=Ip(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch{}}function bh(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function yo(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};const n={...e._meta},r=n.warnings||[];return n.warnings=[...r,t],e._meta=n,e}function Eh(e,t){if(!t)return null;const{startTimestamp:n,endTimestamp:r,url:s,method:o,statusCode:i,request:a,response:c}=t;return{type:e,start:n/1e3,end:r/1e3,name:s,data:{method:o,statusCode:i,request:a,response:c}}}function Pr(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function Vt(e,t,n){if(!t&&Object.keys(e).length===0)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};const r={headers:e,size:t},{body:s,warnings:o}=t1(n);return r.body=s,o!=null&&o.length&&(r._meta={warnings:o}),r}function pa(e,t){return Object.entries(e).reduce((n,[r,s])=>{const o=r.toLowerCase();return t.includes(o)&&e[r]&&(n[o]=s),n},{})}function t1(e){if(!e||typeof e!="string")return{body:e};const t=e.length>_l,n=n1(e);if(t){const r=e.slice(0,_l);return n?{body:r,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${r}`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch{}return{body:e}}function n1(e){const t=e[0],n=e[e.length-1];return t==="["&&n==="]"||t==="{"&&n==="}"}function So(e,t){const n=r1(e);return at(n,t)}function r1(e,t=de.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(de.location.origin))return e;const n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;const r=n.href;return!e.endsWith("/")&&r.endsWith("/")?r.slice(0,-1):r}async function s1(e,t,n){try{const r=await i1(e,t,n),s=Eh("resource.fetch",r);Sh(n.replay,s)}catch(r){B&&U.exception(r,"Failed to capture fetch breadcrumb")}}function o1(e,t){const{input:n,response:r}=t,s=n?mc(n):void 0,o=Zo(s),i=r?bh(r.headers.get("content-length")):void 0;o!==void 0&&(e.data.request_body_size=o),i!==void 0&&(e.data.response_body_size=i)}async function i1(e,t,n){const r=Date.now(),{startTimestamp:s=r,endTimestamp:o=r}=t,{url:i,method:a,status_code:c=0,request_body_size:u,response_body_size:d}=e.data,l=So(i,n.networkDetailAllowUrls)&&!So(i,n.networkDetailDenyUrls),f=l?a1(n,t.input,u):Pr(u),p=await c1(l,n,t.response,d);return{startTimestamp:s,endTimestamp:o,url:i,method:a,statusCode:c,request:f,response:p}}function a1({networkCaptureBodies:e,networkRequestHeaders:t},n,r){const s=n?d1(n,t):{};if(!e)return Vt(s,r,void 0);const o=mc(n),[i,a]=lo(o,U),c=Vt(s,r,i);return a?yo(c,a):c}async function c1(e,{networkCaptureBodies:t,networkResponseHeaders:n},r,s){if(!e&&s!==void 0)return Pr(s);const o=r?Th(r.headers,n):{};if(!r||!t&&s!==void 0)return Vt(o,s,void 0);const[i,a]=await l1(r),c=u1(i,{networkCaptureBodies:t,responseBodySize:s,captureDetails:e,headers:o});return a?yo(c,a):c}function u1(e,{networkCaptureBodies:t,responseBodySize:n,captureDetails:r,headers:s}){try{const o=e!=null&&e.length&&n===void 0?Zo(e):n;return r?t?Vt(s,o,e):Vt(s,o,void 0):Pr(o)}catch(o){return B&&U.exception(o,"Failed to serialize response body"),Vt(s,n,void 0)}}async function l1(e){const t=f1(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{return[await p1(t)]}catch(n){return n instanceof Error&&n.message.indexOf("Timeout")>-1?(B&&U.warn("Parsing text body from response timed out"),[void 0,"BODY_PARSE_TIMEOUT"]):(B&&U.exception(n,"Failed to get text body from response"),[void 0,"BODY_PARSE_ERROR"])}}function Th(e,t){const n={};return t.forEach(r=>{e.get(r)&&(n[r]=e.get(r))}),n}function d1(e,t){return e.length===1&&typeof e[0]!="string"?$l(e[0],t):e.length===2?$l(e[1],t):{}}function $l(e,t){if(!e)return{};const n=e.headers;return n?n instanceof Headers?Th(n,t):Array.isArray(n)?{}:pa(n,t):{}}function f1(e){try{return e.clone()}catch(t){B&&U.exception(t,"Failed to clone response body")}}function p1(e){return new Promise((t,n)=>{const r=ns(()=>n(new Error("Timeout while trying to read response body")),500);h1(e).then(s=>t(s),s=>n(s)).finally(()=>clearTimeout(r))})}async function h1(e){return await e.text()}async function m1(e,t,n){try{const r=_1(e,t,n),s=Eh("resource.xhr",r);Sh(n.replay,s)}catch(r){B&&U.exception(r,"Failed to capture xhr breadcrumb")}}function g1(e,t){const{xhr:n,input:r}=t;if(!n)return;const s=Zo(r),o=n.getResponseHeader("content-length")?bh(n.getResponseHeader("content-length")):b1(n.response,n.responseType);s!==void 0&&(e.data.request_body_size=s),o!==void 0&&(e.data.response_body_size=o)}function _1(e,t,n){const r=Date.now(),{startTimestamp:s=r,endTimestamp:o=r,input:i,xhr:a}=t,{url:c,method:u,status_code:d=0,request_body_size:l,response_body_size:f}=e.data;if(!c)return null;if(!a||!So(c,n.networkDetailAllowUrls)||So(c,n.networkDetailDenyUrls)){const L=Pr(l),b=Pr(f);return{startTimestamp:s,endTimestamp:o,url:c,method:u,statusCode:d,request:L,response:b}}const p=a[Tt],h=p?pa(p.request_headers,n.networkRequestHeaders):{},m=pa(wp(a),n.networkResponseHeaders),[g,y]=n.networkCaptureBodies?lo(i,U):[void 0],[S,w]=n.networkCaptureBodies?y1(a):[void 0],E=Vt(h,l,g),D=Vt(m,f,S);return{startTimestamp:s,endTimestamp:o,url:c,method:u,statusCode:d,request:y?yo(E,y):E,response:w?yo(D,w):D}}function y1(e){const t=[];try{return[e.responseText]}catch(n){t.push(n)}try{return S1(e.response,e.responseType)}catch(n){t.push(n)}return B&&U.warn("Failed to get xhr response body",...t),[void 0]}function S1(e,t){try{if(typeof e=="string")return[e];if(e instanceof Document)return[e.body.outerHTML];if(t==="json"&&e&&typeof e=="object")return[JSON.stringify(e)];if(!e)return[void 0]}catch(n){return B&&U.exception(n,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return B&&U.log("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function b1(e,t){try{const n=t==="json"&&e&&typeof e=="object"?JSON.stringify(e):e;return Zo(n)}catch{return}}function E1(e){const t=x();try{const{networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:s,networkRequestHeaders:o,networkResponseHeaders:i}=e.getOptions(),a={replay:e,networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:s,networkRequestHeaders:o,networkResponseHeaders:i};t&&t.on("beforeAddBreadcrumb",(c,u)=>T1(a,c,u))}catch{}}function T1(e,t,n){if(t.data)try{v1(t)&&w1(n)&&(g1(t,n),m1(t,n,e)),I1(t)&&k1(n)&&(o1(t,n),s1(t,n,e))}catch(r){B&&U.exception(r,"Error when enriching network breadcrumb")}}function v1(e){return e.category==="xhr"}function I1(e){return e.category==="fetch"}function w1(e){return e==null?void 0:e.xhr}function k1(e){return e==null?void 0:e.response}function C1(e){const t=x();vp(sC(e)),qo(ZC(e)),zC(e),E1(e);const n=XC(e);e_(n),t&&(t.on("beforeSendEvent",WC(e)),t.on("afterSendEvent",BC(e)),t.on("createDsc",r=>{const s=e.getSessionId();s&&e.isEnabled()&&e.recordingMode==="session"&&e.checkAndHandleExpiredSession()&&(r.replay_id=s)}),t.on("spanStart",r=>{e.lastActiveSpan=r}),t.on("spanEnd",r=>{e.lastActiveSpan=r}),t.on("beforeSendFeedback",async(r,s)=>{var i;const o=e.getSessionId();s!=null&&s.includeReplay&&e.isEnabled()&&o&&((i=r.contexts)!=null&&i.feedback)&&(r.contexts.feedback.source==="api"&&await e.sendBufferedReplayOrFlush(),r.contexts.feedback.replay_id=o)}),t.on("openFeedbackWidget",async()=>{await e.sendBufferedReplayOrFlush()}))}async function R1(e){try{return Promise.all(Qo(e,[A1(de.performance.memory)]))}catch{return[]}}function A1(e){const{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,s=Date.now()/1e3;return{type:"memory",name:"memory",start:s,end:s,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}function x1(e,t,n){return Q_(e,t,{...n,setTimeoutImpl:ns})}const Ke=F.navigator;function M1(){var e,t;return/iPhone|iPad|iPod/i.test((e=Ke==null?void 0:Ke.userAgent)!=null?e:"")||/Macintosh/i.test((t=Ke==null?void 0:Ke.userAgent)!=null?t:"")&&(Ke!=null&&Ke.maxTouchPoints)&&(Ke==null?void 0:Ke.maxTouchPoints)>1?{sampling:{mousemove:!1}}:{}}function N1(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession()){B&&U.warn("Received replay event after session expired.");return}const s=r||!t;t=!0,e.clickDetector&&Zk(e.clickDetector,n),e.addUpdate(()=>{if(e.recordingMode==="buffer"&&s&&e.setInitialState(),!Ac(e,n,s))return!0;if(!s)return!1;const o=e.session;if(L1(e,s),e.recordingMode==="buffer"&&o&&e.eventBuffer&&!o.dirty){const i=e.eventBuffer.getEarliestTimestamp();i&&(B&&U.log(`Updating session start time to earliest event in buffer to ${new Date(i)}`),o.started=i,e.getOptions().stickySession&&Xo(o))}return o!=null&&o.previousSessionId||e.recordingMode==="session"&&e.flush(),!0})}}function O1(e){const t=e.getOptions();return{type:J.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:e.eventBuffer?e.eventBuffer.type==="worker":!1,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}function L1(e,t){!t||!e.session||e.session.segmentId!==0||Ac(e,O1(e),!1)}function P1(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function D1(e,t,n,r){return lt(Vd(e,wo(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:typeof t=="string"?new TextEncoder().encode(t).length:t.length},t]])}function F1({recordingData:e,headers:t}){let n;const r=`${JSON.stringify(t)}
`;if(typeof e=="string")n=`${r}${e}`;else{const o=new TextEncoder().encode(r);n=new Uint8Array(o.length+e.length),n.set(o),n.set(e,o.length)}return n}async function $1({client:e,scope:t,replayId:n,event:r}){const s=typeof e._integrations=="object"&&e._integrations!==null&&!Array.isArray(e._integrations)?Object.keys(e._integrations):void 0,o={event_id:n,integrations:s};e.emit("preprocessEvent",r,o);const i=await Xd(e.getOptions(),r,o,t,e,ve());if(!i)return null;e.emit("postprocessEvent",i,o),i.platform=i.platform||"javascript";const a=e.getSdkMetadata(),{name:c,version:u,settings:d}=(a==null?void 0:a.sdk)||{};return i.sdk={...i.sdk,name:c||"sentry.javascript.unknown",version:u||"0.0.0",settings:d},i}async function B1({recordingData:e,replayId:t,segmentId:n,eventContext:r,timestamp:s,session:o}){const i=F1({recordingData:e,headers:{segment_id:n}}),{urls:a,errorIds:c,traceIds:u,initialTimestamp:d}=r,l=x(),f=G(),p=l==null?void 0:l.getTransport(),h=l==null?void 0:l.getDsn();if(!l||!p||!h||!o.sampled)return Promise.resolve({});const m={type:mw,replay_start_timestamp:d/1e3,timestamp:s/1e3,error_ids:c,trace_ids:u,urls:a,replay_id:t,segment_id:n,replay_type:o.sampled},g=await $1({scope:f,client:l,replayId:t,event:m});if(!g)return l.recordDroppedEvent("event_processor","replay"),B&&U.log("An event processor returned `null`, will not send event."),Promise.resolve({});delete g.sdkProcessingMetadata;const y=D1(g,i,h,l.getOptions().tunnel);let S;try{S=await p.send(y)}catch(E){const D=new Error(_c);try{D.cause=E}catch{}throw D}const w=uf({},S);if(cf(w,"replay"))throw new Mc(w);if(typeof S.statusCode=="number"&&(S.statusCode<200||S.statusCode>=300))throw new vh(S.statusCode);return S}class vh extends Error{constructor(t){super(`Transport returned status code ${t}`)}}class Mc extends Error{constructor(t){super("Rate limit hit"),this.rateLimits=t}}class Bl extends Error{constructor(){super("Session is too long, not sending replay")}}async function Ih(e,t={count:0,interval:Ew}){const{recordingData:n,onError:r}=e;if(n.length)try{return await B1(e),!0}catch(s){if(s instanceof vh||s instanceof Mc)throw s;if(Xg("Replays",{_retryCount:t.count}),r&&r(s),t.count>=Tw){const o=new Error(`${_c} - max retries exceeded`);try{o.cause=s}catch{}throw o}return t.interval*=++t.count,new Promise((o,i)=>{ns(async()=>{try{await Ih(e,t),o(!0)}catch(a){i(a)}},t.interval)})}}const wh="__THROTTLED",U1="__SKIPPED";function H1(e,t,n){const r=new Map,s=a=>{const c=a-n;r.forEach((u,d)=>{d<c&&r.delete(d)})},o=()=>[...r.values()].reduce((a,c)=>a+c,0);let i=!1;return(...a)=>{const c=Math.floor(Date.now()/1e3);if(s(c),o()>=t){const d=i;return i=!0,d?U1:wh}i=!1;const u=r.get(c)||0;return r.set(c,u+1),e(...a)}}class W1{constructor({options:t,recordingOptions:n}){this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:gw,sessionIdleExpire:_w},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._requiresManualStart=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=n,this._options=t,this._debouncedFlush=x1(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=H1((i,a)=>DC(this,i,a),300,5);const{slowClickTimeout:r,slowClickIgnoreSelectors:s}=this.getOptions(),o=r?{threshold:Math.min(vw,r),timeout:r,scrollTimeout:Iw,ignoreSelector:s?s.join(","):""}:void 0;if(o&&(this.clickDetector=new Yk(this,o)),B){const i=t._experiments;U.setConfig({captureExceptions:!!i.captureExceptions,traceInternals:!!i.traceInternals})}this._handleVisibilityChange=()=>{de.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()},this._handleWindowBlur=()=>{const i=pt({category:"ui.blur"});this._doChangeToBackgroundTasks(i)},this._handleWindowFocus=()=>{const i=pt({category:"ui.focus"});this._doChangeToForegroundTasks(i)},this._handleKeyboardEvent=i=>{cC(this,i)}}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return!!this._canvas}getOptions(){return this._options}handleException(t){B&&U.exception(t),this._options.onError&&this._options.onError(t)}initializeSampling(t){const{errorSampleRate:n,sessionSampleRate:r}=this._options,s=n<=0&&r<=0;if(this._requiresManualStart=s,!s){if(this._initializeSessionForSampling(t),!this.session){B&&U.exception(new Error("Unable to initialize and create session"));return}this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",B&&U.infoTick(`Starting replay in ${this.recordingMode} mode`),this._initializeRecording())}}start(){if(this._isEnabled&&this.recordingMode==="session"){B&&U.log("Recording is already in progress");return}if(this._isEnabled&&this.recordingMode==="buffer"){B&&U.log("Buffering is in progress, call `flush()` to save the replay");return}B&&U.infoTick("Starting replay in session mode"),this._updateUserActivity();const t=Ai({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=t,this.recordingMode="session",this._initializeRecording()}startBuffering(){if(this._isEnabled){B&&U.log("Buffering is in progress, call `flush()` to save the replay");return}B&&U.infoTick("Starting replay in buffer mode");const t=Ai({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=t,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const t=this._canvas;this._stopRecording=kt({...this._recordingOptions,...this.recordingMode==="buffer"?{checkoutEveryNms:bw}:this._options._experiments.continuousCheckout&&{checkoutEveryNms:Math.max(36e4,this._options._experiments.continuousCheckout)},emit:N1(this),...M1(),onMutation:this._onMutationHandler.bind(this),...t?{recordCanvas:t.recordCanvas,getCanvasManager:t.getCanvasManager,sampling:t.sampling,dataURLOptions:t.dataURLOptions}:{}})}catch(t){this.handleException(t)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(t){return this.handleException(t),!1}}async stop({forceFlush:t=!1,reason:n}={}){var r;if(this._isEnabled){this._isEnabled=!1,this.recordingMode="buffer";try{B&&U.log(`Stopping Replay${n?` triggered by ${n}`:""}`),yh(),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),t&&await this._flush({force:!0}),(r=this.eventBuffer)==null||r.destroy(),this.eventBuffer=null,MC(this)}catch(s){this.handleException(s)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),B&&U.log("Pausing replay"))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),B&&U.log("Resuming replay"))}async sendBufferedReplayOrFlush({continueRecording:t=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();const n=Date.now();B&&U.log("Converting buffer to session"),await this.flushImmediate();const r=this.stopRecording();!t||!r||this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this.session.dirty=!1,this._updateUserActivity(n),this._updateSessionActivity(n),this._maybeSaveSession()),this.startRecording())}addUpdate(t){const n=t();this.recordingMode==="buffer"||!this._isEnabled||n!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(t){var n,r;if(!(t&&((n=this.session)==null?void 0:n.sampled)===!1))return(r=this.session)==null?void 0:r.id}checkAndHandleExpiredSession(){if(this._lastActivity&&da(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return!!this._checkSession()}setInitialState(){const t=`${de.location.pathname}${de.location.hash}${de.location.search}`,n=`${de.location.origin}${t}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=n,this._context.initialTimestamp=Date.now(),this._context.urls.push(n)}throttledAddEvent(t,n){const r=this._throttledAddEvent(t,n);if(r===wh){const s=pt({category:"replay.throttled"});this.addUpdate(()=>!Ac(this,{type:Wk,timestamp:s.timestamp||0,data:{tag:"breadcrumb",payload:s,metric:!0}}))}return r}getCurrentRoute(){const t=this.lastActiveSpan||Te(),n=t&&Ee(t),s=(n&&q(n).data||{})[Ze];if(!(!n||!s||!["route","custom"].includes(s)))return q(n).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=RC({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_initializeSessionForSampling(t){const n=this._options.errorSampleRate>0,r=Ai({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,previousSessionId:t},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:n});this.session=r}_checkSession(){if(!this.session)return!1;const t=this.session;return hh(t,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})?(this._refreshSession(t),!1):!0}async _refreshSession(t){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(t.id))}_addListeners(){try{de.document.addEventListener("visibilitychange",this._handleVisibilityChange),de.addEventListener("blur",this._handleWindowBlur),de.addEventListener("focus",this._handleWindowFocus),de.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(C1(this),this._hasInitializedCoreListeners=!0)}catch(t){this.handleException(t)}this._performanceCleanupCallback=EC(this)}_removeListeners(){try{de.document.removeEventListener("visibilitychange",this._handleVisibilityChange),de.removeEventListener("blur",this._handleWindowBlur),de.removeEventListener("focus",this._handleWindowFocus),de.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(t){this.handleException(t)}}_doChangeToBackgroundTasks(t){!this.session||ph(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(t&&this._createCustomBreadcrumb(t),this.conditionalFlush())}_doChangeToForegroundTasks(t){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){B&&U.log("Document has become active, but session has expired");return}t&&this._createCustomBreadcrumb(t)}_updateUserActivity(t=Date.now()){this._lastActivity=t}_updateSessionActivity(t=Date.now()){this.session&&(this.session.lastActivity=t,this._maybeSaveSession())}_createCustomBreadcrumb(t){this.addUpdate(()=>{this.throttledAddEvent({type:J.Custom,timestamp:t.timestamp||0,data:{tag:"breadcrumb",payload:t}})})}_addPerformanceEntries(){let t=fC(this.performanceEntries).concat(this.replayPerformanceEntries);if(this.performanceEntries=[],this.replayPerformanceEntries=[],this._requiresManualStart){const n=this._context.initialTimestamp/1e3;t=t.filter(r=>r.start>=n)}return Promise.all(Qo(this,t))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:t,eventBuffer:n}=this;if(!t||!n||this._requiresManualStart||t.segmentId)return;const r=n.getEarliestTimestamp();r&&r<this._context.initialTimestamp&&(this._context.initialTimestamp=r)}_popEventContext(){const t={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),t}async _runFlush(){var n;const t=this.getSessionId();if(!this.session||!this.eventBuffer||!t){B&&U.error("No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!!((n=this.eventBuffer)!=null&&n.hasEvents)&&(await R1(this),!!this.eventBuffer&&t===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const r=Date.now();if(r-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Bl;const s=this._popEventContext(),o=this.session.segmentId++;this._maybeSaveSession();const i=await this.eventBuffer.finish();await Ih({replayId:t,recordingData:i,segmentId:o,eventContext:s,session:this.session,timestamp:r,onError:a=>this.handleException(a)})}catch(r){this.handleException(r),this.stop({reason:"sendReplay"});const s=x();if(s){let o;r instanceof Mc?o="ratelimit_backoff":r instanceof Bl?o="invalid":o="send_error",s.recordDroppedEvent(o,"replay")}}}async _flush({force:t=!1}={}){if(!this._isEnabled&&!t)return;if(!this.checkAndHandleExpiredSession()){B&&U.error("Attempting to finish replay event after session expired.");return}if(!this.session)return;const n=this.session.started,s=Date.now()-n;this._debouncedFlush.cancel();const o=s<this._options.minReplayDuration,i=s>this._options.maxReplayDuration+5e3;if(o||i){B&&U.log(`Session duration (${Math.floor(s/1e3)}s) is too ${o?"short":"long"}, not sending replay.`),o&&this._debouncedFlush();return}const a=this.eventBuffer;a&&this.session.segmentId===0&&!a.hasCheckout&&B&&U.log("Flushing initial segment without checkout.");const c=!!this._flushLock;this._flushLock||(this._flushLock=this._runFlush());try{await this._flushLock}catch(u){this.handleException(u)}finally{this._flushLock=void 0,c&&this._debouncedFlush()}}_maybeSaveSession(){this.session&&this._options.stickySession&&Xo(this.session)}_onMutationHandler(t){const{ignoreMutations:n}=this._options._experiments;if(n!=null&&n.length&&t.some(a=>{const c=P1(a.target),u=n.join(",");return c==null?void 0:c.matches(u)}))return!1;const r=t.length,s=this._options.mutationLimit,o=this._options.mutationBreadcrumbLimit,i=s&&r>s;if(r>o||i){const a=pt({category:"replay.mutations",data:{count:r,limit:i}});this._createCustomBreadcrumb(a)}return i?(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1):!0}}function _r(e,t){return[...e,...t].join(",")}function j1({mask:e,unmask:t,block:n,unblock:r,ignore:s}){const o=["base","iframe[srcdoc]:not([src])"],i=_r(e,[".sentry-mask","[data-sentry-mask]"]),a=_r(t,[]);return{maskTextSelector:i,unmaskTextSelector:a,blockSelector:_r(n,[".sentry-block","[data-sentry-block]",...o]),unblockSelector:_r(r,[]),ignoreSelector:_r(s,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}function z1({el:e,key:t,maskAttributes:n,maskAllText:r,privacyOptions:s,value:o}){return!r||s.unmaskTextSelector&&e.matches(s.unmaskTextSelector)?o:n.includes(t)||t==="value"&&e.tagName==="INPUT"&&["submit","button"].includes(e.getAttribute("type")||"")?o.replace(/[\S]/g,"*"):o}const Ul='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',q1=["content-length","content-type","accept"],G1=Symbol.for("sentry__originalRequestBody");let Hl=!1,Wl=!1;function V1(){if(typeof Request>"u"||Wl)return;const e=Request;try{const t=function(n,r){const s=new e(n,r);return(r==null?void 0:r.body)!=null&&(s[G1]=r.body),s};t.prototype=e.prototype,F.Request=t,Wl=!0}catch{}}const lx=(e=>new J1(e));class J1{constructor({flushMinDelay:t=yw,flushMaxDelay:n=Sw,minReplayDuration:r=ww,maxReplayDuration:s=yl,stickySession:o=!0,useCompression:i=!0,workerUrl:a,_experiments:c={},maskAllText:u=!0,maskAllInputs:d=!0,blockAllMedia:l=!0,mutationBreadcrumbLimit:f=750,mutationLimit:p=1e4,slowClickTimeout:h=7e3,slowClickIgnoreSelectors:m=[],networkDetailAllowUrls:g=[],networkDetailDenyUrls:y=[],networkCaptureBodies:S=!0,networkRequestHeaders:w=[],networkResponseHeaders:E=[],mask:D=[],maskAttributes:L=["title","placeholder","aria-label"],unmask:b=[],block:A=[],unblock:$=[],ignore:T=[],maskFn:M,beforeAddRecordingEvent:R,beforeErrorSampling:N,onError:O,attachRawBodyFromRequest:V=!1}={}){this.name="Replay";const K=j1({mask:D,unmask:b,block:A,unblock:$,ignore:T});if(this._recordingOptions={maskAllInputs:d,maskAllText:u,maskInputOptions:{password:!0},maskTextFn:M,maskInputFn:M,maskAttributeFn:(X,v,W)=>z1({maskAttributes:L,maskAllText:u,privacyOptions:K,key:X,value:v,el:W}),...K,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:X=>{try{X.__rrweb__=!0}catch{}},recordCrossOriginIframes:!!c.recordCrossOriginIframes},this._initialOptions={flushMinDelay:t,flushMaxDelay:n,minReplayDuration:Math.min(r,kw),maxReplayDuration:Math.min(s,yl),stickySession:o,useCompression:i,workerUrl:a,blockAllMedia:l,maskAllInputs:d,maskAllText:u,mutationBreadcrumbLimit:f,mutationLimit:p,slowClickTimeout:h,slowClickIgnoreSelectors:m,networkDetailAllowUrls:g,networkDetailDenyUrls:y,networkCaptureBodies:S,networkRequestHeaders:jl(w),networkResponseHeaders:jl(E),beforeAddRecordingEvent:R,beforeErrorSampling:N,onError:O,attachRawBodyFromRequest:V,_experiments:c},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${Ul}`:Ul,this._recordingOptions.ignoreCSSAttributes=new Set(["background-image"])),this._isInitialized&&so())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return Hl}set _isInitialized(t){Hl=t}afterAllSetup(t){!so()||this._replay||(this._initialOptions.attachRawBodyFromRequest&&V1(),this._setup(t),this._initialize(t))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(t){return this._replay?this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(t):(this._replay.start(),Promise.resolve()):Promise.resolve()}getReplayId(t){var n;if((n=this._replay)!=null&&n.isEnabled())return this._replay.getSessionId(t)}getRecordingMode(){var t;if((t=this._replay)!=null&&t.isEnabled())return this._replay.recordingMode}_initialize(t){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(t),this._replay.initializeSampling())}_setup(t){const n=Y1(this._initialOptions,t);this._replay=new W1({options:n,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(t){try{const n=t.getIntegrationByName("ReplayCanvas");if(!n)return;this._replay._canvas=n.getOptions()}catch{}}}function Y1(e,t){const n=t.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...e},s=mn(n.replaysSessionSampleRate),o=mn(n.replaysOnErrorSampleRate);return s==null&&o==null&&Qt(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),s!=null&&(r.sessionSampleRate=s),o!=null&&(r.errorSampleRate=o),r}function jl(e){return[...q1,...e.map(t=>t.toLowerCase())]}function dx(){const e=x();return e==null?void 0:e.getIntegrationByName("Replay")}var K1=Object.defineProperty,X1=(e,t,n)=>t in e?K1(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zl=(e,t,n)=>X1(e,typeof t!="symbol"?t+"":t,n);class Q1{constructor(){zl(this,"idNodeMap",new Map),zl(this,"nodeMetaMap",new WeakMap)}getId(t){var r;if(!t)return-1;const n=(r=this.getMeta(t))==null?void 0:r.id;return n!=null?n:-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){const n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){const r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)}replace(t,n){const r=this.getNode(t);if(r){const s=this.nodeMetaMap.get(r);s&&this.nodeMetaMap.set(n,s)}this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function Z1(){return new Q1}function eR(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}function ha(e,t,n=1/0,r=0){return!e||e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:ha(e.parentNode,t,n,r+1)}function ql(e,t){return n=>{const r=n;if(r===null)return!1;try{if(e){if(typeof e=="string"){if(r.matches(`.${e}`))return!0}else if(eR(r,e))return!0}return!!(t&&r.matches(t))}catch{return!1}}}const Pn=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let Gl={map:{},getId(){return console.error(Pn),-1},getNode(){return console.error(Pn),null},removeNodeFromMap(){console.error(Pn)},has(){return console.error(Pn),!1},reset(){console.error(Pn)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(Gl=new Proxy(Gl,{get(e,t,n){return t==="map"&&console.error(Pn),Reflect.get(e,t,n)}}));function Nc(e,t,n,r,s=window){const o=s.Object.getOwnPropertyDescriptor(e,t);return s.Object.defineProperty(e,t,r?n:{set(i){Ch(()=>{n.set.call(this,i)},0),o&&o.set&&o.set.call(this,i)}}),()=>Nc(e,t,o||{},!0)}function Oc(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],s=n(r);return typeof s=="function"&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=s,()=>{e[t]=r}}catch{return()=>{}}}Date.now().toString();function tR(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function ei(e,t,n,r,s){if(!e)return!1;const o=tR(e);if(!o)return!1;const i=ql(t,n),a=ha(o,i);let c=-1;return a<0?!1:(r&&(c=ha(o,ql(null,r))),a>-1&&c<0?!0:a<c)}const Vl={};function kh(e){const t=Vl[e];if(t)return t;const n=window.document;let r=window[e];if(n&&typeof n.createElement=="function")try{const s=n.createElement("iframe");s.hidden=!0,n.head.appendChild(s);const o=s.contentWindow;o&&o[e]&&(r=o[e]),n.head.removeChild(s)}catch{}return Vl[e]=r.bind(window)}function on(...e){return kh("requestAnimationFrame")(...e)}function Ch(...e){return kh("setTimeout")(...e)}var tr=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(tr||{});let Ws;function nR(e){Ws=e}const xi=e=>Ws?(...n)=>{try{return e(...n)}catch(r){if(Ws&&Ws(r)===!0)return()=>{};throw r}}:e;var Hn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",rR=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Es=0;Es<Hn.length;Es++)rR[Hn.charCodeAt(Es)]=Es;var sR=function(e){var t=new Uint8Array(e),n,r=t.length,s="";for(n=0;n<r;n+=3)s+=Hn[t[n]>>2],s+=Hn[(t[n]&3)<<4|t[n+1]>>4],s+=Hn[(t[n+1]&15)<<2|t[n+2]>>6],s+=Hn[t[n+2]&63];return r%3===2?s=s.substring(0,s.length-1)+"=":r%3===1&&(s=s.substring(0,s.length-2)+"=="),s};const Jl=new Map;function oR(e,t){let n=Jl.get(e);return n||(n=new Map,Jl.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}const Rh=(e,t,n)=>{if(!e||!(xh(e,t)||typeof e=="object"))return;const r=e.constructor.name,s=oR(n,r);let o=s.indexOf(e);return o===-1&&(o=s.length,s.push(e)),o};function js(e,t,n){if(e instanceof Array)return e.map(r=>js(r,t,n));if(e===null)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){const r=e.constructor.name,s=sR(e);return{rr_type:r,base64:s}}else{if(e instanceof DataView)return{rr_type:e.constructor.name,args:[js(e.buffer,t,n),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement){const r=e.constructor.name,{src:s}=e;return{rr_type:r,src:s}}else if(e instanceof HTMLCanvasElement){const r="HTMLImageElement",s=e.toDataURL();return{rr_type:r,src:s}}else{if(e instanceof ImageData)return{rr_type:e.constructor.name,args:[js(e.data,t,n),e.width,e.height]};if(xh(e,t)||typeof e=="object"){const r=e.constructor.name,s=Rh(e,t,n);return{rr_type:r,index:s}}}}return e}const Ah=(e,t,n)=>e.map(r=>js(r,t,n)),xh=(e,t)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(s=>typeof t[s]=="function").find(s=>e instanceof t[s]);function iR(e,t,n,r,s){const o=[],i=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const a of i)try{if(typeof t.CanvasRenderingContext2D.prototype[a]!="function")continue;const c=Oc(t.CanvasRenderingContext2D.prototype,a,function(u){return function(...d){return ei(this.canvas,n,r,s,!0)||Ch(()=>{const l=Ah(d,t,this);e(this.canvas,{type:tr["2D"],property:a,args:l})},0),u.apply(this,d)}});o.push(c)}catch{const c=Nc(t.CanvasRenderingContext2D.prototype,a,{set(u){e(this.canvas,{type:tr["2D"],property:a,args:[u],setter:!0})}});o.push(c)}return()=>{o.forEach(a=>a())}}function aR(e){return e==="experimental-webgl"?"webgl":e}function Yl(e,t,n,r,s){const o=[];try{const i=Oc(e.HTMLCanvasElement.prototype,"getContext",function(a){return function(c,...u){if(!ei(this,t,n,r,!0)){const d=aR(c);if("__context"in this||(this.__context=d),s&&["webgl","webgl2"].includes(d))if(u[0]&&typeof u[0]=="object"){const l=u[0];l.preserveDrawingBuffer||(l.preserveDrawingBuffer=!0)}else u.splice(0,1,{preserveDrawingBuffer:!0})}return a.apply(this,[c,...u])}});o.push(i)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{o.forEach(i=>i())}}function Kl(e,t,n,r,s,o,i,a){const c=[],u=Object.getOwnPropertyNames(e);for(const d of u)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(d))try{if(typeof e[d]!="function")continue;const l=Oc(e,d,function(f){return function(...p){const h=f.apply(this,p);if(Rh(h,a,this),"tagName"in this.canvas&&!ei(this.canvas,r,s,o,!0)){const m=Ah(p,a,this),g={type:t,property:d,args:m};n(this.canvas,g)}return h}});c.push(l)}catch{const l=Nc(e,d,{set(f){n(this.canvas,{type:t,property:d,args:[f],setter:!0})}});c.push(l)}return c}function cR(e,t,n,r,s,o){const i=[];return i.push(...Kl(t.WebGLRenderingContext.prototype,tr.WebGL,e,n,r,s,o,t)),typeof t.WebGL2RenderingContext<"u"&&i.push(...Kl(t.WebGL2RenderingContext.prototype,tr.WebGL2,e,n,r,s,o,t)),()=>{i.forEach(a=>a())}}const uR='for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w?.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};';function lR(){const e=new Blob([uR]);return URL.createObjectURL(e)}class dR{constructor(t){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.shadowDoms=new Set,this.windowsSet=new WeakSet,this.windows=[],this.restoreHandlers=[],this.frozen=!1,this.locked=!1,this.snapshotInProgressMap=new Map,this.worker=null,this.lastSnapshotTime=0,this.processMutation=(a,c)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(a)||this.pendingCanvasMutations.set(a,[]),this.pendingCanvasMutations.get(a).push(c)};const{enableManualSnapshot:n,sampling:r="all",win:s,recordCanvas:o,errorHandler:i}=t;t.sampling=r,this.mutationCb=t.mutationCb,this.mirror=t.mirror,this.options=t,i&&nR(i),(o&&typeof r=="number"||n)&&(this.worker=this.initFPSWorker()),this.addWindow(s),!n&&xi(()=>{o&&r==="all"&&(this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher()),o&&typeof r=="number"&&this.initCanvasFPSObserver()})()}reset(){var t;this.pendingCanvasMutations.clear(),this.restoreHandlers.forEach(n=>{try{n()}catch{}}),this.restoreHandlers=[],this.windowsSet=new WeakSet,this.windows=[],this.shadowDoms=new Set,(t=this.worker)==null||t.terminate(),this.worker=null,this.snapshotInProgressMap=new Map}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}addWindow(t){const{sampling:n="all",blockClass:r,blockSelector:s,unblockSelector:o,recordCanvas:i,enableManualSnapshot:a}=this.options;if(!this.windowsSet.has(t)){if(a){this.windowsSet.add(t),this.windows.push(new WeakRef(t));return}xi(()=>{if(i&&n==="all"&&this.initCanvasMutationObserver(t,r,s,o),i&&typeof n=="number"){const c=Yl(t,r,s,o,!0);this.restoreHandlers.push(()=>{c()})}})(),this.windowsSet.add(t),this.windows.push(new WeakRef(t))}}addShadowRoot(t){this.shadowDoms.add(new WeakRef(t))}resetShadowRoots(){this.shadowDoms=new Set}snapshot(t,n){if(n!=null&&n.skipRequestAnimationFrame){this.takeSnapshot(performance.now(),!0,t);return}on(r=>this.takeSnapshot(r,!0,t))}initFPSWorker(){const t=new Worker(lR());return t.onmessage=n=>{const r=n.data,{id:s}=r;if(this.snapshotInProgressMap.set(s,!1),!("base64"in r))return;const{base64:o,type:i,width:a,height:c}=r;this.mutationCb({id:s,type:tr["2D"],commands:[{property:"clearRect",args:[0,0,a,c]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:o}],type:i}]},0,0,a,c]}]})},t}initCanvasFPSObserver(){let t;if(!this.windows.length&&!this.shadowDoms.size)return;const n=r=>{this.takeSnapshot(r,!1),t=on(n)};t=on(n),this.restoreHandlers.push(()=>{t&&cancelAnimationFrame(t)})}initCanvasMutationObserver(t,n,r,s){const o=Yl(t,n,r,s,!1),i=iR(this.processMutation.bind(this),t,n,r,s),a=cR(this.processMutation.bind(this),t,n,r,s,this.mirror);this.restoreHandlers.push(()=>{o(),i(),a()})}getCanvasElements(t,n,r){const s=[],o=i=>{i.querySelectorAll("canvas").forEach(a=>{ei(a,t,n,r)||s.push(a)})};for(const i of this.windows){const a=i.deref();let c;try{c=a&&a.document}catch{}c&&o(c)}for(const i of this.shadowDoms){const a=i.deref();a&&o(a)}return s}takeSnapshot(t,n,r){const{sampling:s,blockClass:o,blockSelector:i,unblockSelector:a,dataURLOptions:c,maxCanvasSize:u}=this.options,l=1e3/(s==="all"?2:s||2);return this.lastSnapshotTime&&t-this.lastSnapshotTime<l?!1:(this.lastSnapshotTime=t,(r?[r]:this.getCanvasElements(o,i,a)).forEach(h=>{var g;const m=this.mirror.getId(h);if(!(!this.mirror.hasNode(h)||!h.width||!h.height||this.snapshotInProgressMap.get(m))){if(this.snapshotInProgressMap.set(m,!0),!n&&["webgl","webgl2"].includes(h.__context)){const y=h.getContext(h.__context);((g=y==null?void 0:y.getContextAttributes())==null?void 0:g.preserveDrawingBuffer)===!1&&y.clear(y.COLOR_BUFFER_BIT)}createImageBitmap(h).then(y=>{var S;(S=this.worker)==null||S.postMessage({id:m,bitmap:y,width:h.width,height:h.height,dataURLOptions:c,maxCanvasSize:u},[y])}).catch(y=>{xi(()=>{throw this.snapshotInProgressMap.delete(m),y})()})}}),!0)}startPendingCanvasMutationFlusher(){on(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const t=n=>{this.rafStamps.latestId=n,on(t)};on(t)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((t,n)=>{const r=this.mirror.getId(n);this.flushPendingCanvasMutationFor(n,r)}),on(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(t,n){if(this.frozen||this.locked)return;const r=this.pendingCanvasMutations.get(t);if(!r||n===-1)return;const s=r.map(i=>{const{type:a,...c}=i;return c}),{type:o}=r[0];this.mutationCb({id:n,type:o,commands:s}),this.pendingCanvasMutations.delete(t)}}var ld;try{if(Array.from([1],e=>e*2)[0]!==2){const e=document.createElement("iframe");document.body.appendChild(e),Array.from=((ld=e.contentWindow)==null?void 0:ld.Array.from)||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}Z1();var Xl;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(Xl||(Xl={}));const Ql={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},fR="ReplayCanvas",Ts=1280,pR=((e={})=>{const[t,n]=e.maxCanvasSize||[],r={quality:e.quality||"medium",enableManualSnapshot:e.enableManualSnapshot,maxCanvasSize:[t?Math.min(t,Ts):Ts,n?Math.min(n,Ts):Ts]};let s,o;const i=new Promise(a=>o=a);return{name:fR,getOptions(){const{quality:a,enableManualSnapshot:c,maxCanvasSize:u}=r;return{enableManualSnapshot:c,recordCanvas:!0,getCanvasManager:d=>{const l=new dR({...d,enableManualSnapshot:c,maxCanvasSize:u,errorHandler:f=>{try{typeof f=="object"&&(f.__rrweb__=!0)}catch{}}});return s=l,o(l),l},...Ql[a]||Ql.medium}},async snapshot(a,c){(s||await i).snapshot(a,c)}}}),fx=pR;function hR(e){return e.split(",").some(t=>t.trim().startsWith("sentry-"))}function Mh(e){try{return new URL(e,P.location.origin).href}catch{return}}function mR(e){return e.entryType==="resource"&&"initiatorType"in e&&typeof e.nextHopProtocol=="string"&&(e.initiatorType==="fetch"||e.initiatorType==="xmlhttprequest")}function Nh(e){try{return new Headers(e)}catch{return}}const Zl=new WeakMap,Mi=new Map,Oh={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function gR(e,t){const{traceFetch:n,traceXHR:r,trackFetchStreamPerformance:s,shouldCreateSpanForRequest:o,enableHTTPTimings:i,tracePropagationTargets:a,onRequestSpanStart:c,onRequestSpanEnd:u}={...Oh,...t},d=typeof o=="function"?o:h=>!0,l=h=>_R(h,a),f={},p=e.getOptions().propagateTraceparent;n&&(e.addEventProcessor(h=>(h.type==="transaction"&&h.spans&&h.spans.forEach(m=>{if(m.op==="http.client"){const g=Mi.get(m.span_id);g&&(m.timestamp=g/1e3,Mi.delete(m.span_id))}}),h)),s&&RE(h=>{if(h.response){const m=Zl.get(h.response);m&&h.endTimestamp&&Mi.set(m,h.endTimestamp)}}),Za(h=>{const m=hS(h,d,l,f,{propagateTraceparent:p,onRequestSpanEnd:u});if(h.response&&h.fetchData.__span&&Zl.set(h.response,h.fetchData.__span),m){const g=Mh(h.fetchData.url),y=g?hn(g).host:void 0;m.setAttributes({"http.url":g?qt(g):void 0,"server.address":y}),i&&ed(m),c==null||c(m,{headers:h.headers})}})),r&&hc(h=>{var g;const m=yR(h,d,l,f,p,u);m&&(i&&ed(m),c==null||c(m,{headers:Nh((g=h.xhr.__sentry_xhr_v3__)==null?void 0:g.request_headers)}))})}function ed(e){const{url:t}=q(e).data;if(!t||typeof t!="string")return;const n=In("resource",({entries:r})=>{r.forEach(s=>{mR(s)&&s.name.endsWith(t)&&(e.setAttributes(Tp(s)),setTimeout(n))})})}function _R(e,t){const n=wn();if(n){let r,s;try{r=new URL(e,n),s=new URL(n).origin}catch{return!1}const o=r.origin===s;return t?at(r.toString(),t)||o&&at(r.pathname,t):o}else{const r=!!e.match(/^\/(?!\/)/);return t?at(e,t):r}}function yR(e,t,n,r,s,o){const i=e.xhr,a=i==null?void 0:i[Tt];if(!i||i.__sentry_own_request__||!a)return;const{url:c,method:u}=a,d=tt()&&t(c);if(e.endTimestamp&&d){const y=i.__sentry_xhr_span_id__;if(!y)return;const S=r[y];S&&a.status_code!==void 0&&(Gs(S,a.status_code),S.end(),o==null||o(S,{headers:Nh(wp(i)),error:e.error}),delete r[y]);return}const l=Mh(c),f=hn(l||c),p=qt(_f(c)),h=!!Te(),m=d&&h?ar({name:`${u} ${p}`,attributes:{url:qt(c),type:"xhr","http.method":u,"http.url":l?qt(l):void 0,"server.address":f==null?void 0:f.host,[oe]:"auto.http.browser",[we]:"http.client",...(f==null?void 0:f.search)&&{"http.query":f==null?void 0:f.search},...(f==null?void 0:f.hash)&&{"http.fragment":f==null?void 0:f.hash}}}):new xt;i.__sentry_xhr_span_id__=m.spanContext().spanId,r[i.__sentry_xhr_span_id__]=m,n(c)&&SR(i,tt()&&h?m:void 0,s);const g=x();return g&&g.emit("beforeOutgoingRequestSpan",m,e),m}function SR(e,t,n){const{"sentry-trace":r,baggage:s,traceparent:o}=Sf({span:t,propagateTraceparent:n});r&&bR(e,r,s,o)}function bR(e,t,n,r){var o;const s=(o=e.__sentry_xhr_v3__)==null?void 0:o.request_headers;if(!(s!=null&&s["sentry-trace"]||!e.setRequestHeader))try{if(e.setRequestHeader("sentry-trace",t),r&&!(s!=null&&s.traceparent)&&e.setRequestHeader("traceparent",r),n){const i=s==null?void 0:s.baggage;(!i||!hR(i))&&e.setRequestHeader("baggage",n)}}catch{}}function ER(){P.document?P.document.addEventListener("visibilitychange",()=>{const e=Te();if(!e)return;const t=Ee(e);if(P.document.hidden&&t){const n="cancelled",{op:r,status:s}=q(t);I&&_.log(`[Tracing] Transaction: ${n} -> since tab moved to the background, op: ${r}`),s||t.setStatus({code:ee,message:n}),t.setAttribute("sentry.cancellation_reason","document.hidden"),t.end()}}):I&&_.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const TR=3600,Lh="sentry_previous_trace",vR="sentry.previous_trace";function IR(e,{linkPreviousTrace:t,consistentTraceSampling:n}){const r=t==="session-storage";let s=r?CR():void 0;e.on("spanStart",i=>{if(Ee(i)!==i)return;const a=G().getPropagationContext();s=wR(s,i,a),r&&kR(s)});let o=!0;n&&e.on("beforeSampling",i=>{if(!s)return;const a=G(),c=a.getPropagationContext();if(o&&c.parentSpanId){o=!1;return}a.setPropagationContext({...c,dsc:{...c.dsc,sample_rate:String(s.sampleRate),sampled:String(ma(s.spanContext))},sampleRand:s.sampleRand}),i.parentSampled=ma(s.spanContext),i.parentSampleRate=s.sampleRate,i.spanAttributes={...i.spanAttributes,[Cd]:s.sampleRate}})}function wR(e,t,n){const r=q(t);function s(){var a,c,u;try{return(u=Number((a=n.dsc)==null?void 0:a.sample_rate))!=null?u:Number((c=r.data)==null?void 0:c[va])}catch{return 0}}const o={spanContext:t.spanContext(),startTimestamp:r.start_timestamp,sampleRate:s(),sampleRand:n.sampleRand};if(!e)return o;const i=e.spanContext;return i.traceId===r.trace_id?e:(Date.now()/1e3-e.startTimestamp<=TR&&(I&&_.log(`Adding previous_trace \`${JSON.stringify(i)}\` link to span \`${JSON.stringify({op:r.op,...t.spanContext()})}\``),t.addLink({context:i,attributes:{[Cm]:"previous_trace"}}),t.setAttribute(vR,`${i.traceId}-${i.spanId}-${ma(i)?1:0}`)),o)}function kR(e){try{P.sessionStorage.setItem(Lh,JSON.stringify(e))}catch(t){I&&_.warn("Could not store previous trace in sessionStorage",t)}}function CR(){var e;try{const t=(e=P.sessionStorage)==null?void 0:e.getItem(Lh);return JSON.parse(t)}catch{return}}function ma(e){return e.traceFlags===1}const RR="BrowserTracing",AR={...Rs,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,enableElementTiming:!0,ignoreResourceSpans:[],ignorePerformanceApiSpans:[],detectRedirects:!0,linkPreviousTrace:"in-memory",consistentTraceSampling:!1,enableReportPageLoaded:!1,_experiments:{},...Oh},px=((e={})=>{const t={name:void 0,source:void 0},n=P.document,{enableInp:r,enableElementTiming:s,enableLongTask:o,enableLongAnimationFrame:i,_experiments:{enableInteractions:a,enableStandaloneClsSpans:c,enableStandaloneLcpSpans:u},beforeStartSpan:d,idleTimeout:l,finalTimeout:f,childSpanTimeout:p,markBackgroundSpan:h,traceFetch:m,traceXHR:g,trackFetchStreamPerformance:y,shouldCreateSpanForRequest:S,enableHTTPTimings:w,ignoreResourceSpans:E,ignorePerformanceApiSpans:D,instrumentPageLoad:L,instrumentNavigation:b,detectRedirects:A,linkPreviousTrace:$,consistentTraceSampling:T,enableReportPageLoaded:M,onRequestSpanStart:R,onRequestSpanEnd:N}={...AR,...e};let O,V,K;function X(v,W,k=!0){const z=W.op==="pageload",se=W.name,re=d?d(W):W,Se=re.attributes||{};if(se!==re.name&&(Se[Ze]="custom",re.attributes=Se),!k){const Ne=kn();ar({...re,startTime:Ne}).end(Ne);return}t.name=re.name,t.source=Se[Ze];const Me=Yd(re,{idleTimeout:l,finalTimeout:f,childSpanTimeout:p,disableAutoFinish:z,beforeSpanEnd:Ne=>{O==null||O(),tv(Ne,{recordClsOnPageloadSpan:!c,recordLcpOnPageloadSpan:!u,ignoreResourceSpans:E,ignorePerformanceApiSpans:D}),nd(v,void 0);const De=G(),dt=De.getPropagationContext();De.setPropagationContext({...dt,traceId:Me.spanContext().traceId,sampled:nn(Me),dsc:ct(Ne)}),z&&(K=void 0)},trimIdleSpanEndTimestamp:!M});z&&M&&(K=Me),nd(v,Me);function Dt(){n&&["interactive","complete"].includes(n.readyState)&&v.emit("idleSpanEnableAutoFinish",Me)}z&&!M&&n&&(n.addEventListener("readystatechange",()=>{Dt()}),Dt())}return{name:RR,setup(v){if(Qm(),O=J0({recordClsStandaloneSpans:c||!1,recordLcpStandaloneSpans:u||!1,client:v}),r&&Cv(),s&&pv(),i&&F.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?K0():o&&Y0(),a&&X0(),A&&n){const k=()=>{V=me()};addEventListener("click",k,{capture:!0}),addEventListener("keydown",k,{capture:!0,passive:!0})}function W(){const k=Dr(v);k&&!q(k).timestamp&&(I&&_.log(`[Tracing] Finishing current active span with op: ${q(k).op}`),k.setAttribute(Ar,"cancelled"),k.end())}v.on("startNavigationSpan",(k,z)=>{if(x()!==v)return;if(z!=null&&z.isRedirect){I&&_.warn("[Tracing] Detected redirect, navigation span will not be the root span, but a child span."),X(v,{op:"navigation.redirect",...k},!1);return}V=void 0,W(),ve().setPropagationContext({traceId:mt(),sampleRand:Math.random(),propagationSpanId:tt()?void 0:wt()});const se=G();se.setPropagationContext({traceId:mt(),sampleRand:Math.random(),propagationSpanId:tt()?void 0:wt()}),se.setSDKProcessingMetadata({normalizedRequest:void 0}),X(v,{op:"navigation",...k,parentSpan:null,forceTransaction:!0})}),v.on("startPageLoadSpan",(k,z={})=>{if(x()!==v)return;W();const se=z.sentryTrace||td("sentry-trace"),re=z.baggage||td("baggage"),Se=Dd(se,re),Me=G();Me.setPropagationContext(Se),tt()||(Me.getPropagationContext().propagationSpanId=wt()),Me.setSDKProcessingMetadata({normalizedRequest:oc()}),X(v,{op:"pageload",...k})}),v.on("endPageloadSpan",()=>{M&&K&&(K.setAttribute(Ar,"reportPageLoaded"),K.end())})},afterAllSetup(v){let W=wn();if($!=="off"&&IR(v,{linkPreviousTrace:$,consistentTraceSampling:T}),P.location){if(L){const k=xe();xR(v,{name:P.location.pathname,startTime:k?k/1e3:void 0,attributes:{[Ze]:"url",[oe]:"auto.pageload.browser"}})}b&&qo(({to:k,from:z})=>{if(z===void 0&&(W==null?void 0:W.indexOf(k))!==-1){W=void 0;return}W=void 0;const se=Ha(k),re=Dr(v),Se=re&&A&&OR(re,V);MR(v,{name:(se==null?void 0:se.pathname)||P.location.pathname,attributes:{[Ze]:"url",[oe]:"auto.navigation.browser"}},{url:k,isRedirect:Se})})}h&&ER(),a&&NR(v,l,f,p,t),r&&xv(),gR(v,{traceFetch:m,traceXHR:g,trackFetchStreamPerformance:y,tracePropagationTargets:v.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:S,enableHTTPTimings:w,onRequestSpanStart:R,onRequestSpanEnd:N})}}});function xR(e,t,n){e.emit("startPageLoadSpan",t,n),G().setTransactionName(t.name);const r=Dr(e);return r&&e.emit("afterStartPageLoadSpan",r),r}function MR(e,t,n){const{url:r,isRedirect:s}=n||{};e.emit("beforeStartNavigationSpan",t,{isRedirect:s}),e.emit("startNavigationSpan",t,{isRedirect:s});const o=G();return o.setTransactionName(t.name),r&&!s&&o.setSDKProcessingMetadata({normalizedRequest:{...oc(),url:r}}),Dr(e)}function td(e){const t=P.document,n=t==null?void 0:t.querySelector(`meta[name=${e}]`);return(n==null?void 0:n.getAttribute("content"))||void 0}function NR(e,t,n,r,s){const o=P.document;let i;const a=()=>{const c="ui.action.click",u=Dr(e);if(u){const d=q(u).op;if(["navigation","pageload"].includes(d)){I&&_.warn(`[Tracing] Did not create ${c} span because a pageload or navigation span is in progress.`);return}}if(i&&(i.setAttribute(Ar,"interactionInterrupted"),i.end(),i=void 0),!s.name){I&&_.warn(`[Tracing] Did not create ${c} transaction because _latestRouteName is missing.`);return}i=Yd({name:s.name,op:c,attributes:{[Ze]:s.source||"url"}},{idleTimeout:t,finalTimeout:n,childSpanTimeout:r})};o&&addEventListener("click",a,{capture:!0})}const Ph="_sentry_idleSpan";function Dr(e){return e[Ph]}function nd(e,t){Pe(e,Ph,t)}const rd=1.5;function OR(e,t){const n=q(e),r=kn(),s=n.start_timestamp;return!(r-s>rd||t&&r-t<=rd)}function hx(e=x()){e==null||e.emit("endPageloadSpan")}function mx(e){const t=Te();if(t===e)return;const n=G();e.end=new Proxy(e.end,{apply(r,s,o){return gt(n,t),Reflect.apply(r,s,o)}}),gt(n,e)}function nr(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function LR(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=nr(n);return s=>r.then(o=>s(o.transaction(t,"readwrite").objectStore(t)))}function Lc(e){return nr(e.getAllKeys())}function PR(e,t,n){return e(r=>Lc(r).then(s=>{if(!(s.length>=n))return r.put(t,Math.max(...s,0)+1),nr(r.transaction)}))}function DR(e,t,n){return e(r=>Lc(r).then(s=>{if(!(s.length>=n))return r.put(t,Math.min(...s,0)-1),nr(r.transaction)}))}function FR(e){return e(t=>Lc(t).then(n=>{const r=n[0];if(r!=null)return nr(t.get(r)).then(s=>(t.delete(r),nr(t.transaction).then(()=>s)))}))}function $R(e){let t;function n(){return t==null&&(t=LR(e.dbName||"sentry-offline",e.storeName||"queue")),t}return{push:async r=>{try{const s=await Ks(r);await PR(n(),s,e.maxQueueSize||30)}catch{}},unshift:async r=>{try{const s=await Ks(r);await DR(n(),s,e.maxQueueSize||30)}catch{}},shift:async()=>{try{const r=await FR(n());if(r)return ug(r)}catch{}}}}function BR(e){return t=>{const n=e({...t,createStore:$R});return P.addEventListener("online",async r=>{await n.flush()}),n}}function gx(e=kp){return BR(B_(e))}const sd=1e6,UR="window"in F&&F.window===F&&typeof importScripts>"u",Jt=String(0),bo=UR?"main":"worker",Xe=P.navigator;let Dh="",Fh="",$h="",ga=(Xe==null?void 0:Xe.userAgent)||"",Bh="";var dd;const HR=(Xe==null?void 0:Xe.language)||((dd=Xe==null?void 0:Xe.languages)==null?void 0:dd[0])||"";function WR(e){return typeof e=="object"&&e!==null&&"getHighEntropyValues"in e}const od=Xe==null?void 0:Xe.userAgentData;WR(od)&&od.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then(e=>{var t;if(Dh=e.platform||"",$h=e.architecture||"",Bh=e.model||"",Fh=e.platformVersion||"",(t=e.fullVersionList)!=null&&t.length){const n=e.fullVersionList[e.fullVersionList.length-1];ga=`${n.brand} ${n.version}`}}).catch(e=>{});function jR(e){return!("thread_metadata"in e)}function zR(e){return jR(e)?KR(e):e}function qR(e){var n,r;const t=(r=(n=e.contexts)==null?void 0:n.trace)==null?void 0:r.trace_id;return typeof t=="string"&&t.length!==32&&I&&_.log(`[Profiling] Invalid traceId: ${t} on profiled event`),typeof t!="string"?"":t}function GR(e,t,n,r){if(r.type!=="transaction")throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(n==null)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${n} instead.`);const s=qR(r),o=zR(n),i=t||(typeof r.start_timestamp=="number"?r.start_timestamp*1e3:me()*1e3),a=typeof r.timestamp=="number"?r.timestamp*1e3:me()*1e3;return{event_id:e,timestamp:new Date(i).toISOString(),platform:"javascript",version:"1",release:r.release||"",environment:r.environment||Io,runtime:{name:"javascript",version:P.navigator.userAgent},os:{name:Dh,version:Fh,build_number:ga},device:{locale:HR,model:Bh,manufacturer:ga,architecture:$h,is_emulator:!1},debug_meta:{images:Hh(n.resources)},profile:o,transactions:[{name:r.transaction||"",id:r.event_id||Ie(),trace_id:s,active_thread_id:Jt,relative_start_ns:"0",relative_end_ns:((a-i)*1e6).toFixed(0)}]}}function VR(e,t,n){var i,a,c,u,d,l;if(e==null)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${e} instead.`);const r=YR(e),s=t.getOptions(),o=(a=(i=t.getSdkMetadata)==null?void 0:i.call(t))==null?void 0:a.sdk;return{chunk_id:Ie(),client_sdk:{name:(c=o==null?void 0:o.name)!=null?c:"sentry.javascript.browser",version:(u=o==null?void 0:o.version)!=null?u:"0.0.0"},profiler_id:n||Ie(),platform:"javascript",version:"2",release:(d=s.release)!=null?d:"",environment:(l=s.environment)!=null?l:"production",debug_meta:{images:Hh(e.resources)},profile:r}}function JR(e){try{if(!e||typeof e!="object")return{reason:"chunk is not an object"};const t=r=>typeof r=="string"&&/^[a-f0-9]{32}$/.test(r);if(!t(e.profiler_id))return{reason:"missing or invalid profiler_id"};if(!t(e.chunk_id))return{reason:"missing or invalid chunk_id"};if(!e.client_sdk)return{reason:"missing client_sdk metadata"};const n=e.profile;return n?!Array.isArray(n.frames)||!n.frames.length?{reason:"profile has no frames"}:!Array.isArray(n.stacks)||!n.stacks.length?{reason:"profile has no stacks"}:!Array.isArray(n.samples)||!n.samples.length?{reason:"profile has no samples"}:{valid:!0}:{reason:"missing profile data"}}catch(t){return{reason:`unknown validation error: ${t}`}}}function YR(e){var a;const t=[];for(let c=0;c<e.frames.length;c++){const u=e.frames[c];u&&(t[c]={function:u.name,abs_path:typeof u.resourceId=="number"?e.resources[u.resourceId]:void 0,lineno:u.line,colno:u.column})}const n=[];for(let c=0;c<e.stacks.length;c++){const u=e.stacks[c];if(!u)continue;const d=[];let l=u;for(;l;)d.push(l.frameId),l=l.parentId===void 0?void 0:e.stacks[l.parentId];n[c]=d}const r=xe(),s=typeof performance.timeOrigin=="number"?performance.timeOrigin:r||0,o=s-(r||s),i=[];for(let c=0;c<e.samples.length;c++){const u=e.samples[c];if(!u)continue;const d=(s+(u.timestamp-o))/1e3;i[c]={stack_id:(a=u.stackId)!=null?a:0,thread_id:Jt,timestamp:d}}return{frames:t,stacks:n,samples:i,thread_metadata:{[Jt]:{name:bo}}}}function Uh(e){return q(e).op==="pageload"}function KR(e){let t,n=0;const r={samples:[],stacks:[],frames:[],thread_metadata:{[Jt]:{name:bo}}},s=e.samples[0];if(!s)return r;const o=s.timestamp,i=xe(),a=typeof performance.timeOrigin=="number"?performance.timeOrigin:i||0,c=a-(i||a);return e.samples.forEach((u,d)=>{if(u.stackId===void 0){t===void 0&&(t=n,r.stacks[t]=[],n++),r.samples[d]={elapsed_since_start_ns:((u.timestamp+c-o)*sd).toFixed(0),stack_id:t,thread_id:Jt};return}let l=e.stacks[u.stackId];const f=[];for(;l;){f.push(l.frameId);const h=e.frames[l.frameId];h&&r.frames[l.frameId]===void 0&&(r.frames[l.frameId]={function:h.name,abs_path:typeof h.resourceId=="number"?e.resources[h.resourceId]:void 0,lineno:h.line,colno:h.column}),l=l.parentId===void 0?void 0:e.stacks[l.parentId]}const p={elapsed_since_start_ns:((u.timestamp+c-o)*sd).toFixed(0),stack_id:n,thread_id:Jt};r.stacks[n]=f,r.samples[d]=p,n++}),r}function XR(e,t){if(!t.length)return e;for(const n of t)e[1].push([{type:"profile"},n]);return e}function QR(e){const t=[];return gn(e,(n,r)=>{var s,o;if(r==="transaction")for(let i=1;i<n.length;i++){const a=n[i];(o=(s=a==null?void 0:a.contexts)==null?void 0:s.profile)!=null&&o.profile_id&&t.push(n[i])}}),t}function Hh(e){const t=x(),n=t==null?void 0:t.getOptions(),r=n==null?void 0:n.stackParser;return r?Og(r,e):[]}function Wh(e){return typeof e!="number"&&typeof e!="boolean"||typeof e=="number"&&isNaN(e)?(I&&_.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):e===!0||e===!1?!0:e<0||e>1?(I&&_.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${e}.`),!1):!0}function ZR(e){return e.samples.length<2?(I&&_.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):e.frames.length?!0:(I&&_.log("[Profiling] Discarding profile because it contains no frames"),!1)}let Pc=!1;const jh=3e4;function eA(e){return typeof e=="function"}function zh(){const e=P.Profiler;if(!eA(e)){I&&_.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object.");return}const t=10,n=Math.floor(jh/t);try{return new e({sampleInterval:t,maxBufferSize:n})}catch{I&&(_.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),_.log("[Profiling] Disabling profiling for current user session.")),Pc=!0}}function id(e){if(Pc)return I&&_.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!e.isRecording())return I&&_.log("[Profiling] Discarding profile because root span was not sampled."),!1;const t=x(),n=t==null?void 0:t.getOptions();if(!n)return I&&_.log("[Profiling] Profiling disabled, no options found."),!1;const r=n.profilesSampleRate;return Wh(r)?r?(r===!0?!0:Math.random()<r)?!0:(I&&_.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(r)})`),!1):(I&&_.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1):(I&&_.warn("[Profiling] Discarding profile because of invalid sample rate."),!1)}function tA(e){if(Pc)return I&&_.log("[Profiling] Profiling has been disabled for the duration of the current user session as the JS Profiler could not be started."),!1;if(e.profileLifecycle!=="trace"&&e.profileLifecycle!=="manual")return I&&_.warn("[Profiling] Session not sampled. Invalid `profileLifecycle` option."),!1;const t=e.profileSessionSampleRate;return Wh(t)?t?Math.random()<=t:(I&&_.log("[Profiling] Discarding profile because profileSessionSampleRate is not defined or set to 0"),!1):(I&&_.warn("[Profiling] Discarding profile because of invalid profileSessionSampleRate."),!1)}function vs(e){return typeof e.profilesSampleRate<"u"}function nA(e,t,n,r){return ZR(n)?GR(e,t,n,r):null}const dn=new Map;function rA(){return dn.size}function sA(e){const t=dn.get(e);return t&&dn.delete(e),t}function oA(e,t){if(dn.set(e,t),dn.size>30){const n=dn.keys().next().value;n!==void 0&&dn.delete(n)}}function iA(e){var t,n,r,s,o,i,a;return!((t=e==null?void 0:e.contexts)!=null&&t.profile)||!e.contexts||(e.contexts.trace={...(r=(n=e.contexts)==null?void 0:n.trace)!=null?r:{},data:{...(i=(o=(s=e.contexts)==null?void 0:s.trace)==null?void 0:o.data)!=null?i:{},"thread.id":Jt,"thread.name":bo}},(a=e.spans)==null||a.forEach(c=>{c.data={...c.data||{},"thread.id":Jt,"thread.name":bo}})),e}function ad(e){let t;Uh(e)&&(t=me()*1e3);const n=zh();if(!n)return;I&&_.log(`[Profiling] started profiling span: ${q(e).description}`);const r=Ie();let s=null;G().setContext("profile",{profile_id:r,start_timestamp:t});async function o(){if(e&&n){if(s){I&&_.log("[Profiling] profile for:",q(e).description,"already exists, returning early");return}return n.stop().then(u=>{if(i&&(P.clearTimeout(i),i=void 0),I&&_.log(`[Profiling] stopped profiling of span: ${q(e).description}`),!u){I&&_.log(`[Profiling] profiler returned null profile for: ${q(e).description}`,"this may indicate an overlapping span or a call to stopProfiling with a profile title that was never started");return}s=u,oA(r,u)}).catch(u=>{I&&_.log("[Profiling] error while stopping profiler:",u)})}}let i=P.setTimeout(()=>{I&&_.log("[Profiling] max profile duration elapsed, stopping profiling for:",q(e).description),o()},jh);const a=e.end.bind(e);function c(){return e?(o().then(()=>{a()},()=>{a()}),e):a()}e.end=c}const aA=6e4,cA=3e5;class uA{constructor(){this._client=void 0,this._profiler=void 0,this._chunkTimer=void 0,this._profilerId=void 0,this._isRunning=!1,this._sessionSampled=!1,this._lifecycleMode=void 0,this._activeRootSpanIds=new Set,this._rootSpanTimeouts=new Map}initialize(t){const n=t.getOptions().profileLifecycle,r=tA(t.getOptions());I&&_.log(`[Profiling] Initializing profiler (lifecycle='${n}').`),r||I&&_.log("[Profiling] Session not sampled. Skipping lifecycle profiler initialization."),this._profilerId=Ie(),this._client=t,this._sessionSampled=r,this._lifecycleMode=n,n==="trace"&&this._setupTraceLifecycleListeners(t)}start(){if(this._lifecycleMode==="trace"){I&&_.warn('[Profiling] `profileLifecycle` is set to "trace". Calls to `uiProfiler.start()` are ignored in trace mode.');return}if(this._isRunning){I&&_.warn("[Profiling] Profile session is already running, `uiProfiler.start()` is a no-op.");return}if(!this._sessionSampled){I&&_.warn("[Profiling] Session is not sampled, `uiProfiler.start()` is a no-op.");return}this._beginProfiling()}stop(){if(this._lifecycleMode==="trace"){I&&_.warn('[Profiling] `profileLifecycle` is set to "trace". Calls to `uiProfiler.stop()` are ignored in trace mode.');return}if(!this._isRunning){I&&_.warn("[Profiling] Profiler is not running, `uiProfiler.stop()` is a no-op.");return}this._endProfiling()}notifyRootSpanActive(t){if(this._lifecycleMode!=="trace"||!this._sessionSampled)return;const n=t.spanContext().spanId;if(!n||this._activeRootSpanIds.has(n))return;this._registerTraceRootSpan(n);const r=this._activeRootSpanIds.size;r===1&&(I&&_.log("[Profiling] Detected already active root span during setup. Active root spans now:",r),this._beginProfiling())}_beginProfiling(){if(!this._isRunning){if(this._isRunning=!0,I&&_.log("[Profiling] Started profiling with profiler ID:",this._profilerId),Tr().setContext("profile",{profiler_id:this._profilerId}),this._startProfilerInstance(),!this._profiler){I&&_.log("[Profiling] Failed to start JS Profiler; stopping."),this._resetProfilerInfo();return}this._startPeriodicChunking()}}_endProfiling(){this._isRunning&&(this._isRunning=!1,this._chunkTimer&&(clearTimeout(this._chunkTimer),this._chunkTimer=void 0),this._clearAllRootSpanTimeouts(),this._collectCurrentChunk().catch(t=>{I&&_.error("[Profiling] Failed to collect current profile chunk on `stop()`:",t)}),this._lifecycleMode==="manual"&&Tr().setContext("profile",{}))}_setupTraceLifecycleListeners(t){t.on("spanStart",n=>{if(!this._sessionSampled){I&&_.log("[Profiling] Span not profiled because of negative sampling decision for user session.");return}if(n!==Ee(n))return;if(!n.isRecording()){I&&_.log("[Profiling] Discarding profile because root span was not sampled.");return}const r=n.spanContext().spanId;if(!r||this._activeRootSpanIds.has(r))return;this._registerTraceRootSpan(r);const s=this._activeRootSpanIds.size;s===1&&(I&&_.log(`[Profiling] Root span ${r} started. Profiling active while there are active root spans (count=${s}).`),this._beginProfiling())}),t.on("spanEnd",n=>{if(!this._sessionSampled)return;const r=n.spanContext().spanId;if(!r||!this._activeRootSpanIds.has(r))return;this._activeRootSpanIds.delete(r);const s=this._activeRootSpanIds.size;I&&_.log(`[Profiling] Root span with ID ${r} ended. Will continue profiling for as long as there are active root spans (currently: ${s}).`),s===0&&(this._collectCurrentChunk().catch(o=>{I&&_.error("[Profiling] Failed to collect current profile chunk on last `spanEnd`:",o)}),this._endProfiling())})}_resetProfilerInfo(){this._isRunning=!1,Tr().setContext("profile",{})}_clearAllRootSpanTimeouts(){this._rootSpanTimeouts.forEach(t=>clearTimeout(t)),this._rootSpanTimeouts.clear()}_registerTraceRootSpan(t){this._activeRootSpanIds.add(t);const n=setTimeout(()=>this._onRootSpanTimeout(t),cA);this._rootSpanTimeouts.set(t,n)}_startProfilerInstance(){var n;if(((n=this._profiler)==null?void 0:n.stopped)===!1)return;const t=zh();if(!t){I&&_.log("[Profiling] Failed to start JS Profiler.");return}this._profiler=t}_startPeriodicChunking(){this._isRunning&&(this._chunkTimer=setTimeout(()=>{if(this._collectCurrentChunk().catch(t=>{I&&_.error("[Profiling] Failed to collect current profile chunk during periodic chunking:",t)}),this._isRunning){if(this._startProfilerInstance(),!this._profiler){this._resetProfilerInfo();return}this._startPeriodicChunking()}},aA))}_onRootSpanTimeout(t){this._rootSpanTimeouts.has(t)&&(this._rootSpanTimeouts.delete(t),this._activeRootSpanIds.has(t)&&(I&&_.log(`[Profiling] Reached 5-minute timeout for root span ${t}. You likely started a manual root span that never called \`.end()\`.`),this._activeRootSpanIds.delete(t),this._activeRootSpanIds.size===0&&this._endProfiling()))}async _collectCurrentChunk(){const t=this._profiler;if(this._profiler=void 0,!!t)try{const n=await t.stop(),r=VR(n,this._client,this._profilerId),s=JR(r);if("reason"in s){I&&_.log("[Profiling] Discarding invalid profile chunk (this is probably a bug in the SDK):",s.reason);return}this._sendProfileChunk(r),I&&_.log("[Profiling] Collected browser profile chunk.")}catch(n){I&&_.log("[Profiling] Error while stopping JS Profiler for chunk:",n)}}_sendProfileChunk(t){var a;const n=this._client,r=wo((a=n.getSdkMetadata)==null?void 0:a.call(n)),s=n.getDsn(),o=n.getOptions().tunnel,i=lt({event_id:Ie(),sent_at:new Date().toISOString(),...r&&{sdk:r},...!!o&&s&&{dsn:Lt(s)}},[[{type:"profile_chunk",platform:"javascript"},t]]);n.sendEnvelope(i).then(null,c=>{I&&_.error("Error while sending profile chunk envelope:",c)})}}const lA="BrowserProfiling",dA=(()=>({name:lA,setup(e){const t=e.getOptions(),n=new uA;if(!vs(t)&&!t.profileLifecycle&&(t.profileLifecycle="manual"),vs(t)&&!t.profilesSampleRate){I&&_.log("[Profiling] Profiling disabled, no profiling options found.");return}const r=Te(),s=r&&Ee(r);if(vs(t)&&t.profileSessionSampleRate!==void 0&&I&&_.warn("[Profiling] Both legacy profiling (`profilesSampleRate`) and UI profiling settings are defined. `profileSessionSampleRate` has no effect when legacy profiling is enabled."),vs(t))s&&Uh(s)&&id(s)&&ad(s),e.on("spanStart",o=>{o===Ee(o)&&id(o)&&ad(o)}),e.on("beforeEnvelope",o=>{var c,u;if(!rA())return;const i=QR(o);if(!i.length)return;const a=[];for(const d of i){const l=d==null?void 0:d.contexts,f=(c=l==null?void 0:l.profile)==null?void 0:c.profile_id,p=(u=l==null?void 0:l.profile)==null?void 0:u.start_timestamp;if(typeof f!="string"){I&&_.log("[Profiling] cannot find profile for a span without a profile context");continue}if(!f){I&&_.log("[Profiling] cannot find profile for a span without a profile context");continue}l!=null&&l.profile&&delete l.profile;const h=sA(f);if(!h){I&&_.log(`[Profiling] Could not retrieve profile for span: ${f}`);continue}const m=nA(f,p,h,d);m&&a.push(m)}XR(o,a)});else{const o=t.profileLifecycle;if(e.on("startUIProfiler",()=>n.start()),e.on("stopUIProfiler",()=>n.stop()),o==="manual")n.initialize(e);else if(o==="trace"){if(!tt(t)){I&&_.warn("[Profiling] `profileLifecycle` is 'trace' but tracing is disabled. Set a `tracesSampleRate` or `tracesSampler` to enable span tracing.");return}n.initialize(e),s&&n.notifyRootSpanActive(s),P.setTimeout(()=>{const i=Te(),a=i&&Ee(i);a&&n.notifyRootSpanActive(a)},0)}}},processEvent(e){return iA(e)}})),_x=dA,yx=()=>({name:"LaunchDarkly",processEvent(e,t,n){return cr(e)}});function Sx(){return{name:"sentry-flag-auditor",type:"flag-used",synchronous:!0,method:(e,t,n)=>{_n(e,t.value),yn(e,t.value)}}}const bx=()=>({name:"OpenFeature",processEvent(e,t,n){return cr(e)}});class Ex{after(t,n){_n(n.flagKey,n.value),yn(n.flagKey,n.value)}error(t,n,r){_n(t.flagKey,t.defaultValue),yn(t.flagKey,t.defaultValue)}}const Tx=({featureFlagClientClass:e})=>({name:"Unleash",setupOnce(){const t=e.prototype;Ce(t,"isEnabled",fA)},processEvent(t,n,r){return cr(t)}});function fA(e){return function(...t){const n=t[0],r=e.apply(this,t);return typeof n=="string"&&typeof r=="boolean"?(_n(n,r),yn(n,r)):I&&_.error(`[Feature Flags] UnleashClient.isEnabled does not match expected signature. arg0: ${n} (${typeof n}), result: ${r} (${typeof r})`),r}}const vx=(({growthbookClass:e})=>lS({growthbookClass:e})),Ix=({featureFlagClient:e})=>({name:"Statsig",setup(t){e.on("gate_evaluation",n=>{_n(n.gate.name,n.gate.value),yn(n.gate.name,n.gate.value)})},processEvent(t,n,r){return cr(t)}});async function wx(){const e=x();if(!e)return"no-client-active";if(!e.getDsn())return"no-dsn-configured";const r=e.getOptions().tunnel||"https://o447951.ingest.sentry.io/api/4509632503087104/envelope/?sentry_version=7&sentry_key=c1dfb07d783ad5325c245c1fd3725390&sentry_client=sentry.javascript.browser%2F1.33.7";try{await Ig(()=>fetch(r,{body:"{}",method:"POST",mode:"cors",credentials:"omit"}))}catch{return"sentry-unreachable"}}const pA="WebWorker",kx=({worker:e})=>({name:pA,setupOnce:()=>{(Array.isArray(e)?e:[e]).forEach(t=>cd(t))},addWorker:t=>cd(t)});function cd(e){e.addEventListener("message",t=>{if(mA(t.data)){if(t.stopImmediatePropagation(),t.data._sentryDebugIds&&(I&&_.log("Sentry debugId web worker message received",t.data),P._sentryDebugIds={...t.data._sentryDebugIds,...P._sentryDebugIds}),t.data._sentryModuleMetadata&&(I&&_.log("Sentry module metadata web worker message received",t.data),P._sentryModuleMetadata={...t.data._sentryModuleMetadata,...P._sentryModuleMetadata}),t.data._sentryWasmImages){I&&_.log("Sentry WASM images web worker message received",t.data);const n=P._sentryWasmImages||[],r=t.data._sentryWasmImages.filter(s=>Ve(s)&&typeof s.code_file=="string"&&!n.some(o=>o.code_file===s.code_file));P._sentryWasmImages=[...n,...r]}t.data._sentryWorkerError&&(I&&_.log("Sentry worker rejection message received",t.data._sentryWorkerError),hA(t.data._sentryWorkerError))}})}function hA(e){const t=x();if(!t)return;const n=t.getOptions().stackParser,r=t.getOptions().attachStacktrace,s=e.reason,o=Yt(s)?Ap(s):Wo(n,s,void 0,r,!0);o.level="error",e.filename&&(o.contexts={...o.contexts,worker:{filename:e.filename}}),zr(o,{originalException:s,mechanism:{handled:!1,type:"auto.browser.web_worker.onunhandledrejection"}}),I&&_.log("Captured worker unhandled rejection",s)}function Cx({self:e}){var t,n;e.postMessage({_sentryMessage:!0,_sentryDebugIds:(t=e._sentryDebugIds)!=null?t:void 0,_sentryModuleMetadata:(n=e._sentryModuleMetadata)!=null?n:void 0}),e.addEventListener("unhandledrejection",r=>{var i;const o={reason:Rp(r),filename:(i=e.location)==null?void 0:i.href};e.postMessage({_sentryMessage:!0,_sentryWorkerError:o}),I&&_.log("[Sentry Worker] Forwarding unhandled rejection to parent",o)}),I&&_.log("[Sentry Worker] Registered worker with unhandled rejection handling")}function mA(e){if(!Ve(e)||e._sentryMessage!==!0)return!1;const t="_sentryDebugIds"in e,n="_sentryModuleMetadata"in e,r="_sentryWorkerError"in e,s="_sentryWasmImages"in e;return!(!t&&!n&&!r&&!s||t&&!(Ve(e._sentryDebugIds)||e._sentryDebugIds===void 0)||n&&!(Ve(e._sentryModuleMetadata)||e._sentryModuleMetadata===void 0)||r&&!Ve(e._sentryWorkerError)||s&&(!Array.isArray(e._sentryWasmImages)||!e._sentryWasmImages.every(o=>Ve(o)&&typeof o.code_file=="string")))}export{f0 as BrowserClient,fi as MULTIPLEXED_TRANSPORT_EXTRA_KEY,Ex as OpenFeatureIntegrationHook,zt as SDK_VERSION,we as SEMANTIC_ATTRIBUTE_SENTRY_OP,oe as SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN,va as SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE,Ze as SEMANTIC_ATTRIBUTE_SENTRY_SOURCE,_t as Scope,P as WINDOW,Mt as addBreadcrumb,e_ as addEventProcessor,lu as addIntegration,iI as breadcrumbsIntegration,_I as browserApiErrorsIntegration,_x as browserProfilingIntegration,vI as browserSessionIntegration,px as browserTracingIntegration,Sx as buildLaunchDarklyFlagUsedHandler,xA as captureConsoleIntegration,zr as captureEvent,_e as captureException,bS as captureFeedback,Kg as captureMessage,au as captureSession,zv as chromeStackLineParser,kA as close,$A as consoleLoggingIntegration,ax as contextLinesIntegration,SA as continueTrace,UA as createConsolaReporter,zA as createLangChainCallbackHandler,w_ as createTransport,ZA as createUserFeedbackEnvelope,vy as dedupeIntegration,Oh as defaultRequestInstrumentationOptions,tI as defaultStackLineParsers,nI as defaultStackParser,wx as diagnoseSdkConnectivity,Qd as endSession,oy as eventFiltersIntegration,a0 as eventFromException,c0 as eventFromMessage,ic as exceptionFromError,MA as extraErrorDataIntegration,DA as featureFlagsIntegration,VA as feedbackAsyncIntegration,JA as feedbackIntegration,JA as feedbackSyncIntegration,wA as flush,nx as forceLoad,ny as functionToStringIntegration,Jv as geckoStackLineParser,Te as getActiveSpan,x as getClient,G as getCurrentScope,jI as getDefaultIntegrations,GA as getFeedback,Tr as getGlobalScope,ve as getIsolationScope,dx as getReplay,Ee as getRootSpan,ks as getSpanDescendants,xm as getSpanStatusFromHttpCode,Sf as getTraceData,kI as globalHandlersIntegration,cx as graphqlClientIntegration,vx as growthbookIntegration,ix as httpClientIntegration,MI as httpContextIntegration,iy as inboundFiltersIntegration,tx as init,WA as instrumentAnthropicAiClient,jA as instrumentGoogleGenAIClient,qA as instrumentLangGraph,HA as instrumentOpenAiClient,gR as instrumentOutgoingRequests,Gy as instrumentSupabaseClient,Zg as isEnabled,CA as isInitialized,Qg as lastEventId,yx as launchDarklyIntegration,ZT as lazyLoadIntegration,DI as linkedErrorsIntegration,FA as logger,gx as makeBrowserOfflineTransport,kp as makeFetchTransport,RA as makeMultiplexedTransport,BA as metrics,AA as moduleMetadataIntegration,rx as onLoad,bx as openFeatureIntegration,XA as opera10StackLineParser,QA as opera11StackLineParser,G_ as parameterize,Qm as registerSpanErrorInstrumentation,Cx as registerWebWorker,fx as replayCanvasIntegration,lx as replayIntegration,hx as reportPageLoaded,ox as reportingObserverIntegration,NA as rewriteFramesIntegration,rT as sendFeedback,mx as setActiveSpanInBrowser,Xg as setContext,F_ as setCurrentClient,EA as setExtra,bA as setExtras,Gs as setHttpStatus,Sg as setMeasurement,vA as setTag,TA as setTags,IA as setUser,sx as showReportDialog,yA as spanToBaggageHeader,q as spanToJSON,Vm as spanToTraceHeader,ex as spotlightBrowserIntegration,MR as startBrowserTracingNavigationSpan,xR as startBrowserTracingPageLoadSpan,ar as startInactiveSpan,wg as startNewTrace,iu as startSession,rn as startSpan,Wt as startSpanManual,Ix as statsigIntegration,OA as supabaseIntegration,Ig as suppressTracing,PA as thirdPartyErrorFilterIntegration,YA as uiProfiler,Tx as unleashIntegration,_A as updateSpanName,kx as webWorkerIntegration,KA as winjsStackLineParser,Ro as withActiveSpan,gA as withIsolationScope,ut as withScope,LA as zodErrorsIntegration};
